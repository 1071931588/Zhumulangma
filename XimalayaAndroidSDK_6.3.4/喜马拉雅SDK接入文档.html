<!doctype html>
<html>
<head>
<meta charset='UTF-8'><meta name='viewport' content='width=device-width initial-scale=1'>
<title>喜马拉雅SDK接入文档</title><link href='https://fonts.loli.net/css?family=Open+Sans:400italic,700italic,700,400&subset=latin,latin-ext' rel='stylesheet' type='text/css' /><style type='text/css'>html {overflow-x: initial !important;}:root { --bg-color: #ffffff; --text-color: #333333; --select-text-bg-color: #B5D6FC; --select-text-font-color: auto; --monospace: "Lucida Console",Consolas,"Courier",monospace; }
html { font-size: 14px; background-color: var(--bg-color); color: var(--text-color); font-family: "Helvetica Neue", Helvetica, Arial, sans-serif; -webkit-font-smoothing: antialiased; }
body { margin: 0px; padding: 0px; height: auto; bottom: 0px; top: 0px; left: 0px; right: 0px; font-size: 1rem; line-height: 1.42857143; overflow-x: hidden; background-image: inherit; background-size: inherit; background-attachment: inherit; background-origin: inherit; background-clip: inherit; background-color: inherit; tab-size: 4; background-position: inherit inherit; background-repeat: inherit inherit; }
iframe { margin: auto; }
a.url { word-break: break-all; }
a:active, a:hover { outline: 0px; }
.in-text-selection, ::selection { text-shadow: none; background: var(--select-text-bg-color); color: var(--select-text-font-color); }
#write { margin: 0px auto; height: auto; width: inherit; word-break: normal; word-wrap: break-word; position: relative; white-space: normal; overflow-x: visible; padding-top: 40px; }
#write.first-line-indent p { text-indent: 2em; }
#write.first-line-indent li p, #write.first-line-indent p * { text-indent: 0px; }
#write.first-line-indent li { margin-left: 2em; }
.for-image #write { padding-left: 8px; padding-right: 8px; }
body.typora-export { padding-left: 30px; padding-right: 30px; }
.typora-export .footnote-line, .typora-export li, .typora-export p { white-space: pre-wrap; }
@media screen and (max-width: 500px) { 
  body.typora-export { padding-left: 0px; padding-right: 0px; }
  #write { padding-left: 20px; padding-right: 20px; }
  .CodeMirror-sizer { margin-left: 0px !important; }
  .CodeMirror-gutters { display: none !important; }
}
#write li > figure:last-child { margin-bottom: 0.5rem; }
#write ol, #write ul { position: relative; }
img { max-width: 100%; vertical-align: middle; }
button, input, select, textarea { color: inherit; font-family: inherit; font-size: inherit; font-style: inherit; font-variant-caps: inherit; font-weight: inherit; font-stretch: inherit; line-height: inherit; }
input[type="checkbox"], input[type="radio"] { line-height: normal; padding: 0px; }
*, ::after, ::before { box-sizing: border-box; }
#write h1, #write h2, #write h3, #write h4, #write h5, #write h6, #write p, #write pre { width: inherit; }
#write h1, #write h2, #write h3, #write h4, #write h5, #write h6, #write p { position: relative; }
h1, h2, h3, h4, h5, h6 { break-after: avoid-page; break-inside: avoid; orphans: 2; }
p { orphans: 4; }
h1 { font-size: 2rem; }
h2 { font-size: 1.8rem; }
h3 { font-size: 1.6rem; }
h4 { font-size: 1.4rem; }
h5 { font-size: 1.2rem; }
h6 { font-size: 1rem; }
.md-math-block, .md-rawblock, h1, h2, h3, h4, h5, h6, p { margin-top: 1rem; margin-bottom: 1rem; }
.hidden { display: none; }
.md-blockmeta { color: rgb(204, 204, 204); font-weight: 700; font-style: italic; }
a { cursor: pointer; }
sup.md-footnote { padding: 2px 4px; background-color: rgba(238, 238, 238, 0.701961); color: rgb(85, 85, 85); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; cursor: pointer; }
sup.md-footnote a, sup.md-footnote a:hover { color: inherit; text-transform: inherit; text-decoration: inherit; }
#write input[type="checkbox"] { cursor: pointer; width: inherit; height: inherit; }
figure { overflow-x: auto; margin: 1.2em 0px; max-width: calc(100% + 16px); padding: 0px; }
figure > table { margin: 0px !important; }
tr { break-inside: avoid; break-after: auto; }
thead { display: table-header-group; }
table { border-collapse: collapse; border-spacing: 0px; width: 100%; overflow: auto; break-inside: auto; text-align: left; }
table.md-table td { min-width: 32px; }
.CodeMirror-gutters { border-right-width: 0px; background-color: inherit; }
.CodeMirror-linenumber { }
.CodeMirror { text-align: left; }
.CodeMirror-placeholder { opacity: 0.3; }
.CodeMirror pre { padding: 0px 4px; }
.CodeMirror-lines { padding: 0px; }
div.hr:focus { cursor: none; }
#write pre { white-space: pre-wrap; }
#write.fences-no-line-wrapping pre { white-space: pre; }
#write pre.ty-contain-cm { white-space: normal; }
.CodeMirror-gutters { margin-right: 4px; }
.md-fences { font-size: 0.9rem; display: block; break-inside: avoid; text-align: left; overflow: visible; white-space: pre; background-image: inherit; background-size: inherit; background-attachment: inherit; background-origin: inherit; background-clip: inherit; background-color: inherit; position: relative !important; background-position: inherit inherit; background-repeat: inherit inherit; }
.md-diagram-panel { width: 100%; margin-top: 10px; text-align: center; padding-top: 0px; padding-bottom: 8px; overflow-x: auto; }
#write .md-fences.mock-cm { white-space: pre-wrap; }
.md-fences.md-fences-with-lineno { padding-left: 0px; }
#write.fences-no-line-wrapping .md-fences.mock-cm { white-space: pre; overflow-x: auto; }
.md-fences.mock-cm.md-fences-with-lineno { padding-left: 8px; }
.CodeMirror-line, twitterwidget { break-inside: avoid; }
.footnotes { opacity: 0.8; font-size: 0.9rem; margin-top: 1em; margin-bottom: 1em; }
.footnotes + .footnotes { margin-top: 0px; }
.md-reset { margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: top; text-decoration: none; text-shadow: none; float: none; position: static; width: auto; height: auto; white-space: nowrap; cursor: inherit; line-height: normal; font-weight: 400; text-align: left; box-sizing: content-box; direction: ltr; background-position: 0px 0px; background-repeat: initial initial; }
li div { padding-top: 0px; }
blockquote { margin: 1rem 0px; }
li .mathjax-block, li p { margin: 0.5rem 0px; }
li { margin: 0px; position: relative; }
blockquote > :last-child { margin-bottom: 0px; }
blockquote > :first-child, li > :first-child { margin-top: 0px; }
.footnotes-area { color: rgb(136, 136, 136); margin-top: 0.714rem; padding-bottom: 0.143rem; white-space: normal; }
#write .footnote-line { white-space: pre-wrap; }
@media print { 
  body, html { border: 1px solid transparent; height: 99%; break-after: avoid-page; break-before: avoid-page; }
  #write { margin-top: 0px; padding-top: 0px; border-color: transparent !important; }
  .typora-export * { -webkit-print-color-adjust: exact; }
  html.blink-to-pdf { font-size: 13px; }
  .typora-export #write { padding-left: 32px; padding-right: 32px; padding-bottom: 0px; break-after: avoid-page; }
  .typora-export #write::after { height: 0px; }
  @page { margin: 20mm 0px; }
}
.footnote-line { margin-top: 0.714em; font-size: 0.7em; }
a img, img a { cursor: pointer; }
pre.md-meta-block { font-size: 0.8rem; min-height: 0.8rem; white-space: pre-wrap; background-color: rgb(204, 204, 204); display: block; overflow-x: hidden; background-position: initial initial; background-repeat: initial initial; }
p > .md-image:only-child:not(.md-img-error) img, p > img:only-child { display: block; margin: auto; }
p > .md-image:only-child { display: inline-block; width: 100%; }
#write .MathJax_Display { margin: 0.8em 0px 0px; }
.md-math-block { width: 100%; }
.md-math-block:not(:empty)::after { display: none; }
[contenteditable="true"]:active, [contenteditable="true"]:focus { outline: 0px; box-shadow: none; }
.md-task-list-item { position: relative; list-style-type: none; }
.task-list-item.md-task-list-item { padding-left: 0px; }
.md-task-list-item > input { position: absolute; top: 0px; left: 0px; margin-left: -1.2em; margin-top: calc(1em - 10px); border: none; }
.math { font-size: 1rem; }
.md-toc { min-height: 3.58rem; position: relative; font-size: 0.9rem; border-top-left-radius: 10px; border-top-right-radius: 10px; border-bottom-right-radius: 10px; border-bottom-left-radius: 10px; }
.md-toc-content { position: relative; margin-left: 0px; }
.md-toc-content::after, .md-toc::after { display: none; }
.md-toc-item { display: block; color: rgb(65, 131, 196); }
.md-toc-item a { text-decoration: none; }
.md-toc-inner:hover { text-decoration: underline; }
.md-toc-inner { display: inline-block; cursor: pointer; }
.md-toc-h1 .md-toc-inner { margin-left: 0px; font-weight: 700; }
.md-toc-h2 .md-toc-inner { margin-left: 2em; }
.md-toc-h3 .md-toc-inner { margin-left: 4em; }
.md-toc-h4 .md-toc-inner { margin-left: 6em; }
.md-toc-h5 .md-toc-inner { margin-left: 8em; }
.md-toc-h6 .md-toc-inner { margin-left: 10em; }
@media screen and (max-width: 48em) { 
  .md-toc-h3 .md-toc-inner { margin-left: 3.5em; }
  .md-toc-h4 .md-toc-inner { margin-left: 5em; }
  .md-toc-h5 .md-toc-inner { margin-left: 6.5em; }
  .md-toc-h6 .md-toc-inner { margin-left: 8em; }
}
a.md-toc-inner { font-size: inherit; font-style: inherit; font-weight: inherit; line-height: inherit; }
.footnote-line a:not(.reversefootnote) { color: inherit; }
.md-attr { display: none; }
.md-fn-count::after { content: "."; }
code, pre, samp, tt { font-family: var(--monospace); }
kbd { margin: 0px 0.1em; padding: 0.1em 0.6em; font-size: 0.8em; color: rgb(36, 39, 41); background-color: rgb(255, 255, 255); border: 1px solid rgb(173, 179, 185); border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; box-shadow: rgba(12, 13, 14, 0.2) 0px 1px 0px, rgb(255, 255, 255) 0px 0px 0px 2px inset; white-space: nowrap; vertical-align: middle; background-position: initial initial; background-repeat: initial initial; }
.md-comment { color: rgb(162, 127, 3); opacity: 0.8; font-family: var(--monospace); }
code { text-align: left; }
a.md-print-anchor { white-space: pre !important; border: none !important; display: inline-block !important; position: absolute !important; width: 1px !important; right: 0px !important; outline: 0px !important; text-shadow: initial !important; background-position: 0px 0px !important; background-repeat: initial initial !important; }
.md-inline-math .MathJax_SVG .noError { display: none !important; }
.html-for-mac .inline-math-svg .MathJax_SVG { vertical-align: 0.2px; }
.md-math-block .MathJax_SVG_Display { text-align: center; margin: 0px; position: relative; text-indent: 0px; max-width: none; max-height: none; min-height: 0px; min-width: 100%; width: auto; overflow-y: hidden; display: block !important; }
.MathJax_SVG_Display, .md-inline-math .MathJax_SVG_Display { width: auto; margin: inherit; display: inline-block !important; }
.MathJax_SVG .MJX-monospace { font-family: var(--monospace); }
.MathJax_SVG .MJX-sans-serif { font-family: sans-serif; }
.MathJax_SVG { display: inline; font-style: normal; font-weight: 400; line-height: normal; zoom: 90%; text-indent: 0px; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; padding: 0px; margin: 0px; }
.MathJax_SVG * { transition: none; }
.MathJax_SVG_Display svg { vertical-align: middle !important; margin-bottom: 0px !important; }
.os-windows.monocolor-emoji .md-emoji { font-family: "Segoe UI Symbol", sans-serif; }
.md-diagram-panel > svg { max-width: 100%; }
[lang="mermaid"] svg, [lang="flow"] svg { max-width: 100%; }
[lang="mermaid"] .node text { font-size: 1rem; }
table tr th { border-bottom-width: 0px; }
video { max-width: 100%; display: block; margin: 0px auto; }
iframe { max-width: 100%; width: 100%; border: none; }
.highlight td, .highlight tr { border: 0px; }


.CodeMirror { height: auto; }
.CodeMirror.cm-s-inner { background-image: inherit; background-size: inherit; background-attachment: inherit; background-origin: inherit; background-clip: inherit; background-color: inherit; background-position: inherit inherit; background-repeat: inherit inherit; }
.CodeMirror-scroll { overflow-y: hidden; overflow-x: auto; z-index: 3; }
.CodeMirror-gutter-filler, .CodeMirror-scrollbar-filler { background-color: rgb(255, 255, 255); }
.CodeMirror-gutters { border-right-width: 1px; border-right-style: solid; border-right-color: rgb(221, 221, 221); background-image: inherit; background-size: inherit; background-attachment: inherit; background-origin: inherit; background-clip: inherit; background-color: inherit; white-space: nowrap; background-position: inherit inherit; background-repeat: inherit inherit; }
.CodeMirror-linenumber { padding: 0px 3px 0px 5px; text-align: right; color: rgb(153, 153, 153); }
.cm-s-inner .cm-keyword { color: rgb(119, 0, 136); }
.cm-s-inner .cm-atom, .cm-s-inner.cm-atom { color: rgb(34, 17, 153); }
.cm-s-inner .cm-number { color: rgb(17, 102, 68); }
.cm-s-inner .cm-def { color: rgb(0, 0, 255); }
.cm-s-inner .cm-variable { color: rgb(0, 0, 0); }
.cm-s-inner .cm-variable-2 { color: rgb(0, 85, 170); }
.cm-s-inner .cm-variable-3 { color: rgb(0, 136, 85); }
.cm-s-inner .cm-string { color: rgb(170, 17, 17); }
.cm-s-inner .cm-property { color: rgb(0, 0, 0); }
.cm-s-inner .cm-operator { color: rgb(152, 26, 26); }
.cm-s-inner .cm-comment, .cm-s-inner.cm-comment { color: rgb(170, 85, 0); }
.cm-s-inner .cm-string-2 { color: rgb(255, 85, 0); }
.cm-s-inner .cm-meta { color: rgb(85, 85, 85); }
.cm-s-inner .cm-qualifier { color: rgb(85, 85, 85); }
.cm-s-inner .cm-builtin { color: rgb(51, 0, 170); }
.cm-s-inner .cm-bracket { color: rgb(153, 153, 119); }
.cm-s-inner .cm-tag { color: rgb(17, 119, 0); }
.cm-s-inner .cm-attribute { color: rgb(0, 0, 204); }
.cm-s-inner .cm-header, .cm-s-inner.cm-header { color: rgb(0, 0, 255); }
.cm-s-inner .cm-quote, .cm-s-inner.cm-quote { color: rgb(0, 153, 0); }
.cm-s-inner .cm-hr, .cm-s-inner.cm-hr { color: rgb(153, 153, 153); }
.cm-s-inner .cm-link, .cm-s-inner.cm-link { color: rgb(0, 0, 204); }
.cm-negative { color: rgb(221, 68, 68); }
.cm-positive { color: rgb(34, 153, 34); }
.cm-header, .cm-strong { font-weight: 700; }
.cm-del { text-decoration: line-through; }
.cm-em { font-style: italic; }
.cm-link { text-decoration: underline; }
.cm-error { color: red; }
.cm-invalidchar { color: red; }
.cm-constant { color: rgb(38, 139, 210); }
.cm-defined { color: rgb(181, 137, 0); }
div.CodeMirror span.CodeMirror-matchingbracket { color: rgb(0, 255, 0); }
div.CodeMirror span.CodeMirror-nonmatchingbracket { color: rgb(255, 34, 34); }
.cm-s-inner .CodeMirror-activeline-background { background-image: inherit; background-size: inherit; background-attachment: inherit; background-origin: inherit; background-clip: inherit; background-color: inherit; background-position: inherit inherit; background-repeat: inherit inherit; }
.CodeMirror { position: relative; overflow: hidden; }
.CodeMirror-scroll { height: 100%; outline: 0px; position: relative; box-sizing: content-box; background-image: inherit; background-size: inherit; background-attachment: inherit; background-origin: inherit; background-clip: inherit; background-color: inherit; background-position: inherit inherit; background-repeat: inherit inherit; }
.CodeMirror-sizer { position: relative; }
.CodeMirror-gutter-filler, .CodeMirror-hscrollbar, .CodeMirror-scrollbar-filler, .CodeMirror-vscrollbar { position: absolute; z-index: 6; display: none; }
.CodeMirror-vscrollbar { right: 0px; top: 0px; overflow: hidden; }
.CodeMirror-hscrollbar { bottom: 0px; left: 0px; overflow: hidden; }
.CodeMirror-scrollbar-filler { right: 0px; bottom: 0px; }
.CodeMirror-gutter-filler { left: 0px; bottom: 0px; }
.CodeMirror-gutters { position: absolute; left: 0px; top: 0px; padding-bottom: 30px; z-index: 3; }
.CodeMirror-gutter { white-space: normal; height: 100%; box-sizing: content-box; padding-bottom: 30px; margin-bottom: -32px; display: inline-block; }
.CodeMirror-gutter-wrapper { position: absolute; z-index: 4; border: none !important; background-position: 0px 0px !important; background-repeat: initial initial !important; }
.CodeMirror-gutter-background { position: absolute; top: 0px; bottom: 0px; z-index: 4; }
.CodeMirror-gutter-elt { position: absolute; cursor: default; z-index: 4; }
.CodeMirror-lines { cursor: text; }
.CodeMirror pre { border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; border-width: 0px; font-family: inherit; font-size: inherit; margin: 0px; white-space: pre; word-wrap: normal; color: inherit; z-index: 2; position: relative; overflow: visible; background-position: 0px 0px; background-repeat: initial initial; }
.CodeMirror-wrap pre { word-wrap: break-word; white-space: pre-wrap; word-break: normal; }
.CodeMirror-code pre { border-right-width: 30px; border-right-style: solid; border-right-color: transparent; width: fit-content; }
.CodeMirror-wrap .CodeMirror-code pre { border-right-style: none; width: auto; }
.CodeMirror-linebackground { position: absolute; left: 0px; right: 0px; top: 0px; bottom: 0px; z-index: 0; }
.CodeMirror-linewidget { position: relative; z-index: 2; overflow: auto; }
.CodeMirror-wrap .CodeMirror-scroll { overflow-x: hidden; }
.CodeMirror-measure { position: absolute; width: 100%; height: 0px; overflow: hidden; visibility: hidden; }
.CodeMirror-measure pre { position: static; }
.CodeMirror div.CodeMirror-cursor { position: absolute; visibility: hidden; border-right-style: none; width: 0px; }
.CodeMirror div.CodeMirror-cursor { visibility: hidden; }
.CodeMirror-focused div.CodeMirror-cursor { visibility: inherit; }
.cm-searching { background-color: rgba(255, 255, 0, 0.4); background-position: initial initial; background-repeat: initial initial; }
@media print { 
  .CodeMirror div.CodeMirror-cursor { visibility: hidden; }
}


:root {
    --side-bar-bg-color: #fafafa;
    --control-text-color: #777;
}

@include-when-export url(https://fonts.loli.net/css?family=Open+Sans:400italic,700italic,700,400&subset=latin,latin-ext);

html {
    font-size: 16px;
}

body {
    font-family: "Open Sans","Clear Sans","Helvetica Neue",Helvetica,Arial,sans-serif;
    color: rgb(51, 51, 51);
    line-height: 1.6;
}

#write {
    max-width: 860px;
  	margin: 0 auto;
  	padding: 30px;
    padding-bottom: 100px;
}
#write > ul:first-child,
#write > ol:first-child{
    margin-top: 30px;
}

a {
    color: #4183C4;
}
h1,
h2,
h3,
h4,
h5,
h6 {
    position: relative;
    margin-top: 1rem;
    margin-bottom: 1rem;
    font-weight: bold;
    line-height: 1.4;
    cursor: text;
}
h1:hover a.anchor,
h2:hover a.anchor,
h3:hover a.anchor,
h4:hover a.anchor,
h5:hover a.anchor,
h6:hover a.anchor {
    text-decoration: none;
}
h1 tt,
h1 code {
    font-size: inherit;
}
h2 tt,
h2 code {
    font-size: inherit;
}
h3 tt,
h3 code {
    font-size: inherit;
}
h4 tt,
h4 code {
    font-size: inherit;
}
h5 tt,
h5 code {
    font-size: inherit;
}
h6 tt,
h6 code {
    font-size: inherit;
}
h1 {
    padding-bottom: .3em;
    font-size: 2.25em;
    line-height: 1.2;
    border-bottom: 1px solid #eee;
}
h2 {
   padding-bottom: .3em;
    font-size: 1.75em;
    line-height: 1.225;
    border-bottom: 1px solid #eee;
}
h3 {
    font-size: 1.5em;
    line-height: 1.43;
}
h4 {
    font-size: 1.25em;
}
h5 {
    font-size: 1em;
}
h6 {
   font-size: 1em;
    color: #777;
}
p,
blockquote,
ul,
ol,
dl,
table{
    margin: 0.8em 0;
}
li>ol,
li>ul {
    margin: 0 0;
}
hr {
    height: 2px;
    padding: 0;
    margin: 16px 0;
    background-color: #e7e7e7;
    border: 0 none;
    overflow: hidden;
    box-sizing: content-box;
}

li p.first {
    display: inline-block;
}
ul,
ol {
    padding-left: 30px;
}
ul:first-child,
ol:first-child {
    margin-top: 0;
}
ul:last-child,
ol:last-child {
    margin-bottom: 0;
}
blockquote {
    border-left: 4px solid #dfe2e5;
    padding: 0 15px;
    color: #777777;
}
blockquote blockquote {
    padding-right: 0;
}
table {
    padding: 0;
    word-break: initial;
}
table tr {
    border-top: 1px solid #dfe2e5;
    margin: 0;
    padding: 0;
}
table tr:nth-child(2n),
thead {
    background-color: #f8f8f8;
}
table tr th {
    font-weight: bold;
    border: 1px solid #dfe2e5;
    border-bottom: 0;
    text-align: left;
    margin: 0;
    padding: 6px 13px;
}
table tr td {
    border: 1px solid #dfe2e5;
    text-align: left;
    margin: 0;
    padding: 6px 13px;
}
table tr th:first-child,
table tr td:first-child {
    margin-top: 0;
}
table tr th:last-child,
table tr td:last-child {
    margin-bottom: 0;
}

.CodeMirror-lines {
    padding-left: 4px;
}

.code-tooltip {
    box-shadow: 0 1px 1px 0 rgba(0,28,36,.3);
    border-top: 1px solid #eef2f2;
}

.md-fences,
code,
tt {
    border: 1px solid #e7eaed;
    background-color: #f8f8f8;
    border-radius: 3px;
    padding: 0;
    padding: 2px 4px 0px 4px;
    font-size: 0.9em;
}

code {
    background-color: #f3f4f4;
    padding: 0 2px 0 2px;
}

.md-fences {
    margin-bottom: 15px;
    margin-top: 15px;
    padding-top: 8px;
    padding-bottom: 6px;
}


.md-task-list-item > input {
  margin-left: -1.3em;
}

@media print {
    html {
        font-size: 13px;
    }
    table,
    pre {
        page-break-inside: avoid;
    }
    pre {
        word-wrap: break-word;
    }
}

.md-fences {
	background-color: #f8f8f8;
}
#write pre.md-meta-block {
	padding: 1rem;
    font-size: 85%;
    line-height: 1.45;
    background-color: #f7f7f7;
    border: 0;
    border-radius: 3px;
    color: #777777;
    margin-top: 0 !important;
}

.mathjax-block>.code-tooltip {
	bottom: .375rem;
}

.md-mathjax-midline {
    background: #fafafa;
}

#write>h3.md-focus:before{
	left: -1.5625rem;
	top: .375rem;
}
#write>h4.md-focus:before{
	left: -1.5625rem;
	top: .285714286rem;
}
#write>h5.md-focus:before{
	left: -1.5625rem;
	top: .285714286rem;
}
#write>h6.md-focus:before{
	left: -1.5625rem;
	top: .285714286rem;
}
.md-image>.md-meta {
    /*border: 1px solid #ddd;*/
    border-radius: 3px;
    padding: 2px 0px 0px 4px;
    font-size: 0.9em;
    color: inherit;
}

.md-tag {
    color: #a7a7a7;
    opacity: 1;
}

.md-toc { 
    margin-top:20px;
    padding-bottom:20px;
}

.sidebar-tabs {
    border-bottom: none;
}

#typora-quick-open {
    border: 1px solid #ddd;
    background-color: #f8f8f8;
}

#typora-quick-open-item {
    background-color: #FAFAFA;
    border-color: #FEFEFE #e5e5e5 #e5e5e5 #eee;
    border-style: solid;
    border-width: 1px;
}

/** focus mode */
.on-focus-mode blockquote {
    border-left-color: rgba(85, 85, 85, 0.12);
}

header, .context-menu, .megamenu-content, footer{
    font-family: "Segoe UI", "Arial", sans-serif;
}

.file-node-content:hover .file-node-icon,
.file-node-content:hover .file-node-open-state{
    visibility: visible;
}

.mac-seamless-mode #typora-sidebar {
    background-color: #fafafa;
    background-color: var(--side-bar-bg-color);
}

.md-lang {
    color: #b4654d;
}

.html-for-mac .context-menu {
    --item-hover-bg-color: #E6F0FE;
}

#md-notification .btn {
    border: 0;
}

.dropdown-menu .divider {
    border-color: #e5e5e5;
}

 .typora-export li, .typora-export p, .typora-export,  .footnote-line {white-space: normal;} 
</style>
</head>
<body class='typora-export' >
<div  id='write'  class = 'is-mac'><h1><a name='header-n0' class='md-header-anchor '></a>喜马拉雅Android SDK接入文档</h1><h6><font color="red">如果贵方的targetSdkVersion &gt;= 26 强烈建议使用XmPlayerManager.init(int id, Notification notification) 进行初始化,否则在后台启动services的时候,如果在3.5秒之后发现没有设置notification 我会设置一个内容为"正在后台收听"的通知栏</font></h6><h6><font color="red">如果之前贵方使用了 `XmPlayerManager.init(int id, Notification notification)` 这个初始化的方式请参考`4.8 播放器通知栏使用`重新添加新的通知栏布局,否则直接升级可能导致在部分手机播放时崩溃</font></h6><h6><font color="red">如果不使用下载功能不需要添加`XmDownload.jar` ,如果需要用户登录的接口可以使用我们的`XmlyOAuth2SDK.jar`</font></h6><h6><font color="red">如果贵方在Application初始化XmPlayerManager CommonRequest等组件时注意加上BaseUtil.isMainProcess(context)判断</font></h6><h6><font color="red">如果贵方使用了播放器然后出现了"以下内容由喜马拉雅为您提供" 然后不能播放,请检查 2.5 so文件的相关问题 ,4.8 播放器通知栏使用 ,</font></h6><h6><font color="red">如果target设置为28之后需要添加 android.permission.FOREGROUND_SERVICE 权限 ,网络请求出现错误 请按 https://www.jianshu.com/p/57047a84e559 此文档进行配置</font></h6><div class='md-toc' mdtype='toc'><p class="md-toc-content"><span class="md-toc-item md-toc-h1" data-ref="n0"><a class="md-toc-inner" href="#header-n0">喜马拉雅Android SDK接入文档</a></span><span class="md-toc-item md-toc-h1" data-ref="n10"><a class="md-toc-inner" href="#header-n10">1 概述</a></span><span class="md-toc-item md-toc-h1" data-ref="n13"><a class="md-toc-inner" href="#header-n13">2 接入准备</a></span><span class="md-toc-item md-toc-h2" data-ref="n14"><a class="md-toc-inner" href="#header-n14">2.1 申请app_key、app_secret和pack_id</a></span><span class="md-toc-item md-toc-h2" data-ref="n23"><a class="md-toc-inner" href="#header-n23">2.2 添加SDK依赖的第三方jar包</a></span><span class="md-toc-item md-toc-h2" data-ref="n27"><a class="md-toc-inner" href="#header-n27">2.3 配置应用工程的AndroidManifest.xml</a></span><span class="md-toc-item md-toc-h3" data-ref="n28"><a class="md-toc-inner" href="#header-n28">2.3.1 添加权限</a></span><span class="md-toc-item md-toc-h3" data-ref="n30"><a class="md-toc-inner" href="#header-n30">2.3.2 添加meta-data</a></span><span class="md-toc-item md-toc-h3" data-ref="n35"><a class="md-toc-inner" href="#header-n35">2.3.3 配置播放器</a></span><span class="md-toc-item md-toc-h2" data-ref="n38"><a class="md-toc-inner" href="#header-n38">2.4 Model字典</a></span><span class="md-toc-item md-toc-h2" data-ref="n40"><a class="md-toc-inner" href="#header-n40">2.5 so文件的相关问题</a></span><span class="md-toc-item md-toc-h3" data-ref="n41"><a class="md-toc-inner" href="#header-n41">2.5.1 关于libxmediaplayer.so、libxmediaplayerv7.so、libxmediaplayer_x.so放置的位置</a></span><span class="md-toc-item md-toc-h3" data-ref="n49"><a class="md-toc-inner" href="#header-n49">2.5.2 关于64位so的问题</a></span><span class="md-toc-item md-toc-h3" data-ref="n51"><a class="md-toc-inner" href="#header-n51">2.5.3 关于通过远程添加第三方库,并且库中含有so导致打包失败的问题</a></span><span class="md-toc-item md-toc-h3" data-ref="n54"><a class="md-toc-inner" href="#header-n54">2.5.4 so问题排查</a></span><span class="md-toc-item md-toc-h3" data-ref="n56"><a class="md-toc-inner" href="#header-n56">2.5.5 放置部分so</a></span><span class="md-toc-item md-toc-h2" data-ref="n62"><a class="md-toc-inner" href="#header-n62">2.6 混淆</a></span><span class="md-toc-item md-toc-h2" data-ref="n64"><a class="md-toc-inner" href="#header-n64">2.7 打开debug 模式</a></span><span class="md-toc-item md-toc-h1" data-ref="n66"><a class="md-toc-inner" href="#header-n66">3 编码接入详细介绍</a></span><span class="md-toc-item md-toc-h2" data-ref="n67"><a class="md-toc-inner" href="#header-n67">3.1 初始化接口（必接）</a></span><span class="md-toc-item md-toc-h3" data-ref="n68"><a class="md-toc-inner" href="#header-n68">3.1.1 设置app_secret(应用私钥)</a></span><span class="md-toc-item md-toc-h3" data-ref="n81"><a class="md-toc-inner" href="#header-n81">3.1.2 网络代理配置（可选）</a></span><span class="md-toc-item md-toc-h3" data-ref="n127"><a class="md-toc-inner" href="#header-n127">3.1.3 配置使用https进行访问</a></span><span class="md-toc-item md-toc-h2" data-ref="n136"><a class="md-toc-inner" href="#header-n136">3.2 点播数据接口</a></span><span class="md-toc-item md-toc-h3" data-ref="n137"><a class="md-toc-inner" href="#header-n137">3.2.1 获取喜马拉雅内容分类</a></span><span class="md-toc-item md-toc-h3" data-ref="n150"><a class="md-toc-inner" href="#header-n150">3.2.2 获取专辑标签或者声音标签</a></span><span class="md-toc-item md-toc-h3" data-ref="n177"><a class="md-toc-inner" href="#header-n177">3.2.3 根据分类和标签获取某个分类某个标签下的专辑列表（最火/最新/最多播放）</a></span><span class="md-toc-item md-toc-h3" data-ref="n219"><a class="md-toc-inner" href="#header-n219">3.2.4 专辑浏览，根据专辑ID获取专辑下的声音列表</a></span><span class="md-toc-item md-toc-h3" data-ref="n260"><a class="md-toc-inner" href="#header-n260">3.2.5 批量获取专辑列表</a></span><span class="md-toc-item md-toc-h3" data-ref="n284"><a class="md-toc-inner" href="#header-n284">3.2.6 根据专辑ID列表批获取量专辑更新提醒信息列表</a></span><span class="md-toc-item md-toc-h3" data-ref="n306"><a class="md-toc-inner" href="#header-n306">3.2.7 根据分类和标签获取热门声音列表</a></span><span class="md-toc-item md-toc-h3" data-ref="n347"><a class="md-toc-inner" href="#header-n347">3.2.8 批量获取声音列表</a></span><span class="md-toc-item md-toc-h3" data-ref="n371"><a class="md-toc-inner" href="#header-n371">3.2.9 根据上一次所听声音的id，获取此声音所在那一页的声音</a></span><span class="md-toc-item md-toc-h3" data-ref="n413"><a class="md-toc-inner" href="#header-n413">3.2.10 根据分类和标签获取某个分类某个标签下的专辑列表（最火/最新/最多播放） (<code>已过时</code>)</a></span><span class="md-toc-item md-toc-h3" data-ref="n458"><a class="md-toc-inner" href="#header-n458">3.2.11 根据分类和标签获取某个分类某个标签下的热门专辑列表 (<code>已过时</code>)</a></span><span class="md-toc-item md-toc-h3" data-ref="n494"><a class="md-toc-inner" href="#header-n494">3.2.12 获取某个分类下的元数据列表。</a></span><span class="md-toc-item md-toc-h3" data-ref="n520"><a class="md-toc-inner" href="#header-n520">3.2.13 获取某个分类的元数据属性键值组合下包含的热门专辑列表/最新专辑列表/最多播放专辑列表。</a></span><span class="md-toc-item md-toc-h2" data-ref="n565"><a class="md-toc-inner" href="#header-n565">3.3 直播数据接口</a></span><span class="md-toc-item md-toc-h3" data-ref="n566"><a class="md-toc-inner" href="#header-n566">3.3.1 获取直播省市列表</a></span><span class="md-toc-item md-toc-h3" data-ref="n579"><a class="md-toc-inner" href="#header-n579">3.3.2 获取直播电台</a></span><span class="md-toc-item md-toc-h3" data-ref="n615"><a class="md-toc-inner" href="#header-n615">3.3.3 获取直播电台某一天的节目排期表</a></span><span class="md-toc-item md-toc-h3" data-ref="n644"><a class="md-toc-inner" href="#header-n644">3.3.4 获取直播节目详情</a></span><span class="md-toc-item md-toc-h3" data-ref="n668"><a class="md-toc-inner" href="#header-n668">3.3.5 批量获取电台接口</a></span><span class="md-toc-item md-toc-h3" data-ref="n690"><a class="md-toc-inner" href="#header-n690">3.3.6 获取某省份城市列表。</a></span><span class="md-toc-item md-toc-h3" data-ref="n713"><a class="md-toc-inner" href="#header-n713">3.3.6 获取某个城市下的电台列表</a></span><span class="md-toc-item md-toc-h3" data-ref="n745"><a class="md-toc-inner" href="#header-n745">3.3.7 获取直播电台的分类。</a></span><span class="md-toc-item md-toc-h3" data-ref="n756"><a class="md-toc-inner" href="#header-n756">3.3.8 根据电台分类获取直播电台数据。</a></span><span class="md-toc-item md-toc-h2" data-ref="n788"><a class="md-toc-inner" href="#header-n788">3.4 榜单数据接口</a></span><span class="md-toc-item md-toc-h3" data-ref="n789"><a class="md-toc-inner" href="#header-n789">3.4.1 根据榜单类型获取榜单首页的榜单列表</a></span><span class="md-toc-item md-toc-h4" data-ref="n810"><a class="md-toc-inner" href="#header-n810">Rank</a></span><span class="md-toc-item md-toc-h3" data-ref="n879"><a class="md-toc-inner" href="#header-n879">3.4.2 根据rank_key获取某个榜单下的专辑列表</a></span><span class="md-toc-item md-toc-h3" data-ref="n911"><a class="md-toc-inner" href="#header-n911">3.4.3 根据rank_key获取某个榜单下的声音列表</a></span><span class="md-toc-item md-toc-h3" data-ref="n940"><a class="md-toc-inner" href="#header-n940">3.4.4 获取直播电台排行榜</a></span><span class="md-toc-item md-toc-h2" data-ref="n963"><a class="md-toc-inner" href="#header-n963">3.5 听单数据接口</a></span><span class="md-toc-item md-toc-h3" data-ref="n964"><a class="md-toc-inner" href="#header-n964">3.5.1 获取精品听单内容</a></span><span class="md-toc-item md-toc-h3" data-ref="n986"><a class="md-toc-inner" href="#header-n986">3.5.2 获取某个听单详情，每个听单包含听单简介信息和专辑或声音的列表</a></span><span class="md-toc-item md-toc-h2" data-ref="n1009"><a class="md-toc-inner" href="#header-n1009">3.6 焦点图数据接口</a></span><span class="md-toc-item md-toc-h3" data-ref="n1010"><a class="md-toc-inner" href="#header-n1010">3.6.1 获取榜单焦点图列表</a></span><span class="md-toc-item md-toc-h3" data-ref="n1032"><a class="md-toc-inner" href="#header-n1032">3.6.2 获取发现页推荐的焦点图列表</a></span><span class="md-toc-item md-toc-h3" data-ref="n1064"><a class="md-toc-inner" href="#header-n1064">3.6.3 获取分类推荐的焦点图列表 (已过时 请使用3.6.4)</a></span><span class="md-toc-item md-toc-h3" data-ref="n1106"><a class="md-toc-inner" href="#header-n1106">3.6.4 获取v2版本的分类推荐的焦点图列表。</a></span><span class="md-toc-item md-toc-h2" data-ref="n1156"><a class="md-toc-inner" href="#header-n1156">3.7 冷启动接口</a></span><span class="md-toc-item md-toc-h3" data-ref="n1157"><a class="md-toc-inner" href="#header-n1157">3.7.1 获取冷启动一级分类</a></span><span class="md-toc-item md-toc-h3" data-ref="n1168"><a class="md-toc-inner" href="#header-n1168">3.7.2 获取冷启动二级分类</a></span><span class="md-toc-item md-toc-h3" data-ref="n1179"><a class="md-toc-inner" href="#header-n1179">3.7.3 根据冷启动一级分类和冷启动二级分类获取相应类别下的冷启动标签列表</a></span><span class="md-toc-item md-toc-h3" data-ref="n1206"><a class="md-toc-inner" href="#header-n1206">3.7.4 提交用户感兴趣的冷启动标签</a></span><span class="md-toc-item md-toc-h3" data-ref="n1238"><a class="md-toc-inner" href="#header-n1238">3.7.5 获取用户提交的冷启动标签详情</a></span><span class="md-toc-item md-toc-h2" data-ref="n1249"><a class="md-toc-inner" href="#header-n1249">3.8 主播数据接口</a></span><span class="md-toc-item md-toc-h3" data-ref="n1250"><a class="md-toc-inner" href="#header-n1250">3.8.1 获取喜马拉雅主播分类</a></span><span class="md-toc-item md-toc-h3" data-ref="n1261"><a class="md-toc-inner" href="#header-n1261">3.8.2 获取某个分类下的主播列表</a></span><span class="md-toc-item md-toc-h3" data-ref="n1298"><a class="md-toc-inner" href="#header-n1298">3.8.3 获取主播的专辑列表</a></span><span class="md-toc-item md-toc-h3" data-ref="n1330"><a class="md-toc-inner" href="#header-n1330">3.8.4 获取某个主播的声音列表</a></span><span class="md-toc-item md-toc-h3" data-ref="n1363"><a class="md-toc-inner" href="#header-n1363">3.8.5 根据一批主播ID批量获取主播信息</a></span><span class="md-toc-item md-toc-h2" data-ref="n1386"><a class="md-toc-inner" href="#header-n1386">3.9 搜索接口</a></span><span class="md-toc-item md-toc-h3" data-ref="n1387"><a class="md-toc-inner" href="#header-n1387">3.9.1 搜索专辑</a></span><span class="md-toc-item md-toc-h3" data-ref="n1435"><a class="md-toc-inner" href="#header-n1435">3.9.2 搜索声音</a></span><span class="md-toc-item md-toc-h3" data-ref="n1481"><a class="md-toc-inner" href="#header-n1481">3.9.3 搜索直播</a></span><span class="md-toc-item md-toc-h3" data-ref="n1520"><a class="md-toc-inner" href="#header-n1520">3.9.4 获取最新热搜词</a></span><span class="md-toc-item md-toc-h3" data-ref="n1542"><a class="md-toc-inner" href="#header-n1542">3.9.5 获取某个关键词的联想词</a></span><span class="md-toc-item md-toc-h3" data-ref="n1564"><a class="md-toc-inner" href="#header-n1564">3.9.6 搜索主播</a></span><span class="md-toc-item md-toc-h3" data-ref="n1602"><a class="md-toc-inner" href="#header-n1602">3.9.7 获取指定数量直播，声音，专辑的内容。</a></span><span class="md-toc-item md-toc-h3" data-ref="n1636"><a class="md-toc-inner" href="#header-n1636">3.9.8 搜索专辑，支持的筛选条件包括专辑ID、标题、专辑所属主播ID或昵称、标签、是否付费、价格类型、分类ID或分类名等，并可指定排序字段。</a></span><span class="md-toc-item md-toc-h3" data-ref="n1719"><a class="md-toc-inner" href="#header-n1719">3.9.9 搜索声音，支持的筛选条件包括声音ID、标题、所属专辑ID、所属专辑标题、所属主播ID或昵称、标签、是否付费、分类ID或分类名等，并可指定排序字段。</a></span><span class="md-toc-item md-toc-h2" data-ref="n1807"><a class="md-toc-inner" href="#header-n1807">3.10 推荐接口</a></span><span class="md-toc-item md-toc-h3" data-ref="n1808"><a class="md-toc-inner" href="#header-n1808">3.10.1 获取运营人员在发现页配置的分类维度专辑推荐模块的列表</a></span><span class="md-toc-item md-toc-h3" data-ref="n1831"><a class="md-toc-inner" href="#header-n1831">3.10.2 获取运营人员为某个分类配置的标签维度专辑推荐模块列表</a></span><span class="md-toc-item md-toc-h3" data-ref="n1860"><a class="md-toc-inner" href="#header-n1860">3.10.3 获取某个专辑的相关推荐</a></span><span class="md-toc-item md-toc-h3" data-ref="n1882"><a class="md-toc-inner" href="#header-n1882">3.10.4 获取下载听模块的推荐下载专辑</a></span><span class="md-toc-item md-toc-h3" data-ref="n1909"><a class="md-toc-inner" href="#header-n1909">3.10.5 获取某个声音的相关推荐专辑</a></span><span class="md-toc-item md-toc-h3" data-ref="n1931"><a class="md-toc-inner" href="#header-n1931">3.10.6 获取猜你喜欢专辑</a></span><span class="md-toc-item md-toc-h2" data-ref="n1954"><a class="md-toc-inner" href="#header-n1954">3.12 定制化接口</a></span><span class="md-toc-item md-toc-h3" data-ref="n1955"><a class="md-toc-inner" href="#header-n1955">3.12.1 获取合作方自定制的专辑类听单</a></span><span class="md-toc-item md-toc-h3" data-ref="n2003"><a class="md-toc-inner" href="#header-n2003">3.12.2 获取合作方自定制的声音类听单。</a></span><span class="md-toc-item md-toc-h3" data-ref="n2051"><a class="md-toc-inner" href="#header-n2051">3.12.3 根据自定义专辑听单ID和分页参数获取自定义专辑听单内容详情，自定义专辑听单下可包含专辑或者自定义声音听单（见自运营内容网站）</a></span><span class="md-toc-item md-toc-h3" data-ref="n2109"><a class="md-toc-inner" href="#header-n2109">3.12.4 根据自定义声音听单ID和分页参数获取自定义声音听单内容详情</a></span><span class="md-toc-item md-toc-h3" data-ref="n2163"><a class="md-toc-inner" href="#header-n2163">3.12.5 根据搜索条件和分页参数，搜索所有声音听单下符合条件的声音列表</a></span><span class="md-toc-item md-toc-h3" data-ref="n2221"><a class="md-toc-inner" href="#header-n2221">3.12.6 根据声音ID和该声音所属声音听单ID获取声音详情</a></span><span class="md-toc-item md-toc-h3" data-ref="n2252"><a class="md-toc-inner" href="#header-n2252">3.12.7 根据搜索条件和分页参数，搜索所有专辑或声音听单，注意返回结果已去重。</a></span><span class="md-toc-item md-toc-h2" data-ref="n2330"><a class="md-toc-inner" href="#header-n2330">3.13 用户播放历史接口</a></span><span class="md-toc-item md-toc-h3" data-ref="n2331"><a class="md-toc-inner" href="#header-n2331">3.13.1 根据用户ID获取用户播放云历史记录</a></span><span class="md-toc-item md-toc-h3" data-ref="n2341"><a class="md-toc-inner" href="#header-n2341">3.13.2 用户上传播放云历史记录</a></span><span class="md-toc-item md-toc-h3" data-ref="n2400"><a class="md-toc-inner" href="#header-n2400">3.13.3 用户批量上传播放云历史记录</a></span><span class="md-toc-item md-toc-h3" data-ref="n2422"><a class="md-toc-inner" href="#header-n2422">3.13.4 用户批量删除播放云历史记录</a></span><span class="md-toc-item md-toc-h2" data-ref="n2444"><a class="md-toc-inner" href="#header-n2444">3.14 用户订阅接口</a></span><span class="md-toc-item md-toc-h3" data-ref="n2446"><a class="md-toc-inner" href="#header-n2446">3.14.1 获取喜马拉雅用户的动态更新的订阅专辑列表</a></span><span class="md-toc-item md-toc-h3" data-ref="n2473"><a class="md-toc-inner" href="#header-n2473">3.14.2 用户新增或取消已订阅专辑</a></span><span class="md-toc-item md-toc-h3" data-ref="n2500"><a class="md-toc-inner" href="#header-n2500">3.14.3 用户批量新增已订阅专辑</a></span><span class="md-toc-item md-toc-h2" data-ref="n2522"><a class="md-toc-inner" href="#header-n2522">3.15 喜马拉雅付费内容接口</a></span><span class="md-toc-item md-toc-h3" data-ref="n2523"><a class="md-toc-inner" href="#header-n2523">3.15.1 获取所有付费专辑</a></span><span class="md-toc-item md-toc-h3" data-ref="n2549"><a class="md-toc-inner" href="#header-n2549">3.15.2 获取付费精品分类下的标签（或者叫热词）列表</a></span><span class="md-toc-item md-toc-h3" data-ref="n2561"><a class="md-toc-inner" href="#header-n2561">3.15.3 根据付费精品分类下的标签（或者叫热词）获取热门付费专辑列表</a></span><span class="md-toc-item md-toc-h3" data-ref="n2592"><a class="md-toc-inner" href="#header-n2592">3.15.4 分页获取付费专辑下的声音列表（即分页浏览付费专辑下的声音列表）</a></span><span class="md-toc-item md-toc-h3" data-ref="n2633"><a class="md-toc-inner" href="#header-n2633">3.15.5 批量根据付费专辑ID获取付费专辑详情</a></span><span class="md-toc-item md-toc-h3" data-ref="n2654"><a class="md-toc-inner" href="#header-n2654">3.15.6 批量根据付费声音ID获取付费声音详情</a></span><span class="md-toc-item md-toc-h3" data-ref="n2675"><a class="md-toc-inner" href="#header-n2675">3.15.7 获取所有付费内容排行榜（付费专辑榜或付费声音榜）基础信息</a></span><span class="md-toc-item md-toc-h3" data-ref="n2685"><a class="md-toc-inner" href="#header-n2685">3.15.8 根据rank_key分页获取某个付费专辑排行榜下的付费专辑列表</a></span><span class="md-toc-item md-toc-h3" data-ref="n2716"><a class="md-toc-inner" href="#header-n2716">3.15.9 获取用户购买过的所有付费专辑</a></span><span class="md-toc-item md-toc-h3" data-ref="n2726"><a class="md-toc-inner" href="#header-n2726">3.15.10 根据用户ID和一批付费专辑ID获取用户对这批付费专辑的购买状态</a></span><span class="md-toc-item md-toc-h3" data-ref="n2749"><a class="md-toc-inner" href="#header-n2749">3.15.11 根据用户ID和一批付费声音ID获取用户对这批付费声音的购买状态</a></span><span class="md-toc-item md-toc-h3" data-ref="n2771"><a class="md-toc-inner" href="#header-n2771">3.15.12 根据关键词搜索付费专辑</a></span><span class="md-toc-item md-toc-h3" data-ref="n2802"><a class="md-toc-inner" href="#header-n2802">3.15.13 根据关键词搜索付费声音</a></span><span class="md-toc-item md-toc-h3" data-ref="n2832"><a class="md-toc-inner" href="#header-n2832">3.15.14 客户端下单购买</a></span><span class="md-toc-item md-toc-h4" data-ref="n2854"><a class="md-toc-inner" href="#header-n2854">3.15.14.1 客户端下单购买后播放地址更新</a></span><span class="md-toc-item md-toc-h3" data-ref="n2856"><a class="md-toc-inner" href="#header-n2856">3.15.15 第三方服务端调用下单接口然后使用SDK吊起购买页面</a></span><span class="md-toc-item md-toc-h3" data-ref="n2864"><a class="md-toc-inner" href="#header-n2864">3.15.16 部分试听声音,试听结束后回调</a></span><span class="md-toc-item md-toc-h3" data-ref="n2867"><a class="md-toc-inner" href="#header-n2867">3.15.17 根据专辑ID获取专辑下的所有声音ID列表</a></span><span class="md-toc-item md-toc-h3" data-ref="n2899"><a class="md-toc-inner" href="#header-n2899">3.15.18 检查是否有未支付的订单并取消订单</a></span><span class="md-toc-item md-toc-h3" data-ref="n2909"><a class="md-toc-inner" href="#header-n2909">3.15.19 取消订单</a></span><span class="md-toc-item md-toc-h3" data-ref="n2937"><a class="md-toc-inner" href="#header-n2937">3.15.20</a></span><span class="md-toc-item md-toc-h2" data-ref="n2963"><a class="md-toc-inner" href="#header-n2963">3.16 用户相关接口</a></span><span class="md-toc-item md-toc-h3" data-ref="n2964"><a class="md-toc-inner" href="#header-n2964">3.16.1 根据用户ID获取用户基本信息</a></span><span class="md-toc-item md-toc-h3" data-ref="n2970"><a class="md-toc-inner" href="#header-n2970">3.16.2 根据用户ID获取用户画像资料</a></span><span class="md-toc-item md-toc-h1" data-ref="n2976"><a class="md-toc-inner" href="#header-n2976">3.17 测试付费相关内容需要注意的事项</a></span><span class="md-toc-item md-toc-h2" data-ref="n2979"><a class="md-toc-inner" href="#header-n2979">3.18 服务端下单确单</a></span><span class="md-toc-item md-toc-h1" data-ref="n2982"><a class="md-toc-inner" href="#header-n2982">4 播放器说明</a></span><span class="md-toc-item md-toc-h2" data-ref="n2984"><a class="md-toc-inner" href="#header-n2984">4.1 播放器概述</a></span><span class="md-toc-item md-toc-h2" data-ref="n2986"><a class="md-toc-inner" href="#header-n2986">4.2 播放器环境搭建</a></span><span class="md-toc-item md-toc-h2" data-ref="n2989"><a class="md-toc-inner" href="#header-n2989">4.3 播放器状态介绍</a></span><span class="md-toc-item md-toc-h2" data-ref="n2992"><a class="md-toc-inner" href="#header-n2992">4.4 播放器初始化和释放</a></span><span class="md-toc-item md-toc-h2" data-ref="n2996"><a class="md-toc-inner" href="#header-n2996">4.5 通过播放器播放声音</a></span><span class="md-toc-item md-toc-h3" data-ref="n2998"><a class="md-toc-inner" href="#header-n2998">4.5.1 playLiveRadioForSDK函数源代码</a></span><span class="md-toc-item md-toc-h2" data-ref="n3002"><a class="md-toc-inner" href="#header-n3002">4.6 播放器控制</a></span><span class="md-toc-item md-toc-h2" data-ref="n3102"><a class="md-toc-inner" href="#header-n3102">4.7 播放器回调</a></span><span class="md-toc-item md-toc-h2" data-ref="n3168"><a class="md-toc-inner" href="#header-n3168">4.8 播放器通知栏使用</a></span><span class="md-toc-item md-toc-h2" data-ref="n3180"><a class="md-toc-inner" href="#header-n3180">4.9 拼接Track信息进行播放</a></span><span class="md-toc-item md-toc-h3" data-ref="n3181"><a class="md-toc-inner" href="#header-n3181">4.9.1 播放已经下载好的声音</a></span><span class="md-toc-item md-toc-h3" data-ref="n3184"><a class="md-toc-inner" href="#header-n3184">4.9.2 播放在线声音(声音资源是第三方的)</a></span><span class="md-toc-item md-toc-h3" data-ref="n3187"><a class="md-toc-inner" href="#header-n3187">4.9.3 播放在线声音(声音资源是喜马拉雅的)</a></span><span class="md-toc-item md-toc-h3" data-ref="n3190"><a class="md-toc-inner" href="#header-n3190">4.9.4 额外展示使用参数</a></span><span class="md-toc-item md-toc-h2" data-ref="n3195"><a class="md-toc-inner" href="#header-n3195">4.10 播放器初始化完成回调</a></span><span class="md-toc-item md-toc-h2" data-ref="n3199"><a class="md-toc-inner" href="#header-n3199">4.11 播放器加载播放音质策略</a></span><span class="md-toc-item md-toc-h2" data-ref="n3202"><a class="md-toc-inner" href="#header-n3202">4.12 不希望记住播放记录(即每次播放从头开始播放)</a></span><span class="md-toc-item md-toc-h2" data-ref="n3204"><a class="md-toc-inner" href="#header-n3204">4.13 关于贵方的智能硬件设备是x86平台的问题</a></span><span class="md-toc-item md-toc-h2" data-ref="n3207"><a class="md-toc-inner" href="#header-n3207">4.14 贵方同时使用了自己的播放器和我们的播放器,线控被占用的问题</a></span><span class="md-toc-item md-toc-h2" data-ref="n3210"><a class="md-toc-inner" href="#header-n3210">4.15 不希望SDK处理AudioFocus</a></span><span class="md-toc-item md-toc-h2" data-ref="n3212"><a class="md-toc-inner" href="#header-n3212">4.16 播放缓存设置缓存数量</a></span><span class="md-toc-item md-toc-h2" data-ref="n3214"><a class="md-toc-inner" href="#header-n3214">4.17 是否使用防劫持方案</a></span><span class="md-toc-item md-toc-h2" data-ref="n3216"><a class="md-toc-inner" href="#header-n3216">4.18 倍速播放</a></span><span class="md-toc-item md-toc-h2" data-ref="n3219"><a class="md-toc-inner" href="#header-n3219">4.19 定时关闭</a></span><span class="md-toc-item md-toc-h2" data-ref="n3222"><a class="md-toc-inner" href="#header-n3222">4.20 是否处理因为网络断开导致的不能播放问题</a></span><span class="md-toc-item md-toc-h1" data-ref="n3227"><a class="md-toc-inner" href="#header-n3227">5 错误处理</a></span><span class="md-toc-item md-toc-h2" data-ref="n3228"><a class="md-toc-inner" href="#header-n3228">5.1 HTTP响应码</a></span><span class="md-toc-item md-toc-h2" data-ref="n3272"><a class="md-toc-inner" href="#header-n3272">5.2 错误码</a></span><span class="md-toc-item md-toc-h1" data-ref="n3426"><a class="md-toc-inner" href="#header-n3426">6 音频下载功能</a></span><span class="md-toc-item md-toc-h2" data-ref="n3427"><a class="md-toc-inner" href="#header-n3427">6.1 概述</a></span><span class="md-toc-item md-toc-h2" data-ref="n3428"><a class="md-toc-inner" href="#header-n3428">6.2 接口</a></span><span class="md-toc-item md-toc-h3" data-ref="n3429"><a class="md-toc-inner" href="#header-n3429">6.2.1 初始化</a></span><span class="md-toc-item md-toc-h3" data-ref="n3432"><a class="md-toc-inner" href="#header-n3432">6.2.2 下载接口</a></span><span class="md-toc-item md-toc-h3" data-ref="n3446"><a class="md-toc-inner" href="#header-n3446">6.2.3 暂停下载接口</a></span><span class="md-toc-item md-toc-h3" data-ref="n3457"><a class="md-toc-inner" href="#header-n3457">6.2.4 恢复下载接口</a></span><span class="md-toc-item md-toc-h3" data-ref="n3468"><a class="md-toc-inner" href="#header-n3468">6.2.5 取消下载接口</a></span><span class="md-toc-item md-toc-h3" data-ref="n3479"><a class="md-toc-inner" href="#header-n3479">6.2.6 获取下载状态接口</a></span><span class="md-toc-item md-toc-h3" data-ref="n3493"><a class="md-toc-inner" href="#header-n3493">6.2.7 正在下载或已下载的音频列表</a></span><span class="md-toc-item md-toc-h3" data-ref="n3506"><a class="md-toc-inner" href="#header-n3506">6.2.8 清理下载接口</a></span><span class="md-toc-item md-toc-h3" data-ref="n3519"><a class="md-toc-inner" href="#header-n3519">6.2.9 获取下载文件已占用的磁盘空间</a></span><span class="md-toc-item md-toc-h3" data-ref="n3526"><a class="md-toc-inner" href="#header-n3526">6.2.10 是否有正在下载的任务</a></span><span class="md-toc-item md-toc-h3" data-ref="n3532"><a class="md-toc-inner" href="#header-n3532">6.2.11 设置网络代理</a></span><span class="md-toc-item md-toc-h3" data-ref="n3574"><a class="md-toc-inner" href="#header-n3574">6.2.12 释放</a></span><span class="md-toc-item md-toc-h3" data-ref="n3577"><a class="md-toc-inner" href="#header-n3577">6.2.13  更改保存的地址</a></span><span class="md-toc-item md-toc-h3" data-ref="n3581"><a class="md-toc-inner" href="#header-n3581">6.2.13 更改保存的地址 并转移已经下载,未下载,正在下载的音频</a></span><span class="md-toc-item md-toc-h3" data-ref="n3591"><a class="md-toc-inner" href="#header-n3591">6.2.14 更换顺序</a></span><span class="md-toc-item md-toc-h3" data-ref="n3601"><a class="md-toc-inner" href="#header-n3601">6.2.15 获得下载的音频根据album进行分组</a></span><span class="md-toc-item md-toc-h3" data-ref="n3610"><a class="md-toc-inner" href="#header-n3610">6.2.16 album里面是否有正在下载的track</a></span><span class="md-toc-item md-toc-h3" data-ref="n3619"><a class="md-toc-inner" href="#header-n3619">6.2.17 添加全局的添加下载的listener</a></span><span class="md-toc-item md-toc-h2" data-ref="n3627"><a class="md-toc-inner" href="#header-n3627">6.3 工具方法</a></span><span class="md-toc-item md-toc-h3" data-ref="n3628"><a class="md-toc-inner" href="#header-n3628">6.3.1 ComparatorUtil.java</a></span><span class="md-toc-item md-toc-h1" data-ref="n3668"><a class="md-toc-inner" href="#header-n3668">7 登录授权SDK</a></span><span class="md-toc-item md-toc-h2" data-ref="n3670"><a class="md-toc-inner" href="#header-n3670">登录流程简图</a></span><span class="md-toc-item md-toc-h2" data-ref="n3672"><a class="md-toc-inner" href="#header-n3672">7.1 manifest 需要声明OAuth2 Android  SDK中的 Activity：&lt;br&gt;</a></span><span class="md-toc-item md-toc-h2" data-ref="n3674"><a class="md-toc-inner" href="#header-n3674">7.2 使用回调确定是否有需要登录授权的情况</a></span><span class="md-toc-item md-toc-h2" data-ref="n3676"><a class="md-toc-inner" href="#header-n3676">7.3 调用登录授权接口</a></span><span class="md-toc-item md-toc-h2" data-ref="n3678"><a class="md-toc-inner" href="#header-n3678">7.4 将回调结果设置到SDK内(!!! 重要)</a></span><span class="md-toc-item md-toc-h2" data-ref="n3680"><a class="md-toc-inner" href="#header-n3680">7.5 二维码登录</a></span><span class="md-toc-item md-toc-h3" data-ref="n3681"><a class="md-toc-inner" href="#header-n3681">7.5.1 客户端请求获取二维码图片</a></span><span class="md-toc-item md-toc-h3" data-ref="n3699"><a class="md-toc-inner" href="#header-n3699">7.5.2 查询登录状态</a></span><span class="md-toc-item md-toc-h2" data-ref="n3724"><a class="md-toc-inner" href="#header-n3724">7.6 退出登录</a></span><span class="md-toc-item md-toc-h2" data-ref="n3734"><a class="md-toc-inner" href="#header-n3734">7.7 服务端实现 redirect_url (必须实现 重要!!!)</a></span><span class="md-toc-item md-toc-h2" data-ref="n3738"><a class="md-toc-inner" href="#header-n3738">7.8 第三方使用third_uid和third_token换取授权后的access_token</a></span><span class="md-toc-item md-toc-h1" data-ref="n3751"><a class="md-toc-inner" href="#header-n3751">8 SDK相关问题反馈</a></span></p></div><div class='md-toc' mdtype='toc'><p class="md-toc-content"><span class="md-toc-item md-toc-h1" data-ref="n0"><a class="md-toc-inner" href="#header-n0">喜马拉雅Android SDK接入文档</a></span><span class="md-toc-item md-toc-h1" data-ref="n10"><a class="md-toc-inner" href="#header-n10">1 概述</a></span><span class="md-toc-item md-toc-h1" data-ref="n13"><a class="md-toc-inner" href="#header-n13">2 接入准备</a></span><span class="md-toc-item md-toc-h2" data-ref="n14"><a class="md-toc-inner" href="#header-n14">2.1 申请app_key、app_secret和pack_id</a></span><span class="md-toc-item md-toc-h2" data-ref="n23"><a class="md-toc-inner" href="#header-n23">2.2 添加SDK依赖的第三方jar包</a></span><span class="md-toc-item md-toc-h2" data-ref="n27"><a class="md-toc-inner" href="#header-n27">2.3 配置应用工程的AndroidManifest.xml</a></span><span class="md-toc-item md-toc-h3" data-ref="n28"><a class="md-toc-inner" href="#header-n28">2.3.1 添加权限</a></span><span class="md-toc-item md-toc-h3" data-ref="n30"><a class="md-toc-inner" href="#header-n30">2.3.2 添加meta-data</a></span><span class="md-toc-item md-toc-h3" data-ref="n35"><a class="md-toc-inner" href="#header-n35">2.3.3 配置播放器</a></span><span class="md-toc-item md-toc-h2" data-ref="n38"><a class="md-toc-inner" href="#header-n38">2.4 Model字典</a></span><span class="md-toc-item md-toc-h2" data-ref="n40"><a class="md-toc-inner" href="#header-n40">2.5 so文件的相关问题</a></span><span class="md-toc-item md-toc-h3" data-ref="n41"><a class="md-toc-inner" href="#header-n41">2.5.1 关于libxmediaplayer.so、libxmediaplayerv7.so、libxmediaplayer_x.so放置的位置</a></span><span class="md-toc-item md-toc-h3" data-ref="n49"><a class="md-toc-inner" href="#header-n49">2.5.2 关于64位so的问题</a></span><span class="md-toc-item md-toc-h3" data-ref="n51"><a class="md-toc-inner" href="#header-n51">2.5.3 关于通过远程添加第三方库,并且库中含有so导致打包失败的问题</a></span><span class="md-toc-item md-toc-h3" data-ref="n54"><a class="md-toc-inner" href="#header-n54">2.5.4 so问题排查</a></span><span class="md-toc-item md-toc-h3" data-ref="n56"><a class="md-toc-inner" href="#header-n56">2.5.5 放置部分so</a></span><span class="md-toc-item md-toc-h2" data-ref="n62"><a class="md-toc-inner" href="#header-n62">2.6 混淆</a></span><span class="md-toc-item md-toc-h2" data-ref="n64"><a class="md-toc-inner" href="#header-n64">2.7 打开debug 模式</a></span><span class="md-toc-item md-toc-h1" data-ref="n66"><a class="md-toc-inner" href="#header-n66">3 编码接入详细介绍</a></span><span class="md-toc-item md-toc-h2" data-ref="n67"><a class="md-toc-inner" href="#header-n67">3.1 初始化接口（必接）</a></span><span class="md-toc-item md-toc-h3" data-ref="n68"><a class="md-toc-inner" href="#header-n68">3.1.1 设置app_secret(应用私钥)</a></span><span class="md-toc-item md-toc-h3" data-ref="n81"><a class="md-toc-inner" href="#header-n81">3.1.2 网络代理配置（可选）</a></span><span class="md-toc-item md-toc-h3" data-ref="n127"><a class="md-toc-inner" href="#header-n127">3.1.3 配置使用https进行访问</a></span><span class="md-toc-item md-toc-h2" data-ref="n136"><a class="md-toc-inner" href="#header-n136">3.2 点播数据接口</a></span><span class="md-toc-item md-toc-h3" data-ref="n137"><a class="md-toc-inner" href="#header-n137">3.2.1 获取喜马拉雅内容分类</a></span><span class="md-toc-item md-toc-h3" data-ref="n150"><a class="md-toc-inner" href="#header-n150">3.2.2 获取专辑标签或者声音标签</a></span><span class="md-toc-item md-toc-h3" data-ref="n177"><a class="md-toc-inner" href="#header-n177">3.2.3 根据分类和标签获取某个分类某个标签下的专辑列表（最火/最新/最多播放）</a></span><span class="md-toc-item md-toc-h3" data-ref="n219"><a class="md-toc-inner" href="#header-n219">3.2.4 专辑浏览，根据专辑ID获取专辑下的声音列表</a></span><span class="md-toc-item md-toc-h3" data-ref="n260"><a class="md-toc-inner" href="#header-n260">3.2.5 批量获取专辑列表</a></span><span class="md-toc-item md-toc-h3" data-ref="n284"><a class="md-toc-inner" href="#header-n284">3.2.6 根据专辑ID列表批获取量专辑更新提醒信息列表</a></span><span class="md-toc-item md-toc-h3" data-ref="n306"><a class="md-toc-inner" href="#header-n306">3.2.7 根据分类和标签获取热门声音列表</a></span><span class="md-toc-item md-toc-h3" data-ref="n347"><a class="md-toc-inner" href="#header-n347">3.2.8 批量获取声音列表</a></span><span class="md-toc-item md-toc-h3" data-ref="n371"><a class="md-toc-inner" href="#header-n371">3.2.9 根据上一次所听声音的id，获取此声音所在那一页的声音</a></span><span class="md-toc-item md-toc-h3" data-ref="n413"><a class="md-toc-inner" href="#header-n413">3.2.10 根据分类和标签获取某个分类某个标签下的专辑列表（最火/最新/最多播放） (<code>已过时</code>)</a></span><span class="md-toc-item md-toc-h3" data-ref="n458"><a class="md-toc-inner" href="#header-n458">3.2.11 根据分类和标签获取某个分类某个标签下的热门专辑列表 (<code>已过时</code>)</a></span><span class="md-toc-item md-toc-h3" data-ref="n494"><a class="md-toc-inner" href="#header-n494">3.2.12 获取某个分类下的元数据列表。</a></span><span class="md-toc-item md-toc-h3" data-ref="n520"><a class="md-toc-inner" href="#header-n520">3.2.13 获取某个分类的元数据属性键值组合下包含的热门专辑列表/最新专辑列表/最多播放专辑列表。</a></span><span class="md-toc-item md-toc-h2" data-ref="n565"><a class="md-toc-inner" href="#header-n565">3.3 直播数据接口</a></span><span class="md-toc-item md-toc-h3" data-ref="n566"><a class="md-toc-inner" href="#header-n566">3.3.1 获取直播省市列表</a></span><span class="md-toc-item md-toc-h3" data-ref="n579"><a class="md-toc-inner" href="#header-n579">3.3.2 获取直播电台</a></span><span class="md-toc-item md-toc-h3" data-ref="n615"><a class="md-toc-inner" href="#header-n615">3.3.3 获取直播电台某一天的节目排期表</a></span><span class="md-toc-item md-toc-h3" data-ref="n644"><a class="md-toc-inner" href="#header-n644">3.3.4 获取直播节目详情</a></span><span class="md-toc-item md-toc-h3" data-ref="n668"><a class="md-toc-inner" href="#header-n668">3.3.5 批量获取电台接口</a></span><span class="md-toc-item md-toc-h3" data-ref="n690"><a class="md-toc-inner" href="#header-n690">3.3.6 获取某省份城市列表。</a></span><span class="md-toc-item md-toc-h3" data-ref="n713"><a class="md-toc-inner" href="#header-n713">3.3.6 获取某个城市下的电台列表</a></span><span class="md-toc-item md-toc-h3" data-ref="n745"><a class="md-toc-inner" href="#header-n745">3.3.7 获取直播电台的分类。</a></span><span class="md-toc-item md-toc-h3" data-ref="n756"><a class="md-toc-inner" href="#header-n756">3.3.8 根据电台分类获取直播电台数据。</a></span><span class="md-toc-item md-toc-h2" data-ref="n788"><a class="md-toc-inner" href="#header-n788">3.4 榜单数据接口</a></span><span class="md-toc-item md-toc-h3" data-ref="n789"><a class="md-toc-inner" href="#header-n789">3.4.1 根据榜单类型获取榜单首页的榜单列表</a></span><span class="md-toc-item md-toc-h4" data-ref="n810"><a class="md-toc-inner" href="#header-n810">Rank</a></span><span class="md-toc-item md-toc-h3" data-ref="n879"><a class="md-toc-inner" href="#header-n879">3.4.2 根据rank_key获取某个榜单下的专辑列表</a></span><span class="md-toc-item md-toc-h3" data-ref="n911"><a class="md-toc-inner" href="#header-n911">3.4.3 根据rank_key获取某个榜单下的声音列表</a></span><span class="md-toc-item md-toc-h3" data-ref="n940"><a class="md-toc-inner" href="#header-n940">3.4.4 获取直播电台排行榜</a></span><span class="md-toc-item md-toc-h2" data-ref="n963"><a class="md-toc-inner" href="#header-n963">3.5 听单数据接口</a></span><span class="md-toc-item md-toc-h3" data-ref="n964"><a class="md-toc-inner" href="#header-n964">3.5.1 获取精品听单内容</a></span><span class="md-toc-item md-toc-h3" data-ref="n986"><a class="md-toc-inner" href="#header-n986">3.5.2 获取某个听单详情，每个听单包含听单简介信息和专辑或声音的列表</a></span><span class="md-toc-item md-toc-h2" data-ref="n1009"><a class="md-toc-inner" href="#header-n1009">3.6 焦点图数据接口</a></span><span class="md-toc-item md-toc-h3" data-ref="n1010"><a class="md-toc-inner" href="#header-n1010">3.6.1 获取榜单焦点图列表</a></span><span class="md-toc-item md-toc-h3" data-ref="n1032"><a class="md-toc-inner" href="#header-n1032">3.6.2 获取发现页推荐的焦点图列表</a></span><span class="md-toc-item md-toc-h3" data-ref="n1064"><a class="md-toc-inner" href="#header-n1064">3.6.3 获取分类推荐的焦点图列表 (已过时 请使用3.6.4)</a></span><span class="md-toc-item md-toc-h3" data-ref="n1106"><a class="md-toc-inner" href="#header-n1106">3.6.4 获取v2版本的分类推荐的焦点图列表。</a></span><span class="md-toc-item md-toc-h2" data-ref="n1156"><a class="md-toc-inner" href="#header-n1156">3.7 冷启动接口</a></span><span class="md-toc-item md-toc-h3" data-ref="n1157"><a class="md-toc-inner" href="#header-n1157">3.7.1 获取冷启动一级分类</a></span><span class="md-toc-item md-toc-h3" data-ref="n1168"><a class="md-toc-inner" href="#header-n1168">3.7.2 获取冷启动二级分类</a></span><span class="md-toc-item md-toc-h3" data-ref="n1179"><a class="md-toc-inner" href="#header-n1179">3.7.3 根据冷启动一级分类和冷启动二级分类获取相应类别下的冷启动标签列表</a></span><span class="md-toc-item md-toc-h3" data-ref="n1206"><a class="md-toc-inner" href="#header-n1206">3.7.4 提交用户感兴趣的冷启动标签</a></span><span class="md-toc-item md-toc-h3" data-ref="n1238"><a class="md-toc-inner" href="#header-n1238">3.7.5 获取用户提交的冷启动标签详情</a></span><span class="md-toc-item md-toc-h2" data-ref="n1249"><a class="md-toc-inner" href="#header-n1249">3.8 主播数据接口</a></span><span class="md-toc-item md-toc-h3" data-ref="n1250"><a class="md-toc-inner" href="#header-n1250">3.8.1 获取喜马拉雅主播分类</a></span><span class="md-toc-item md-toc-h3" data-ref="n1261"><a class="md-toc-inner" href="#header-n1261">3.8.2 获取某个分类下的主播列表</a></span><span class="md-toc-item md-toc-h3" data-ref="n1298"><a class="md-toc-inner" href="#header-n1298">3.8.3 获取主播的专辑列表</a></span><span class="md-toc-item md-toc-h3" data-ref="n1330"><a class="md-toc-inner" href="#header-n1330">3.8.4 获取某个主播的声音列表</a></span><span class="md-toc-item md-toc-h3" data-ref="n1363"><a class="md-toc-inner" href="#header-n1363">3.8.5 根据一批主播ID批量获取主播信息</a></span><span class="md-toc-item md-toc-h2" data-ref="n1386"><a class="md-toc-inner" href="#header-n1386">3.9 搜索接口</a></span><span class="md-toc-item md-toc-h3" data-ref="n1387"><a class="md-toc-inner" href="#header-n1387">3.9.1 搜索专辑</a></span><span class="md-toc-item md-toc-h3" data-ref="n1435"><a class="md-toc-inner" href="#header-n1435">3.9.2 搜索声音</a></span><span class="md-toc-item md-toc-h3" data-ref="n1481"><a class="md-toc-inner" href="#header-n1481">3.9.3 搜索直播</a></span><span class="md-toc-item md-toc-h3" data-ref="n1520"><a class="md-toc-inner" href="#header-n1520">3.9.4 获取最新热搜词</a></span><span class="md-toc-item md-toc-h3" data-ref="n1542"><a class="md-toc-inner" href="#header-n1542">3.9.5 获取某个关键词的联想词</a></span><span class="md-toc-item md-toc-h3" data-ref="n1564"><a class="md-toc-inner" href="#header-n1564">3.9.6 搜索主播</a></span><span class="md-toc-item md-toc-h3" data-ref="n1602"><a class="md-toc-inner" href="#header-n1602">3.9.7 获取指定数量直播，声音，专辑的内容。</a></span><span class="md-toc-item md-toc-h3" data-ref="n1636"><a class="md-toc-inner" href="#header-n1636">3.9.8 搜索专辑，支持的筛选条件包括专辑ID、标题、专辑所属主播ID或昵称、标签、是否付费、价格类型、分类ID或分类名等，并可指定排序字段。</a></span><span class="md-toc-item md-toc-h3" data-ref="n1719"><a class="md-toc-inner" href="#header-n1719">3.9.9 搜索声音，支持的筛选条件包括声音ID、标题、所属专辑ID、所属专辑标题、所属主播ID或昵称、标签、是否付费、分类ID或分类名等，并可指定排序字段。</a></span><span class="md-toc-item md-toc-h2" data-ref="n1807"><a class="md-toc-inner" href="#header-n1807">3.10 推荐接口</a></span><span class="md-toc-item md-toc-h3" data-ref="n1808"><a class="md-toc-inner" href="#header-n1808">3.10.1 获取运营人员在发现页配置的分类维度专辑推荐模块的列表</a></span><span class="md-toc-item md-toc-h3" data-ref="n1831"><a class="md-toc-inner" href="#header-n1831">3.10.2 获取运营人员为某个分类配置的标签维度专辑推荐模块列表</a></span><span class="md-toc-item md-toc-h3" data-ref="n1860"><a class="md-toc-inner" href="#header-n1860">3.10.3 获取某个专辑的相关推荐</a></span><span class="md-toc-item md-toc-h3" data-ref="n1882"><a class="md-toc-inner" href="#header-n1882">3.10.4 获取下载听模块的推荐下载专辑</a></span><span class="md-toc-item md-toc-h3" data-ref="n1909"><a class="md-toc-inner" href="#header-n1909">3.10.5 获取某个声音的相关推荐专辑</a></span><span class="md-toc-item md-toc-h3" data-ref="n1931"><a class="md-toc-inner" href="#header-n1931">3.10.6 获取猜你喜欢专辑</a></span><span class="md-toc-item md-toc-h2" data-ref="n1954"><a class="md-toc-inner" href="#header-n1954">3.12 定制化接口</a></span><span class="md-toc-item md-toc-h3" data-ref="n1955"><a class="md-toc-inner" href="#header-n1955">3.12.1 获取合作方自定制的专辑类听单</a></span><span class="md-toc-item md-toc-h3" data-ref="n2003"><a class="md-toc-inner" href="#header-n2003">3.12.2 获取合作方自定制的声音类听单。</a></span><span class="md-toc-item md-toc-h3" data-ref="n2051"><a class="md-toc-inner" href="#header-n2051">3.12.3 根据自定义专辑听单ID和分页参数获取自定义专辑听单内容详情，自定义专辑听单下可包含专辑或者自定义声音听单（见自运营内容网站）</a></span><span class="md-toc-item md-toc-h3" data-ref="n2109"><a class="md-toc-inner" href="#header-n2109">3.12.4 根据自定义声音听单ID和分页参数获取自定义声音听单内容详情</a></span><span class="md-toc-item md-toc-h3" data-ref="n2163"><a class="md-toc-inner" href="#header-n2163">3.12.5 根据搜索条件和分页参数，搜索所有声音听单下符合条件的声音列表</a></span><span class="md-toc-item md-toc-h3" data-ref="n2221"><a class="md-toc-inner" href="#header-n2221">3.12.6 根据声音ID和该声音所属声音听单ID获取声音详情</a></span><span class="md-toc-item md-toc-h3" data-ref="n2252"><a class="md-toc-inner" href="#header-n2252">3.12.7 根据搜索条件和分页参数，搜索所有专辑或声音听单，注意返回结果已去重。</a></span><span class="md-toc-item md-toc-h2" data-ref="n2330"><a class="md-toc-inner" href="#header-n2330">3.13 用户播放历史接口</a></span><span class="md-toc-item md-toc-h3" data-ref="n2331"><a class="md-toc-inner" href="#header-n2331">3.13.1 根据用户ID获取用户播放云历史记录</a></span><span class="md-toc-item md-toc-h3" data-ref="n2341"><a class="md-toc-inner" href="#header-n2341">3.13.2 用户上传播放云历史记录</a></span><span class="md-toc-item md-toc-h3" data-ref="n2400"><a class="md-toc-inner" href="#header-n2400">3.13.3 用户批量上传播放云历史记录</a></span><span class="md-toc-item md-toc-h3" data-ref="n2422"><a class="md-toc-inner" href="#header-n2422">3.13.4 用户批量删除播放云历史记录</a></span><span class="md-toc-item md-toc-h2" data-ref="n2444"><a class="md-toc-inner" href="#header-n2444">3.14 用户订阅接口</a></span><span class="md-toc-item md-toc-h3" data-ref="n2446"><a class="md-toc-inner" href="#header-n2446">3.14.1 获取喜马拉雅用户的动态更新的订阅专辑列表</a></span><span class="md-toc-item md-toc-h3" data-ref="n2473"><a class="md-toc-inner" href="#header-n2473">3.14.2 用户新增或取消已订阅专辑</a></span><span class="md-toc-item md-toc-h3" data-ref="n2500"><a class="md-toc-inner" href="#header-n2500">3.14.3 用户批量新增已订阅专辑</a></span><span class="md-toc-item md-toc-h2" data-ref="n2522"><a class="md-toc-inner" href="#header-n2522">3.15 喜马拉雅付费内容接口</a></span><span class="md-toc-item md-toc-h3" data-ref="n2523"><a class="md-toc-inner" href="#header-n2523">3.15.1 获取所有付费专辑</a></span><span class="md-toc-item md-toc-h3" data-ref="n2549"><a class="md-toc-inner" href="#header-n2549">3.15.2 获取付费精品分类下的标签（或者叫热词）列表</a></span><span class="md-toc-item md-toc-h3" data-ref="n2561"><a class="md-toc-inner" href="#header-n2561">3.15.3 根据付费精品分类下的标签（或者叫热词）获取热门付费专辑列表</a></span><span class="md-toc-item md-toc-h3" data-ref="n2592"><a class="md-toc-inner" href="#header-n2592">3.15.4 分页获取付费专辑下的声音列表（即分页浏览付费专辑下的声音列表）</a></span><span class="md-toc-item md-toc-h3" data-ref="n2633"><a class="md-toc-inner" href="#header-n2633">3.15.5 批量根据付费专辑ID获取付费专辑详情</a></span><span class="md-toc-item md-toc-h3" data-ref="n2654"><a class="md-toc-inner" href="#header-n2654">3.15.6 批量根据付费声音ID获取付费声音详情</a></span><span class="md-toc-item md-toc-h3" data-ref="n2675"><a class="md-toc-inner" href="#header-n2675">3.15.7 获取所有付费内容排行榜（付费专辑榜或付费声音榜）基础信息</a></span><span class="md-toc-item md-toc-h3" data-ref="n2685"><a class="md-toc-inner" href="#header-n2685">3.15.8 根据rank_key分页获取某个付费专辑排行榜下的付费专辑列表</a></span><span class="md-toc-item md-toc-h3" data-ref="n2716"><a class="md-toc-inner" href="#header-n2716">3.15.9 获取用户购买过的所有付费专辑</a></span><span class="md-toc-item md-toc-h3" data-ref="n2726"><a class="md-toc-inner" href="#header-n2726">3.15.10 根据用户ID和一批付费专辑ID获取用户对这批付费专辑的购买状态</a></span><span class="md-toc-item md-toc-h3" data-ref="n2749"><a class="md-toc-inner" href="#header-n2749">3.15.11 根据用户ID和一批付费声音ID获取用户对这批付费声音的购买状态</a></span><span class="md-toc-item md-toc-h3" data-ref="n2771"><a class="md-toc-inner" href="#header-n2771">3.15.12 根据关键词搜索付费专辑</a></span><span class="md-toc-item md-toc-h3" data-ref="n2802"><a class="md-toc-inner" href="#header-n2802">3.15.13 根据关键词搜索付费声音</a></span><span class="md-toc-item md-toc-h3" data-ref="n2832"><a class="md-toc-inner" href="#header-n2832">3.15.14 客户端下单购买</a></span><span class="md-toc-item md-toc-h4" data-ref="n2854"><a class="md-toc-inner" href="#header-n2854">3.15.14.1 客户端下单购买后播放地址更新</a></span><span class="md-toc-item md-toc-h3" data-ref="n2856"><a class="md-toc-inner" href="#header-n2856">3.15.15 第三方服务端调用下单接口然后使用SDK吊起购买页面</a></span><span class="md-toc-item md-toc-h3" data-ref="n2864"><a class="md-toc-inner" href="#header-n2864">3.15.16 部分试听声音,试听结束后回调</a></span><span class="md-toc-item md-toc-h3" data-ref="n2867"><a class="md-toc-inner" href="#header-n2867">3.15.17 根据专辑ID获取专辑下的所有声音ID列表</a></span><span class="md-toc-item md-toc-h3" data-ref="n2899"><a class="md-toc-inner" href="#header-n2899">3.15.18 检查是否有未支付的订单并取消订单</a></span><span class="md-toc-item md-toc-h3" data-ref="n2909"><a class="md-toc-inner" href="#header-n2909">3.15.19 取消订单</a></span><span class="md-toc-item md-toc-h3" data-ref="n2937"><a class="md-toc-inner" href="#header-n2937">3.15.20</a></span><span class="md-toc-item md-toc-h2" data-ref="n2963"><a class="md-toc-inner" href="#header-n2963">3.16 用户相关接口</a></span><span class="md-toc-item md-toc-h3" data-ref="n2964"><a class="md-toc-inner" href="#header-n2964">3.16.1 根据用户ID获取用户基本信息</a></span><span class="md-toc-item md-toc-h3" data-ref="n2970"><a class="md-toc-inner" href="#header-n2970">3.16.2 根据用户ID获取用户画像资料</a></span><span class="md-toc-item md-toc-h1" data-ref="n2976"><a class="md-toc-inner" href="#header-n2976">3.17 测试付费相关内容需要注意的事项</a></span><span class="md-toc-item md-toc-h2" data-ref="n2979"><a class="md-toc-inner" href="#header-n2979">3.18 服务端下单确单</a></span><span class="md-toc-item md-toc-h1" data-ref="n2982"><a class="md-toc-inner" href="#header-n2982">4 播放器说明</a></span><span class="md-toc-item md-toc-h2" data-ref="n2984"><a class="md-toc-inner" href="#header-n2984">4.1 播放器概述</a></span><span class="md-toc-item md-toc-h2" data-ref="n2986"><a class="md-toc-inner" href="#header-n2986">4.2 播放器环境搭建</a></span><span class="md-toc-item md-toc-h2" data-ref="n2989"><a class="md-toc-inner" href="#header-n2989">4.3 播放器状态介绍</a></span><span class="md-toc-item md-toc-h2" data-ref="n2992"><a class="md-toc-inner" href="#header-n2992">4.4 播放器初始化和释放</a></span><span class="md-toc-item md-toc-h2" data-ref="n2996"><a class="md-toc-inner" href="#header-n2996">4.5 通过播放器播放声音</a></span><span class="md-toc-item md-toc-h3" data-ref="n2998"><a class="md-toc-inner" href="#header-n2998">4.5.1 playLiveRadioForSDK函数源代码</a></span><span class="md-toc-item md-toc-h2" data-ref="n3002"><a class="md-toc-inner" href="#header-n3002">4.6 播放器控制</a></span><span class="md-toc-item md-toc-h2" data-ref="n3102"><a class="md-toc-inner" href="#header-n3102">4.7 播放器回调</a></span><span class="md-toc-item md-toc-h2" data-ref="n3168"><a class="md-toc-inner" href="#header-n3168">4.8 播放器通知栏使用</a></span><span class="md-toc-item md-toc-h2" data-ref="n3180"><a class="md-toc-inner" href="#header-n3180">4.9 拼接Track信息进行播放</a></span><span class="md-toc-item md-toc-h3" data-ref="n3181"><a class="md-toc-inner" href="#header-n3181">4.9.1 播放已经下载好的声音</a></span><span class="md-toc-item md-toc-h3" data-ref="n3184"><a class="md-toc-inner" href="#header-n3184">4.9.2 播放在线声音(声音资源是第三方的)</a></span><span class="md-toc-item md-toc-h3" data-ref="n3187"><a class="md-toc-inner" href="#header-n3187">4.9.3 播放在线声音(声音资源是喜马拉雅的)</a></span><span class="md-toc-item md-toc-h3" data-ref="n3190"><a class="md-toc-inner" href="#header-n3190">4.9.4 额外展示使用参数</a></span><span class="md-toc-item md-toc-h2" data-ref="n3195"><a class="md-toc-inner" href="#header-n3195">4.10 播放器初始化完成回调</a></span><span class="md-toc-item md-toc-h2" data-ref="n3199"><a class="md-toc-inner" href="#header-n3199">4.11 播放器加载播放音质策略</a></span><span class="md-toc-item md-toc-h2" data-ref="n3202"><a class="md-toc-inner" href="#header-n3202">4.12 不希望记住播放记录(即每次播放从头开始播放)</a></span><span class="md-toc-item md-toc-h2" data-ref="n3204"><a class="md-toc-inner" href="#header-n3204">4.13 关于贵方的智能硬件设备是x86平台的问题</a></span><span class="md-toc-item md-toc-h2" data-ref="n3207"><a class="md-toc-inner" href="#header-n3207">4.14 贵方同时使用了自己的播放器和我们的播放器,线控被占用的问题</a></span><span class="md-toc-item md-toc-h2" data-ref="n3210"><a class="md-toc-inner" href="#header-n3210">4.15 不希望SDK处理AudioFocus</a></span><span class="md-toc-item md-toc-h2" data-ref="n3212"><a class="md-toc-inner" href="#header-n3212">4.16 播放缓存设置缓存数量</a></span><span class="md-toc-item md-toc-h2" data-ref="n3214"><a class="md-toc-inner" href="#header-n3214">4.17 是否使用防劫持方案</a></span><span class="md-toc-item md-toc-h2" data-ref="n3216"><a class="md-toc-inner" href="#header-n3216">4.18 倍速播放</a></span><span class="md-toc-item md-toc-h2" data-ref="n3219"><a class="md-toc-inner" href="#header-n3219">4.19 定时关闭</a></span><span class="md-toc-item md-toc-h2" data-ref="n3222"><a class="md-toc-inner" href="#header-n3222">4.20 是否处理因为网络断开导致的不能播放问题</a></span><span class="md-toc-item md-toc-h1" data-ref="n3227"><a class="md-toc-inner" href="#header-n3227">5 错误处理</a></span><span class="md-toc-item md-toc-h2" data-ref="n3228"><a class="md-toc-inner" href="#header-n3228">5.1 HTTP响应码</a></span><span class="md-toc-item md-toc-h2" data-ref="n3272"><a class="md-toc-inner" href="#header-n3272">5.2 错误码</a></span><span class="md-toc-item md-toc-h1" data-ref="n3426"><a class="md-toc-inner" href="#header-n3426">6 音频下载功能</a></span><span class="md-toc-item md-toc-h2" data-ref="n3427"><a class="md-toc-inner" href="#header-n3427">6.1 概述</a></span><span class="md-toc-item md-toc-h2" data-ref="n3428"><a class="md-toc-inner" href="#header-n3428">6.2 接口</a></span><span class="md-toc-item md-toc-h3" data-ref="n3429"><a class="md-toc-inner" href="#header-n3429">6.2.1 初始化</a></span><span class="md-toc-item md-toc-h3" data-ref="n3432"><a class="md-toc-inner" href="#header-n3432">6.2.2 下载接口</a></span><span class="md-toc-item md-toc-h3" data-ref="n3446"><a class="md-toc-inner" href="#header-n3446">6.2.3 暂停下载接口</a></span><span class="md-toc-item md-toc-h3" data-ref="n3457"><a class="md-toc-inner" href="#header-n3457">6.2.4 恢复下载接口</a></span><span class="md-toc-item md-toc-h3" data-ref="n3468"><a class="md-toc-inner" href="#header-n3468">6.2.5 取消下载接口</a></span><span class="md-toc-item md-toc-h3" data-ref="n3479"><a class="md-toc-inner" href="#header-n3479">6.2.6 获取下载状态接口</a></span><span class="md-toc-item md-toc-h3" data-ref="n3493"><a class="md-toc-inner" href="#header-n3493">6.2.7 正在下载或已下载的音频列表</a></span><span class="md-toc-item md-toc-h3" data-ref="n3506"><a class="md-toc-inner" href="#header-n3506">6.2.8 清理下载接口</a></span><span class="md-toc-item md-toc-h3" data-ref="n3519"><a class="md-toc-inner" href="#header-n3519">6.2.9 获取下载文件已占用的磁盘空间</a></span><span class="md-toc-item md-toc-h3" data-ref="n3526"><a class="md-toc-inner" href="#header-n3526">6.2.10 是否有正在下载的任务</a></span><span class="md-toc-item md-toc-h3" data-ref="n3532"><a class="md-toc-inner" href="#header-n3532">6.2.11 设置网络代理</a></span><span class="md-toc-item md-toc-h3" data-ref="n3574"><a class="md-toc-inner" href="#header-n3574">6.2.12 释放</a></span><span class="md-toc-item md-toc-h3" data-ref="n3577"><a class="md-toc-inner" href="#header-n3577">6.2.13  更改保存的地址</a></span><span class="md-toc-item md-toc-h3" data-ref="n3581"><a class="md-toc-inner" href="#header-n3581">6.2.13 更改保存的地址 并转移已经下载,未下载,正在下载的音频</a></span><span class="md-toc-item md-toc-h3" data-ref="n3591"><a class="md-toc-inner" href="#header-n3591">6.2.14 更换顺序</a></span><span class="md-toc-item md-toc-h3" data-ref="n3601"><a class="md-toc-inner" href="#header-n3601">6.2.15 获得下载的音频根据album进行分组</a></span><span class="md-toc-item md-toc-h3" data-ref="n3610"><a class="md-toc-inner" href="#header-n3610">6.2.16 album里面是否有正在下载的track</a></span><span class="md-toc-item md-toc-h3" data-ref="n3619"><a class="md-toc-inner" href="#header-n3619">6.2.17 添加全局的添加下载的listener</a></span><span class="md-toc-item md-toc-h2" data-ref="n3627"><a class="md-toc-inner" href="#header-n3627">6.3 工具方法</a></span><span class="md-toc-item md-toc-h3" data-ref="n3628"><a class="md-toc-inner" href="#header-n3628">6.3.1 ComparatorUtil.java</a></span><span class="md-toc-item md-toc-h1" data-ref="n3668"><a class="md-toc-inner" href="#header-n3668">7 登录授权SDK</a></span><span class="md-toc-item md-toc-h2" data-ref="n3670"><a class="md-toc-inner" href="#header-n3670">登录流程简图</a></span><span class="md-toc-item md-toc-h2" data-ref="n3672"><a class="md-toc-inner" href="#header-n3672">7.1 manifest 需要声明OAuth2 Android  SDK中的 Activity：&lt;br&gt;</a></span><span class="md-toc-item md-toc-h2" data-ref="n3674"><a class="md-toc-inner" href="#header-n3674">7.2 使用回调确定是否有需要登录授权的情况</a></span><span class="md-toc-item md-toc-h2" data-ref="n3676"><a class="md-toc-inner" href="#header-n3676">7.3 调用登录授权接口</a></span><span class="md-toc-item md-toc-h2" data-ref="n3678"><a class="md-toc-inner" href="#header-n3678">7.4 将回调结果设置到SDK内(!!! 重要)</a></span><span class="md-toc-item md-toc-h2" data-ref="n3680"><a class="md-toc-inner" href="#header-n3680">7.5 二维码登录</a></span><span class="md-toc-item md-toc-h3" data-ref="n3681"><a class="md-toc-inner" href="#header-n3681">7.5.1 客户端请求获取二维码图片</a></span><span class="md-toc-item md-toc-h3" data-ref="n3699"><a class="md-toc-inner" href="#header-n3699">7.5.2 查询登录状态</a></span><span class="md-toc-item md-toc-h2" data-ref="n3724"><a class="md-toc-inner" href="#header-n3724">7.6 退出登录</a></span><span class="md-toc-item md-toc-h2" data-ref="n3734"><a class="md-toc-inner" href="#header-n3734">7.7 服务端实现 redirect_url (必须实现 重要!!!)</a></span><span class="md-toc-item md-toc-h2" data-ref="n3738"><a class="md-toc-inner" href="#header-n3738">7.8 第三方使用third_uid和third_token换取授权后的access_token</a></span><span class="md-toc-item md-toc-h1" data-ref="n3751"><a class="md-toc-inner" href="#header-n3751">8 SDK相关问题反馈</a></span></p></div><h1><a name='header-n10' class='md-header-anchor '></a>1 概述</h1><p>本文档面向Android开发者。
本文档用于指导开发者快速接入喜马拉雅SDK，本SDK为Android应用提供获取点播、直播内容等功能。</p><h4>
为了便于喜马拉雅对播放数据进行统计并进行个性化推荐，接入SDK时请尽量接入播放器逻辑。<br>
如果不接入播放器逻辑，请联系我方商务,否则我方有权暂停贵方接口
</h4><h1><a name='header-n13' class='md-header-anchor '></a>2 接入准备</h1><h2><a name='header-n14' class='md-header-anchor '></a>2.1 申请app_key、app_secret和pack_id</h2><p>在喜马拉雅开放平台前台网站申请创建应用以获取app_key、Papp_secret和pack_id，申请创建流程可以参考<a href='http://open.ximalaya.com/doc/18'>喜马拉雅开放平台接入流程</a></p><ul><li>app_key：开放平台应用公钥</li><li>app_secret：开放平台应用私钥，<strong>请务必加密存储，切勿泄露</strong></li><li>pack_id：客户端包名，对Android客户端是apk包名</li></ul><h2><a name='header-n23' class='md-header-anchor '></a>2.2 添加SDK依赖的第三方jar包</h2><p>SDK在实现的过程中，使用了某些第三方的jar包，贵方App集成SDK时，需要同时将以下jar包拷贝到项目的libs目录下，否则SDK不能正常运行。 里面的包以最新的sdk包内的jar为准</p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="html"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="html"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">- gson-XXX.jar //SDK在解析请求返回的JSON数据时用到</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">- okhttp-XXX.jar // SDK联网框架使用okhttp</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">- okio-XXX.jar // SDK联网框架使用okhttp</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 66px;"></div><div class="CodeMirror-gutters" style="display: none; height: 66px;"></div></div></div></pre><p>TingPhoneOpenSDK.jar 基础的包必须添加
XmDownload.jar 如果需要集成下载功能可以设置上去</p><h2><a name='header-n27' class='md-header-anchor '></a>2.3 配置应用工程的AndroidManifest.xml</h2><h3><a name='header-n28' class='md-header-anchor '></a>2.3.1 添加权限</h3><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="xml"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="xml"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">uses-permission</span> <span class="cm-attribute">android:name</span>=<span class="cm-string">"android.permission.INTERNET"</span> <span class="cm-tag cm-bracket">/&gt;</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">uses-permission</span> <span class="cm-attribute">android:name</span>=<span class="cm-string">"android.permission.WRITE_EXTERNAL_STORAGE"</span><span class="cm-tag cm-bracket">/&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">uses-permission</span> <span class="cm-attribute">android:name</span>=<span class="cm-string">"android.permission.ACCESS_WIFI_STATE"</span> <span class="cm-tag cm-bracket">/&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">uses-permission</span> <span class="cm-attribute">android:name</span>=<span class="cm-string">"android.permission.ACCESS_NETWORK_STATE"</span> <span class="cm-tag cm-bracket">/&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">uses-permission</span> <span class="cm-attribute">android:name</span>=<span class="cm-string">"android.permission.CHANGE_NETWORK_STATE"</span> <span class="cm-tag cm-bracket">/&gt;</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 110px;"></div><div class="CodeMirror-gutters" style="display: none; height: 110px;"></div></div></div></pre><h3><a name='header-n30' class='md-header-anchor '></a>2.3.2 添加meta-data</h3><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="xml"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="xml"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">meta-data</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-attribute">android:name</span>=<span class="cm-string">"app_key"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-attribute">android:value</span>=<span class="cm-string">"这里替换成你申请到的app_key"</span><span class="cm-tag cm-bracket">/&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">meta-data</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-attribute">android:name</span>=<span class="cm-string">"pack_id"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-attribute">android:value</span>=<span class="cm-string">"这里替换成你申请到的pack_id"</span><span class="cm-tag cm-bracket">/&gt;</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 132px;"></div><div class="CodeMirror-gutters" style="display: none; height: 132px;"></div></div></div></pre><p><strong>注意上面的app_key和pack_id的值需要替换。app_secret设置 参见3.1.1 </strong></p><p>tips:</p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="java"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="java"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><span><span>​</span>x</span></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">如果不希望在AndroidManifest</span> <span class="cm-variable">里面进行设置</span>,<span class="cm-variable">需要在Application中初始化CommonRequest</span> ,<span class="cm-variable">请按照如下代码进行设置</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">CommonRequest</span> <span class="cm-variable">mXimalaya</span> <span class="cm-operator">=</span> <span class="cm-variable">CommonRequest</span>.<span class="cm-variable">getInstanse</span>();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">mXimalaya</span>.<span class="cm-variable">setAppkey</span>(<span class="cm-variable">appKey</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">mXimalaya</span>.<span class="cm-variable">setPackid</span>(<span class="cm-variable">packId</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">mXimalaya</span>.<span class="cm-variable">init</span>(<span class="cm-keyword">this</span> ,<span class="cm-variable">appSecret</span>);</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 154px;"></div><div class="CodeMirror-gutters" style="display: none; height: 154px;"></div></div></div></pre><h3><a name='header-n35' class='md-header-anchor '></a>2.3.3 配置播放器</h3><p>见章节4</p><h2><a name='header-n38' class='md-header-anchor '></a>2.4 Model字典</h2><p>SDK请求接口的返回的数据Model描述见<strong>Model层.md</strong>。</p><h2><a name='header-n40' class='md-header-anchor '></a><font color="red">2.5 so文件的相关问题</font></h2><h3><a name='header-n41' class='md-header-anchor '></a>2.5.1 关于libxmediaplayer.so、libxmediaplayerv7.so、libxmediaplayer_x.so放置的位置</h3><ul><li>如果贵方没有其他第三方so文件，可以将这三个个文件都放置在armeabi中，程序会自动判断平台类型是x86还是armeabi或者armeabi-v7a</li><li>如果贵方同时有 armeabi 和 armeabi-v7a 文件夹则可以将 libxmediaplayer.so和libxmediaplayer_x.so放置到armeabi文件夹 ,libxmediaplayerv7.so和libxmediaplayer_x.so 放置到armeabi-v7a文件夹</li><li>如果贵方同时有 armeabi 和 armeabi-v7a 和 x86 文件夹，可以把 libxmediaplayer.so libxmediaplayerv7.so 放到armabi 和armeabi-v7a, 在x86文件夹下放入libxmediaplayer_x.so (<strong>不要重命名</strong>)</li></ul><h3><a name='header-n49' class='md-header-anchor '></a>2.5.2 关于64位so的问题</h3><p>如果贵方中有arm64的文件夹可以将其删除掉(有其他第三方的so也可以删除掉因为armeabi 是兼容arm64的)
如果贵方坚持需要64位so 可以将SDK中arm64-v8a 文件夹下的so放到贵方的arm64-v8a</p><h3><a name='header-n51' class='md-header-anchor '></a>2.5.3 关于通过远程添加第三方库,并且库中含有so导致打包失败的问题</h3><p>在build.gradle 的android栏中添加如下代码</p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="java"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="java"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">android</span> {</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  ...</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">productFlavors</span>{</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">arm</span>{</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">ndk</span>{</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">abiFilters</span> &nbsp;<span class="cm-string">"armeabi"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 220px;"></div><div class="CodeMirror-gutters" style="display: none; height: 220px;"></div></div></div></pre><h3><a name='header-n54' class='md-header-anchor '></a>2.5.4 so问题排查</h3><p>在gradle中是否添加了so的加载路径
如果按照上面的操作没有解决问题可以将打出的包重命名为.zip 然后查看libs文件夹 看是否是否还有其他的so
so很重要的放置原则就是每个版本文件夹的so的个数要一样(我们的so放置做过优化,只要符合上面我们的so的放置规则,就不用按照此规则check我们的so)</p><h3><a name='header-n56' class='md-header-anchor '></a>2.5.5 放置部分so</h3><ul><li>如果不需要倍速播放功能不用添加libsoundtouch.so</li><li>如果没有接入付费内容可以 不用导入libxmopendatacrypto.so 和 libmediadatacryto.so</li></ul><h2><a name='header-n62' class='md-header-anchor '></a>2.6 混淆</h2><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="java" style="page-break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="java"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">-</span><span class="cm-variable">dontwarn</span> <span class="cm-variable">okio</span>.<span class="cm-operator">**</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">-</span><span class="cm-variable">keep</span> <span class="cm-keyword">class</span> <span class="cm-def">okio</span>.<span class="cm-operator">**</span> { <span class="cm-operator">*</span>;}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">-</span><span class="cm-variable">dontwarn</span> <span class="cm-variable">okhttp3</span>.<span class="cm-operator">**</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">-</span><span class="cm-variable">keep</span> <span class="cm-keyword">class</span> <span class="cm-def">okhttp3</span>.<span class="cm-operator">**</span> { <span class="cm-operator">*</span>;}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">-</span><span class="cm-variable">dontwarn</span> <span class="cm-variable">com</span>.<span class="cm-variable">google</span>.<span class="cm-variable">gson</span>.<span class="cm-operator">**</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">-</span><span class="cm-variable">keep</span> <span class="cm-keyword">class</span> <span class="cm-def">com</span>.<span class="cm-variable">google</span>.<span class="cm-variable">gson</span>.<span class="cm-operator">**</span> { <span class="cm-operator">*</span>;}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">-</span><span class="cm-variable">dontwarn</span> <span class="cm-variable">android</span>.<span class="cm-variable">support</span>.<span class="cm-operator">**</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">-</span><span class="cm-variable">keep</span> <span class="cm-keyword">class</span> <span class="cm-def">android</span>.<span class="cm-variable">support</span>.<span class="cm-operator">**</span> { <span class="cm-operator">*</span>;}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">-</span><span class="cm-variable">dontwarn</span> <span class="cm-variable">com</span>.<span class="cm-variable">ximalaya</span>.<span class="cm-variable">ting</span>.<span class="cm-variable">android</span>.<span class="cm-variable">player</span>.<span class="cm-operator">**</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">-</span><span class="cm-variable">keep</span> <span class="cm-keyword">class</span> <span class="cm-def">com</span>.<span class="cm-variable">ximalaya</span>.<span class="cm-variable">ting</span>.<span class="cm-variable">android</span>.<span class="cm-variable">player</span>.<span class="cm-operator">**</span> { <span class="cm-operator">*</span>;}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">-</span><span class="cm-variable">dontwarn</span> <span class="cm-variable">com</span>.<span class="cm-variable">ximalaya</span>.<span class="cm-variable">ting</span>.<span class="cm-variable">android</span>.<span class="cm-variable">opensdk</span>.<span class="cm-operator">**</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">-</span><span class="cm-variable">keep</span> <span class="cm-keyword">interface</span> <span class="cm-def">com</span>.<span class="cm-variable">ximalaya</span>.<span class="cm-variable">ting</span>.<span class="cm-variable">android</span>.<span class="cm-variable">opensdk</span>.<span class="cm-operator">**</span> {<span class="cm-operator">*</span>;}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">-</span><span class="cm-variable">keep</span> <span class="cm-keyword">class</span> <span class="cm-def">com</span>.<span class="cm-variable">ximalaya</span>.<span class="cm-variable">ting</span>.<span class="cm-variable">android</span>.<span class="cm-variable">opensdk</span>.<span class="cm-operator">**</span> { <span class="cm-operator">*</span>; }</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 396px;"></div><div class="CodeMirror-gutters" style="display: none; height: 396px;"></div></div></div></pre><h2><a name='header-n64' class='md-header-anchor '></a>2.7 打开debug 模式</h2><p>ConstantsOpenSdk.isDebug = true;</p><h1><a name='header-n66' class='md-header-anchor '></a>3 编码接入详细介绍</h1><h2><a name='header-n67' class='md-header-anchor '></a>3.1 初始化接口（必接）</h2><h3><a name='header-n68' class='md-header-anchor '></a>3.1.1 设置app_secret(应用私钥)</h3><p><strong>接口签名：</strong></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="java"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="java"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">public</span> <span class="cm-variable-3">void</span> <span class="cm-def">init</span>(<span class="cm-variable">Context</span> <span class="cm-variable">context</span>, <span class="cm-variable-3">String</span> <span class="cm-variable">appsecret</span>)</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 22px;"></div><div class="CodeMirror-gutters" style="display: none; height: 22px;"></div></div></div></pre><p><strong>接口说明：</strong></p><p>用于初始化SDK(<code>以下无特殊说明 SDK 代表的是Ximalaya Android SDK</code>)，在使用SDK接口之前必须调用一次该方法，否则SDK处于未初始化状态，无法使用其他接口。</p><p><strong>参数说明：</strong></p><ul><li>context：上下文对象</li><li>appsecret：申请的应用私钥</li></ul><p><strong>参考代码：</strong></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="java"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="java"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">CommonRequest</span>.<span class="cm-variable">getInstanse</span>().<span class="cm-variable">init</span>(<span class="cm-variable">context</span>, <span class="cm-variable">appSecret</span>);</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 22px;"></div><div class="CodeMirror-gutters" style="display: none; height: 22px;"></div></div></div></pre><h3><a name='header-n81' class='md-header-anchor '></a>3.1.2 网络代理配置（可选）</h3><p><strong>接口签名：</strong></p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n83" mdtype="fences">public void setHttpConfig(Config config)
</pre><p><strong>接口说明：</strong></p><p>用于设置SDK联网配置。当不需要网络代理时，设置为null即可。</p><p><strong>参数说明：</strong></p><p>Config是SDK联网配置，Config的所有成员变量如下：</p><figure><table><thead><tr><th>参数名</th><th>参数类型</th><th>参数说明</th></tr></thead><tbody><tr><td>useProxy</td><td>Boolean</td><td>使用代理开关</td></tr><tr><td>proxyHost</td><td>String</td><td>代理服务器ip地址</td></tr><tr><td>proxyPort</td><td>Int</td><td>代理服务器端口</td></tr><tr><td>authorization</td><td>String</td><td>代理服务器授权信息</td></tr><tr><td>useCache</td><td>Boolean</td><td>使用缓存开关</td></tr><tr><td>connectionTimeOut</td><td>Int</td><td>连接超时</td></tr><tr><td>readTimeOut</td><td>Int</td><td>读取超时</td></tr><tr><td>property</td><td>Map&lt;String, String&gt;</td><td>请求头</td></tr></tbody></table></figure><p><strong>参考代码：</strong></p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n126" mdtype="fences">Config config = newConfig();
config.useProxy = true; // 若想使用代理，必须配置此项为true，否则代理配置被忽略
config.proxyHost = "192.168.3.1";
config.proxyPort = 1080;
config.connectionTimeOut = 3000;
config.readTimeOut = 3000;
CommonRequest.getInstanse().setHttpConfig(config);
</pre><h3><a name='header-n127' class='md-header-anchor '></a>3.1.3 配置使用https进行访问</h3><ul><li>打开https 请求设置</li></ul><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n131" mdtype="fences">CommonRequest.getInstanse().setUseHttps(true);

下面这个host不支持使用https进行访问
adse.ximalaya.com
</pre><ul><li>设置不使用https的请求</li></ul><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n135" mdtype="fences">CommonRequest.getInstanse().mNoSupportHttps.add("http://www.baidu.com/request")
</pre><h2><a name='header-n136' class='md-header-anchor '></a>3.2 点播数据接口</h2><h3><a name='header-n137' class='md-header-anchor '></a>3.2.1 获取喜马拉雅内容分类</h3><p><strong>接口签名：</strong></p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n139" mdtype="fences">public static void getCategories(final Map&lt;String,String&gt; specificParams,
    final IDataCallBack&lt;CategoryList&gt; callback)
</pre><p><strong>接口说明：</strong></p><p>此接口用于获取点播资源的内容分类，如：“有声小说”、“相声评书”等。</p><p><strong>参数说明：</strong></p><ul><li>specificParams：对于本接口设置为null或者空Map对象</li><li>callback：回调接口，成功则返回CategoryList（字段描述见<strong>Model层.md</strong>）对象，失败则返回错误原因</li></ul><p><strong>参考代码：</strong></p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n149" mdtype="fences">Map&lt;String, String&gt; map = new HashMap&lt;String, String&gt;();
CommonRequest.getCategories(map, newIDataCallBack&lt;CategoryList&gt;() {
	@Override
	public void onSuccess(CategoryList object) {
	}

	@Override
	public void onError(int code, String message) {
	}
});
</pre><h3><a name='header-n150' class='md-header-anchor '></a>3.2.2 获取专辑标签或者声音标签</h3><p><strong>接口签名：</strong></p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n152" mdtype="fences">public static void getTags(Map&lt;String, String&gt; specificParams,
        final IDataCallBack&lt;TagList&gt; callback)
</pre><p><strong>参数说明</strong></p><ul><li><p>specificParams：字段介绍如下</p><figure><table><thead><tr><th>字段名</th><th>类型</th><th>必填</th><th>描述</th></tr></thead><tbody><tr><td>category_id</td><td>Int</td><td>是</td><td>分类ID，指定分类，为0时表示热门分类</td></tr><tr><td>type</td><td>Int</td><td>是</td><td>指定查询的是专辑标签还是声音标签，0-专辑标签，1-声音标签</td></tr></tbody></table></figure></li><li><p>callback：回调接口，成功则返回TagList（字段描述见<strong>Model层.md</strong>）对象，失败则返回错误原因。</p></li></ul><p><strong>参考代码：</strong></p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n176" mdtype="fences">Map&lt;String, String&gt; map = new HashMap&lt;String, String&gt;();
map.put(DTransferConstants.CATEGORY_ID, categoryId);
map.put(DTransferConstants.TYPE, 0);
CommonRequest.getTags(map, new IDataCallBack&lt;TagList&gt;());
</pre><h3><a name='header-n177' class='md-header-anchor '></a>3.2.3 根据分类和标签获取某个分类某个标签下的专辑列表（最火/最新/最多播放）</h3><p><strong>接口签名：</strong></p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n179" mdtype="fences">public static void getAlbumList(Map&lt;String, String&gt; specificParams, final IDataCallBack&lt;AlbumList&gt; callback)
</pre><p><strong>参数说明</strong></p><ul><li><p>pecificParams: 字段介绍如下</p><figure><table><thead><tr><th>字段名</th><th>类型</th><th>必填</th><th>描述</th></tr></thead><tbody><tr><td>category_id</td><td>Int</td><td>是</td><td>分类ID，指定分类，为0时表示热门分类</td></tr><tr><td>tag_name</td><td>String</td><td>否</td><td>分类下对应的专辑标签，不填则为热门分类</td></tr><tr><td>calc_dimension</td><td>Int</td><td>是</td><td>计算维度，现支持最火（1），最新（2），经典或播放最多（3）</td></tr><tr><td>page</td><td>Int</td><td>否</td><td>返回第几页，必须大于等于1，不填默认为1</td></tr><tr><td>count</td><td>Int</td><td>否</td><td>每页多少条，默认20，最多不超过200</td></tr></tbody></table></figure></li><li><p>callback:回调接口，成功则返回AlbumList对象，失败则返回错误原因</p></li></ul><p><strong>参考代码：</strong></p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n218" mdtype="fences">Map&lt;String ,String&gt; map = new HashMap&lt;String, String&gt;();
map.put(DTransferConstants.CATEGORY_ID ,"0");
map.put(DTransferConstants.CALC_DIMENSION ,"1");
CommonRequest.getAlbumList(map, new IDataCallBack&lt;AlbumList&gt;());
</pre><h3><a name='header-n219' class='md-header-anchor '></a>3.2.4 专辑浏览，根据专辑ID获取专辑下的声音列表</h3><p><strong>接口签名：</strong></p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n221" mdtype="fences">public static void getTracks(Map&lt;String, String&gt; specificParams,
		final IDataCallBack&lt;TrackList&gt; callback)
</pre><p><strong>接口说明：</strong></p><p>此接口用于返回专辑下的声音列表</p><p><strong>参数说明：</strong></p><ul><li><p>specificParams：字段介绍如下</p><figure><table><thead><tr><th>字段名</th><th>类型</th><th>必填</th><th>描述</th></tr></thead><tbody><tr><td>album_id</td><td>Int</td><td>是</td><td>专辑ID</td></tr><tr><td>sort</td><td>String</td><td>否</td><td>sort<span>	</span>String<span>	</span>否<span>	</span>&quot;asc&quot;表示喜马拉雅正序，&quot;desc&quot;表示喜马拉雅倒序，&quot;time_asc&quot;表示时间升序，&quot;time_desc&quot;表示时间降序，默认为&quot;asc&quot;</td></tr><tr><td>page</td><td>Int</td><td>否</td><td>当前第几页，不填默认为1</td></tr><tr><td>count</td><td>Int</td><td>否</td><td>每页多少条，默认20，最多不超过200</td></tr></tbody></table></figure></li><li><p>callback：回调接口，成功则返回TrackList（字段描述见<strong>Model层.md</strong>）对象，失败则返回错误原因。</p></li></ul><p><strong>参考代码</strong></p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n257" mdtype="fences">Map&lt;String, String&gt; map = new HashMap&lt;String, String&gt;();
map.put(DTransferConstants.ALBUM_ID, mAlbumId);
map.put(DTransferConstants.SORT, "asc");
map.put(DTransferConstants.PAGE, mPage);
CommonRequest.getTracks(map, new IDataCallBack&lt;TrackList&gt;();
</pre><p>注意：如果要改变返回数据的每页大小，可以通过如下接口设置,此接口是全局性接口 ,凡是设置需要设置count的地方都可以使用该方法进行设置,参数设置的count优先级比此方法的高</p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n259" mdtype="fences">CommonRequest.getInstanse().setDefaultPagesize(int size)
</pre><h3><a name='header-n260' class='md-header-anchor '></a>3.2.5 批量获取专辑列表</h3><p><strong>接口签名：</strong></p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n262" mdtype="fences">public static void getBatch(Map&lt;String, String&gt; specificParams,
			final IDataCallBack&lt;BatchAlbumList&gt; callback)
</pre><p><strong>接口说明：</strong></p><p>此接口用于批量返回专辑列表</p><p><strong>参数说明：</strong></p><ul><li><p>specificParams：字段介绍如下</p><figure><table><thead><tr><th>字段名</th><th>类型</th><th>必填</th><th>描述</th></tr></thead><tbody><tr><td>ids</td><td>String</td><td>是</td><td>专辑ID列表，用英文逗号分隔，比如&quot;1000,1010&quot;  最大ID数量为200个，超过200的ID将忽略</td></tr></tbody></table></figure></li><li><p>callback：回调接口，成功则返回BatchAlbumList（字段描述见<strong>Model层.md</strong>）对象，失败则返回错误原因。</p></li></ul><p><strong>参考代码</strong></p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n283" mdtype="fences">String album_ids = "1000,1010";
Map&lt;String, String&gt; map = new HashMap&lt;String, String&gt;();
map.put(DTransferConstants.ALBUM_IDS, album_ids);
CommonRequest.getBatch(map, new IDataCallBack&lt;BatchAlbumList&gt;());
</pre><h3><a name='header-n284' class='md-header-anchor '></a>3.2.6 根据专辑ID列表批获取量专辑更新提醒信息列表</h3><p><strong>接口签名：</strong></p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n286" mdtype="fences">public static void getUpdateBatch(Map&lt;String, String&gt; specificParams,
    final IDataCallBack&lt;UpdateBatchList&gt; callback)
</pre><p><strong>参数说明：</strong></p><ul><li><p>specificParams：字段介绍如下</p><figure><table><thead><tr><th>字段名</th><th>类型</th><th>必填</th><th>描述</th></tr></thead><tbody><tr><td>ids</td><td>string</td><td>是</td><td>专辑ID列表</td></tr></tbody></table></figure></li><li><p>callback：回调接口，成功则返回UpdateBatchList（字段描述见<strong>Model层.md</strong>）对象，失败则返回错误原因</p></li></ul><p><strong>参考代码</strong></p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n305" mdtype="fences">String album_ids = "albumid1,albumid2,albumid3…";
Map&lt;String, String&gt; map = new HashMap&lt;String, String&gt;();
map.put(DTransferConstants.ALBUM_IDS, album_ids);
CommonRequest.getUpdateBatch(map, new IDataCallBack&lt;UpdateBatchList&gt;());
</pre><h3><a name='header-n306' class='md-header-anchor '></a>3.2.7 根据分类和标签获取热门声音列表</h3><p><strong>接口签名：</strong></p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n308" mdtype="fences">public void getHotTracks(final Map&lt;String, Object&gt; specificParams,
		final IDataCallBack&lt;TrackHotList&gt; callback)
</pre><p><strong>接口说明：</strong></p><p>此接口用于获取某个分类某个声音下的热门声音列表</p><p><strong>参数说明：</strong></p><ul><li><p>specificParams：字段介绍如下</p><figure><table><thead><tr><th>字段名</th><th>类型</th><th>必填</th><th>描述</th></tr></thead><tbody><tr><td>category_id</td><td>Int</td><td>是</td><td>分类ID，指定分类</td></tr><tr><td>tag_name</td><td>String</td><td>否</td><td>分类下对应声音标签，不填则为热门分类</td></tr><tr><td>page</td><td>Int</td><td>否</td><td>返回第几页，必须大于等于1，不填默认为1</td></tr><tr><td>count</td><td>Int</td><td>否</td><td>每页多少条，默认20，最多不超过200</td></tr></tbody></table></figure></li><li><p>callback：回调接口，成功则返回TrackHotList（字段描述见<strong>Model层.md</strong>）对象，失败则返回错误原因。</p></li></ul><p><strong>参考代码</strong></p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n344" mdtype="fences">Map&lt;String, String&gt;map = new HashMap&lt;String, String&gt;();
map.put(DTransferConstants.CATEGORY_ID, mCategoryId);
map.put(DTransferConstants.TAG_NAME, mTagName);
map.put(DTransferConstants.PAGE, mPageNum);
CommonRequest.getHotTracks(map, newIDataCallBack&lt;TrackHotList&gt;());
</pre><p>注意：对于返回的每页的条数，可以通过如下接口设置,此接口是全局性接口 ,凡是设置需要设置count的地方都可以使用该方法进行设置,参数设置的count优先级比此方法的高</p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n346" mdtype="fences">CommonRequest.getInstanse().setDefaultPagesize(int size)
</pre><h3><a name='header-n347' class='md-header-anchor '></a>3.2.8 批量获取声音列表</h3><p><strong>接口签名：</strong></p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n349" mdtype="fences">public static void getBatchTracks(Map&lt;String,String&gt; specificParams,
    final IDataCallBack&lt;BatchTrackList&gt; callback)
</pre><p><strong>接口说明：</strong></p><p>此接口用于批量获取声音</p><p><strong>参数说明：</strong></p><ul><li><p>specificParams：字段介绍如下</p><figure><table><thead><tr><th>字段名</th><th>类型</th><th>必填</th><th>描述</th></tr></thead><tbody><tr><td>ids</td><td>String</td><td>是</td><td>声音ID列表  最大ID数量为200个，超过200的ID将忽略</td></tr></tbody></table></figure></li><li><p>callback：回调接口，成功则返回BatchTrackList（字段描述见<strong>Model层.md</strong>）对象，失败则返回错误原因。</p></li></ul><p><strong>参考代码</strong></p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n370" mdtype="fences">String track_ids = "替换成用英文逗号分隔的声音ID";
Map&lt;String, String&gt; map = new HashMap&lt;String, String&gt;();
map.put(DTransferConstants.TRACK_IDS, track_ids);
CommonRequest.getBatchTracks(map, newIDataCallBack&lt;BatchTrackList&gt;()
</pre><h3><a name='header-n371' class='md-header-anchor '></a>3.2.9 根据上一次所听声音的id，获取此声音所在那一页的声音</h3><p><strong>接口签名：</strong></p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n373" mdtype="fences">public static void getLastPlayTracks(Map&lt;String,String&gt; specificParams,
    final IDataCallBack&lt;LastPlayTrackList&gt; callback)
</pre><p><strong>参数说明：</strong></p><ul><li><p>specificParams：字段介绍如下</p><figure><table><thead><tr><th>字段名</th><th>类型</th><th>必填</th><th>描述</th></tr></thead><tbody><tr><td>album_id</td><td>Long</td><td>是</td><td>专辑id</td></tr><tr><td>track_id</td><td>Long</td><td>是</td><td>声音id</td></tr><tr><td>count</td><td>int</td><td>否</td><td>每页大小，范围为[1,200]，默认为20</td></tr><tr><td>sort</td><td>String</td><td>否</td><td>返回结果排序方式： &quot;asc&quot; - 喜马拉雅正序，&quot;desc&quot; - 喜马拉雅倒序，默认为&quot;asc&quot;</td></tr><tr><td>contains_paid</td><td>bool</td><td>否</td><td>是否是付费声音 (如果是付费相关的专辑调用此函数需要设置contain_paid 为true)</td></tr></tbody></table></figure></li><li><p>callback：回调接口，成功则返回LastPlayTrackList（字段描述见<strong>Model层.md</strong>）对象，失败则返回错误原因</p></li></ul><p><strong>参考代码：</strong></p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n412" mdtype="fences">Map&lt;String, String&gt; map = new HashMap&lt;String, String&gt;();
map.put(DTransferConstants.ALBUM_ID, album_id);
map.put(DTransferConstants.TRACK_ID, track_id);
CommonRequest.getLastPlayTracks(map,
    new IDataCallBack&lt;LastPlayTrackList&gt;());
</pre><h3><a name='header-n413' class='md-header-anchor '></a>3.2.10 根据分类和标签获取某个分类某个标签下的专辑列表（最火/最新/最多播放） (<code>已过时</code>)</h3><p><strong>接口签名：</strong></p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n415" mdtype="fences">public static void getUpToDateAlbums(Map&lt;String, String&gt; specificParams, final IDataCallBack&lt;AlbumList&gt; callback)
</pre><p><strong>参数说明</strong></p><ul><li><p>pecificParams: 字段介绍如下</p><figure><table><thead><tr><th>字段名</th><th>类型</th><th>必填</th><th>描述</th></tr></thead><tbody><tr><td>category_id</td><td>Int</td><td>是</td><td>分类ID，指定分类，为0时表示热门分类</td></tr><tr><td>tag_name</td><td>String</td><td>否</td><td>分类下对应的专辑标签，不填则为热门分类</td></tr><tr><td>calc_dimension</td><td>Int</td><td>是</td><td>计算维度，现支持最火（1），最新（2），经典或播放最多（3）</td></tr><tr><td>page</td><td>Int</td><td>否</td><td>返回第几页，必须大于等于1，不填默认为1</td></tr><tr><td>count</td><td>Int</td><td>否</td><td>每页多少条，默认20，最多不超过200</td></tr></tbody></table></figure></li></ul><ul><li>callback:回调接口，成功则返回AlbumList对象，失败则返回错误原因</li></ul><p><strong>参考代码：</strong></p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n456" mdtype="fences">CommonRequest.getUpToDateAlbums(Map&lt;String, String&gt; specificParams, new IDataCallBack&lt;AlbumList&gt;());
</pre><h3><a name='header-n458' class='md-header-anchor '></a>3.2.11 根据分类和标签获取某个分类某个标签下的热门专辑列表 (<code>已过时</code>)</h3><p><strong>接口签名：</strong></p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n460" mdtype="fences">public static void getAlbums(Map&lt;String, String&gt; specificParams,
			final IDataCallBack&lt;AlbumList&gt; callback)
</pre><p><strong>接口说明：</strong></p><p>接口用于返回热门专辑列表</p><p><strong>参数说明：</strong></p><ul><li><p>specificParams：字段介绍如下</p><figure><table><thead><tr><th>字段名</th><th>类型</th><th>必填</th><th>描述</th></tr></thead><tbody><tr><td>category_id</td><td>Int</td><td>是</td><td>分类ID，指定分类</td></tr><tr><td>tag_name</td><td>String</td><td>否</td><td>分类下对应专辑标签，不填则为热门分类</td></tr><tr><td>page</td><td>Int</td><td>否</td><td>返回第几页，必须大于等于1，不填默认为1</td></tr></tbody></table></figure></li><li><p>callback：回调接口，成功则返回AlbumList（字段描述见<strong>Model层.md</strong>）对象，失败则返回错误原因。</p></li></ul><p><strong>参考代码</strong></p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n491" mdtype="fences">Map&lt;String, String&gt; map = new HashMap&lt;String, String&gt;();
map.put(DTransferConstants.CATEGORY_ID, mCategoryId);
map.put(DTransferConstants.TAG_NAME, mTagName);
map.put(DTransferConstants.PAGE, mPageNum);
CommonRequest.getAlbums(map, new IDataCallBack&lt;AlbumList&gt;());
</pre><p>注意：如果要改变返回数据的每页大小，可以通过如下接口设置,此接口是全局性接口 ,凡是设置需要设置count的地方都可以使用该方法进行设置,参数设置的count优先级比此方法的高</p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n493" mdtype="fences">CommonRequest.getInstanse().setDefaultPagesize(int size)
</pre><h3><a name='header-n494' class='md-header-anchor '></a>3.2.12 获取某个分类下的元数据列表。</h3><p><strong>接口签名：</strong></p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n496" mdtype="fences">public static void getMetadataList(Map&lt;String, String&gt; specificParams,
			final IDataCallBack&lt;MetaDataList&gt; callback)
</pre><p><strong>接口说明：</strong></p><p>获取某个分类下的元数据列表。</p><p><strong>参数说明：</strong></p><ul><li><p>specificParams：字段介绍如下</p><figure><table><thead><tr><th>字段名</th><th>类型</th><th>必填</th><th>描述</th></tr></thead><tbody><tr><td>category_id</td><td>Int</td><td>是</td><td>分类ID，指定分类</td></tr></tbody></table></figure></li><li><p>callback：回调接口，成功则返回MetaDataList（字段描述见<strong>Model层.md</strong>）对象，失败则返回错误原因。</p></li></ul><p><strong>参考代码</strong></p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n517" mdtype="fences">Map&lt;String, String&gt; map = new HashMap&lt;String, String&gt;();
map.put(DTransferConstants.CATEGORY_ID, mCategoryId);
CommonRequest.getMetadataList(map, new IDataCallBack&lt;MetaDataList&gt;());
</pre><p><strong>实例</strong></p><p>对应喜马拉雅如下功能：
打开喜马拉雅进入首页，选择分类Tab，然后点击儿童分类，再选择全部出现如下
<img src='http://oqcdh3vzq.bkt.clouddn.com/18-6-27/4418028.jpg' alt='点击' referrerPolicy='no-referrer' /></p><h3><a name='header-n520' class='md-header-anchor '></a>3.2.13 获取某个分类的元数据属性键值组合下包含的热门专辑列表/最新专辑列表/最多播放专辑列表。</h3><p><strong>接口签名：</strong></p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n522" mdtype="fences">public static void getMetadataAlbumList(Map&lt;String, String&gt; specificParams,
			final IDataCallBack&lt;AlbumList&gt; callback)
</pre><p><strong>接口说明：</strong></p><p>获取某个分类的元数据属性键值组合下包含的热门专辑列表/最新专辑列表/最多播放专辑列表。</p><p><strong>参数说明：</strong></p><ul><li><p>specificParams：字段介绍如下</p><figure><table><thead><tr><th>字段名</th><th>类型</th><th>必填</th><th>描述</th></tr></thead><tbody><tr><td>category_id</td><td>Int</td><td>是</td><td>分类ID，指定分类，为0时表示热门分类</td></tr><tr><td>metadata_attributes</td><td>String</td><td>否</td><td>元数据属性列表：在/metadata/list接口得到的结果中，取不同元数据属性的attr_key和atrr_value组成任意个数的key-value键值，格式如：attr_key1:attr_value1;attr_key2:attr_value2;attr_key3:attr_value3</td></tr><tr><td>calc_dimension</td><td>Int</td><td>是</td><td>计算维度，现支持最火（1），最新（2），经典或播放最多（3）</td></tr><tr><td>page</td><td>Int</td><td>否</td><td>返回第几页，必须大于等于1，不填默认为1</td></tr><tr><td>count</td><td>Int</td><td>否</td><td>每页多少条，默认20，最多不超过200</td></tr></tbody></table></figure></li><li><p>callback：回调接口，成功则返回AlbumList（字段描述见<strong>Model层.md</strong>）对象，失败则返回错误原因。</p></li></ul><p><strong>参考代码</strong></p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n563" mdtype="fences">Map&lt;String, String&gt; map = new HashMap&lt;String, String&gt;();
map.put(DTransferConstants.CALC_DIMENSION, 1 + "");
map.put(DTransferConstants.CATEGORY_ID, 3+ "");
map.put(DTransferConstants.METADATA_ATTRIBUTES, "97:穿越");
CommonRequest.getMetadataAlbumList(map, new IDataCallBack&lt;AlbumList&gt;());
</pre><h2><a name='header-n565' class='md-header-anchor '></a>3.3 直播数据接口</h2><h3><a name='header-n566' class='md-header-anchor '></a>3.3.1 获取直播省市列表</h3><p><strong>接口签名：</strong></p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n568" mdtype="fences">public static void getProvinces(Map&lt;String, String&gt; specificParams,
		final IDataCallBack&lt;ProvinceList&gt; callback)
</pre><p><strong>接口说明：</strong></p><p>此接口用于获取直播省市列表</p><p><strong>参数说明：</strong></p><ul><li>specificParams：对于本接口设置为null或者空Map对象</li><li>callback：回调接口，成功则返回ProvinceList（字段描述见<strong>Model层.md</strong>）对象，失败则返回错误原因</li></ul><p><strong>参考代码：</strong></p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n578" mdtype="fences">Map&lt;String, String&gt; map = new HashMap&lt;String, String&gt;();
CommonRequest.getProvinces(map, new IDataCallBack&lt;ProvinceList&gt;());
</pre><h3><a name='header-n579' class='md-header-anchor '></a>3.3.2 获取直播电台</h3><p><strong>接口签名：</strong></p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n581" mdtype="fences">public static void getRadios(Map&lt;String, String&gt; specificParams,
    final IDataCallBack&lt;RadioList&gt; callback)
</pre><p><strong>接口说明：</strong></p><p>此接口用于返回直播电台列表</p><p><strong>参数说明：</strong></p><ul><li><p>specificParams：字段介绍如下</p><figure><table><thead><tr><th>字段名</th><th>类型</th><th>必填</th><th>描述</th></tr></thead><tbody><tr><td>radio_type</td><td>Int</td><td>是</td><td>电台类型：1-国家台，2-省市台，3-网络台</td></tr><tr><td>province_code</td><td>Int</td><td>否</td><td>省份代码，radio_type为2时不能为空</td></tr><tr><td>page</td><td>Int</td><td>否</td><td>返回第几页，必须大于等于1，不填默认为1</td></tr></tbody></table></figure></li><li><p>callback：回调接口，成功则返回RadioList（字段描述见<strong>Model层.md</strong>）对象，失败则返回错误原因。</p></li></ul><p><strong>参考代码</strong></p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n612" mdtype="fences">Map&lt;String, String&gt; map = new HashMap&lt;String, String&gt;();
map.put(DTransferConstants.RADIOTYPE, 2);
map.put(DTransferConstants.PROVINCECODE, 310000);
map.put(DTransferConstants.PAGE, mPageNum);
CommonRequest.getRadios(map, newIDataCallBack&lt;RadioList&gt;());
</pre><p>注意：对于返回的每页的条数，可以通过如下接口设置,此接口是全局性接口 ,凡是设置需要设置count的地方都可以使用该方法进行设置,参数设置的count优先级比此方法的高</p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n614" mdtype="fences">CommonRequest.getInstanse().setDefaultPagesize(int size)
</pre><h3><a name='header-n615' class='md-header-anchor '></a>3.3.3 获取直播电台某一天的节目排期表</h3><p><strong>接口签名：</strong></p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n617" mdtype="fences">public static void getSchedules(Map&lt;String, String&gt; specificParams,
		final IDataCallBack&lt;ScheduleList&gt; callback)
</pre><p><strong>接口说明：</strong></p><p>此接口用于返回直播电台某一天的节目排期表</p><p><strong>参数说明：</strong></p><ul><li><p>specificParams：字段介绍如下</p><figure><table><thead><tr><th>字段名</th><th>类型</th><th>必填</th><th>描述</th></tr></thead><tbody><tr><td>radio_id</td><td>Int</td><td>是</td><td>直播电台ID</td></tr><tr><td>weekday</td><td>Int</td><td>否</td><td>表示星期几，不填则取今天的星期。0-星期天，1-星期一，2-星期二，3-星期三，4-星期四，5-星期五，6-星期六</td></tr></tbody></table></figure></li><li><p>callback：回调接口，成功则返回ScheduleList（字段描述见<strong>Model层.md</strong>）对象，失败则返回错误原因。</p></li></ul><p><strong>参考代码</strong></p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n643" mdtype="fences">Map&lt;String, String&gt; map = new HashMap&lt;String, String&gt;();
map.put(DTransferConstants.RADIOID, 61);
map.put(DTransferConstants.WEEKDAY, Constants.WeekDay.MONDAY);
CommonRequest.getSchedules(map, newIDataCallBack&lt;ScheduleList&gt;());
</pre><h3><a name='header-n644' class='md-header-anchor '></a>3.3.4 获取直播节目详情</h3><p><strong>接口签名：</strong></p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n646" mdtype="fences">public static void getProgram(Map&lt;String, String&gt; specificParams,
			final IDataCallBack&lt;ProgramList&gt; callback)
</pre><p><strong>接口说明：</strong></p><p>此接口用于返回所选直播节目的详情</p><p><strong>参数说明：</strong></p><ul><li><p>specificParams：字段介绍如下</p><figure><table><thead><tr><th>字段名</th><th>类型</th><th>必填</th><th>描述</th></tr></thead><tbody><tr><td>radio_id</td><td>Int</td><td>是</td><td>直播电台ID</td></tr></tbody></table></figure></li><li><p>callback：回调接口，成功则返回ProgramList（字段描述见<strong>Model层.md</strong>）对象，失败则返回错误原因。</p></li></ul><p><strong>参考代码</strong></p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n667" mdtype="fences">Map&lt;String, Object&gt; map = new HashMap&lt;String, Object&gt;();
map.put(DTransferConstants.RADIOID, 61);
CommonRequest.getProgram(map, new IDataCallBack&lt;ProgramList&gt;());
</pre><h3><a name='header-n668' class='md-header-anchor '></a>3.3.5 批量获取电台接口</h3><p><strong>接口签名：</strong></p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n670" mdtype="fences">public static void getRadiosByIds(Map&lt;String, String&gt; specificParams,
			final IDataCallBack&lt;RadioListById&gt; callback)
</pre><p><strong>参数说明：</strong></p><ul><li><p>specificParams：字段介绍如下</p><figure><table><thead><tr><th>字段名</th><th>类型</th><th>必填</th><th>描述</th></tr></thead><tbody><tr><td>ids</td><td>String</td><td>是</td><td>电台ID列表，以英文逗号分隔，比如&quot;100,101,102&quot;</td></tr></tbody></table></figure></li><li><p>callback：回调接口，成功则返回RadioListById（字段描述见<strong>Model层.md</strong>）对象，失败则返回错误原因</p></li></ul><p><strong>参考代码</strong></p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n689" mdtype="fences">String ids = "100,101,102";
Map&lt;String, String&gt; map = new HashMap&lt;String, String&gt;();
map.put(DTransferConstants.RADIO_IDS, radio_ids);
CommonRequest.getRadiosByIds(map, new IDataCallBack&lt;RadioListById &gt;());
</pre><h3><a name='header-n690' class='md-header-anchor '></a>3.3.6 获取某省份城市列表。</h3><p><strong>接口签名：</strong></p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n692" mdtype="fences">public static void getCitys(final  Map&lt;String ,String&gt; params , IDataCallBack&lt;CityList&gt; callBack)
</pre><p><strong>参数说明：</strong></p><ul><li><p>specificParams：字段介绍如下</p><figure><table><thead><tr><th>字段名</th><th>类型</th><th>必填</th><th>描述</th></tr></thead><tbody><tr><td>province_code</td><td>Int</td><td>是</td><td>省份code (国家行政规划的省代码)</td></tr></tbody></table></figure></li><li><p>callback：回调接口，成功则返回CityList（字段描述见<strong>Model层.md</strong>）对象，失败则返回错误原因</p></li></ul><p><strong>参考代码：</strong></p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n711" mdtype="fences">Map&lt;String, String&gt; map = new HashMap&lt;String, String&gt;();
map.put(DTransferConstants.PROVINCECODE, province_code);
CommonRequest.getCitys(map, new IDataCallBack&lt;CityList&gt;());
</pre><h3><a name='header-n713' class='md-header-anchor '></a>3.3.6 获取某个城市下的电台列表</h3><p><strong>接口签名：</strong></p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n715" mdtype="fences">public static void getRadiosByCity(Map&lt;String, String&gt; specificParams,
		final IDataCallBack&lt;RadioList&gt; callback) {
</pre><p><strong>参数说明：</strong></p><ul><li><p>specificParams：字段介绍如下</p><figure><table><thead><tr><th>字段名</th><th>类型</th><th>必填</th><th>描述</th></tr></thead><tbody><tr><td>city_code</td><td>Int</td><td>是</td><td>城市code(国家行政规划的城市代码)</td></tr><tr><td>page</td><td>Int</td><td>否</td><td>返回第几页，必须大于等于1，不填默认为1</td></tr><tr><td>count</td><td>Int</td><td>否</td><td>每页多少条，默认20，最多不超过100</td></tr></tbody></table></figure></li><li><p>callback：回调接口，成功则返回RadioList（字段描述见<strong>Model层.md</strong>）对象，失败则返回错误原因</p></li></ul><p><strong>参考代码：</strong></p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n744" mdtype="fences">Map&lt;String, String&gt; map = new HashMap&lt;String, String&gt;();
map.put(DTransferConstants.CITY_CODE, city_code);
CommonRequest.getRadiosByCity(map, new IDataCallBack&lt;RadioList&gt;());
</pre><h3><a name='header-n745' class='md-header-anchor '></a>3.3.7 获取直播电台的分类。</h3><p><strong>接口签名：</strong></p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n747" mdtype="fences">public static void getRadioCategory(Map&lt;String, String&gt; specificParams,
		final IDataCallBack&lt;RadioCategoryList&gt; callback) {
</pre><p><strong>参数说明：</strong></p><ul><li>specificParams：传empty map即可</li><li>callback：回调接口，成功则返回RadioCategoryList（字段描述见<strong>Model层.md</strong>）对象，失败则返回错误原因</li></ul><p><strong>参考代码：</strong></p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n755" mdtype="fences">Map&lt;String, String&gt; map = new HashMap&lt;String, String&gt;();
CommonRequest.getRadioCategory(map, new IDataCallBack&lt;RadioCategoryList&gt;() {
    @Override
    public void onSuccess(RadioCategoryList object) {
    }

    @Override
    public void onError(int code, String message) {

    }
});
</pre><h3><a name='header-n756' class='md-header-anchor '></a>3.3.8 根据电台分类获取直播电台数据。</h3><p><strong>接口签名：</strong></p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n758" mdtype="fences">public static void getRadiosByCategory(Map&lt;String, String&gt; specificParams,
		final IDataCallBack&lt;RadioListByCategory&gt; callback) {
</pre><p><strong>参数说明：</strong></p><ul><li><p>specificParams：字段介绍如下</p><figure><table><thead><tr><th>字段名</th><th>类型</th><th>必填</th><th>描述</th></tr></thead><tbody><tr><td>radio_category_id</td><td>Int</td><td>是</td><td>直播分类ID</td></tr><tr><td>page</td><td>Int</td><td>否</td><td>返回第几页，必须大于等于1，不填默认为1</td></tr><tr><td>count</td><td>Int</td><td>否</td><td>每页多少条，默认20，最多不超过200</td></tr></tbody></table></figure></li><li><p>callback：回调接口，成功则返回RadioListByCategory（字段描述见<strong>Model层.md</strong>）对象，失败则返回错误原因</p></li></ul><p><strong>参考代码：</strong></p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n787" mdtype="fences">Map&lt;String ,String&gt; maps = new HashMap&lt;String, String&gt;();
maps.put(DTransferConstants.RADIO_CATEGORY_ID ,"2");
CommonRequest.getRadiosByCategory(maps, new IDataCallBack&lt;RadioListByCategory&gt;() {
    @Override
    public void onSuccess(RadioListByCategory object) {
        System.out.println("radioList = " + object);
    }

    @Override
    public void onError(int code, String message) {

    }
});
</pre><h2><a name='header-n788' class='md-header-anchor '></a>3.4 榜单数据接口</h2><h3><a name='header-n789' class='md-header-anchor '></a>3.4.1 根据榜单类型获取榜单首页的榜单列表</h3><p><strong>接口签名：</strong></p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n791" mdtype="fences">public static void getRankList(Map&lt;String, String&gt; specificParams,
		final IDataCallBack&lt;RankList&gt; callback)
</pre><p><strong>参数说明：</strong></p><ul><li><p>specificParams：字段介绍如下</p><figure><table><thead><tr><th>字段名</th><th>类型</th><th>必填</th><th>描述</th></tr></thead><tbody><tr><td>rank_type</td><td>Int</td><td>是</td><td>榜单类型，1-节目榜单</td></tr></tbody></table></figure></li><li><p>callback：回调接口，成功则返回RankList对象，失败则返回错误原因</p></li></ul><p>返回的Rank对象介绍如下  <code>在使用其他榜单接口时一定要仔细看下此model的各个值的属性</code></p><h4><a name='header-n810' class='md-header-anchor '></a>Rank</h4><figure><table><thead><tr><th style='text-align:left;' >字段名</th><th style='text-align:left;' >类型</th><th style='text-align:left;' >描述</th></tr></thead><tbody><tr><td style='text-align:left;' >rank_key</td><td style='text-align:left;' >String</td><td style='text-align:left;' >用于获取具体榜单内容的key，它作为入参用于获取具体某个排行榜内容</td></tr><tr><td style='text-align:left;' >kind</td><td style='text-align:left;' >String</td><td style='text-align:left;' >固定值&quot;rank&quot;</td></tr><tr><td style='text-align:left;' >rank_title</td><td style='text-align:left;' >String</td><td style='text-align:left;' >榜单标题</td></tr><tr><td style='text-align:left;' >rank_type</td><td style='text-align:left;' >Int</td><td style='text-align:left;' >榜单类型，1-节目榜单</td></tr><tr><td style='text-align:left;' >rank_sub_title</td><td style='text-align:left;' >String</td><td style='text-align:left;' >榜单副标题</td></tr><tr><td style='text-align:left;' >rank_period</td><td style='text-align:left;' >Int</td><td style='text-align:left;' >榜单计算周期，单位为天</td></tr><tr><td style='text-align:left;' >rank_period_type</td><td style='text-align:left;' >String</td><td style='text-align:left;' >榜单计算周期类型，比如“日榜”、“周榜”等</td></tr><tr><td style='text-align:left;' >rank_item_num</td><td style='text-align:left;' >Int</td><td style='text-align:left;' >该榜单内条目总数，比如100</td></tr><tr><td style='text-align:left;' >rank_order_num</td><td style='text-align:left;' >Int</td><td style='text-align:left;' >该榜单相对其他榜单的排序值，值越小越靠前</td></tr><tr><td style='text-align:left;' >cover_url</td><td style='text-align:left;' >String</td><td style='text-align:left;' >榜单封面图URL</td></tr><tr><td style='text-align:left;' >category_id</td><td style='text-align:left;' >Long</td><td style='text-align:left;' >榜单所属分类ID</td></tr><tr><td style='text-align:left;' >rank_content_type</td><td style='text-align:left;' >String</td><td style='text-align:left;' >榜单内容类型，album-专辑，track-声音</td></tr><tr><td style='text-align:left;' >rank_first_item_id</td><td style='text-align:left;' >Long</td><td style='text-align:left;' >榜单内排名第一的条目的ID</td></tr><tr><td style='text-align:left;' >rank_first_item_title</td><td style='text-align:left;' >String</td><td style='text-align:left;' >榜单内排名第一的条目的标题</td></tr><tr><td style='text-align:left;' >index_rank_items</td><td style='text-align:left;' >Array</td><td style='text-align:left;' >榜单首页显示的条目列表,对应<code>RankItem</code></td></tr></tbody></table></figure><p><strong>参考代码：</strong></p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n877" mdtype="fences">Map&lt;String, String&gt; map = new HashMap&lt;String, String&gt;();
map.put(DTransferConstants.RANK_TYPE, rank_type);
CommonRequest.getRankList(map, new IDataCallBack&lt;RankList&gt;()
</pre><p>&nbsp;</p><h3><a name='header-n879' class='md-header-anchor '></a>3.4.2 根据rank_key获取某个榜单下的专辑列表</h3><p><strong>接口签名：</strong></p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n881" mdtype="fences">// getRankAlbumList 接口已失效 ,请使用新接口 ,新接口中传入的rank_list_id 是榜单列表的id ,Rank model中的 rankListId
public static void getRankAlbumListNew(Map&lt;String, String&gt; specificParams,final IDataCallBack&lt;RankAlbumList&gt; callback)
</pre><p><strong>参数说明：</strong></p><ul><li><p>specificParams: 字段介绍如下</p><figure><table><thead><tr><th>字段名</th><th>类型</th><th>必填</th><th>描述</th></tr></thead><tbody><tr><td>rank_list_id</td><td>String</td><td>是</td><td>用于获取具体榜单列表的id,可通过<code>3.4.1</code>获得</td></tr><tr><td>page</td><td>Int</td><td>否</td><td>返回第几页，必须大于等于1，不填默认为1</td></tr><tr><td>count</td><td>Int</td><td>否</td><td>每页的大小 ，范围为[1,200]，默认为20</td></tr></tbody></table></figure></li><li><p>callback:回调接口，成功则返回RankAlbumList（字段描述见<strong>Model层.md</strong>）对象，失败则返回错误原因</p></li></ul><p><strong>参考代码：</strong></p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n910" mdtype="fences">Map&lt;String, String&gt; map = new HashMap&lt;String, String&gt;();
map.put(DTransferConstants.RANK_KEY, rank_key);
CommonRequest.getRankAlbumList(map,
    new IDataCallBack&lt;RankAlbumList&gt;());
</pre><h3><a name='header-n911' class='md-header-anchor '></a>3.4.3 根据rank_key获取某个榜单下的声音列表</h3><p><strong>接口签名：</strong></p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n913" mdtype="fences">public static void getRankTrackList(Map&lt;String, String&gt; specificParams,final IDataCallBack&lt;RankTrackList&gt; callback)
</pre><p><strong>参数说明：</strong></p><ul><li><p>specificParams：字段介绍如下</p><figure><table><thead><tr><th>字段名</th><th>类型</th><th>必填</th><th>描述</th></tr></thead><tbody><tr><td>rank_key</td><td>String</td><td>是</td><td>用于获取具体榜单内容的key</td></tr><tr><td>page</td><td>Int</td><td>否</td><td>返回第几页，必须大于等于1，不填默认为1</td></tr></tbody></table></figure></li></ul><p>rank_key为通过3.4.1接口获取</p><ul><li>callback：回调接口，成功则返回RankTrackList（字段描述见<strong>Model层.md</strong>）对象，失败则返回错误原因</li></ul><p><strong>参考代码：</strong></p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n939" mdtype="fences">Map&lt;String, String&gt; map = new HashMap&lt;String, String&gt;();
map.put(DTransferConstants.RANK_KEY, rank_key);
CommonRequest.getRankTrackList(map,
    new IDataCallBack&lt;RankTrackList&gt;());
</pre><h3><a name='header-n940' class='md-header-anchor '></a>3.4.4 获取直播电台排行榜</h3><p><strong>接口签名：</strong></p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n942" mdtype="fences">public static void getRankRadios(Map&lt;String, String&gt; specificParams,
    final IDataCallBack&lt;RadioList&gt; callback)
</pre><p><strong>参数说明：</strong></p><ul><li><p>specificParams：字段介绍如下</p><figure><table><thead><tr><th>字段名</th><th>类型</th><th>必填</th><th>描述</th></tr></thead><tbody><tr><td>radio_count</td><td>Int</td><td>是</td><td>需要获取排行榜中的电台数目。</td></tr></tbody></table></figure></li><li><p>callback：回调接口，成功则返回RadioList对象，失败则返回错误原因</p></li></ul><p><strong>参考代码：</strong></p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n961" mdtype="fences">Map&lt;String, String&gt; map = new HashMap&lt;String, String&gt;();
map.put(DTransferConstants.RADIO_COUNT, 10);
CommonRequest.getRankRadios(map, new IDataCallBack&lt;RadioList&gt;());
</pre><h2><a name='header-n963' class='md-header-anchor '></a>3.5 听单数据接口</h2><h3><a name='header-n964' class='md-header-anchor '></a>3.5.1 获取精品听单内容</h3><p><strong>接口签名：</strong></p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n966" mdtype="fences">public static void getColumnList(Map&lt;String, String&gt; specificParams,
    final IDataCallBack&lt;ColumnList&gt; callback)
</pre><p><strong>参数说明：</strong></p><ul><li><p>specificParams：字段介绍如下</p><figure><table><thead><tr><th>字段名</th><th>类型</th><th>必填</th><th>描述</th></tr></thead><tbody><tr><td>page</td><td>Int</td><td>否</td><td>返回第几页，必须大于等于1，不填默认为1</td></tr></tbody></table></figure></li><li><p>callback：回调接口，成功则返回ColumnList（字段描述见<strong>Model层.md</strong>）对象，失败则返回错误原因</p></li></ul><p><strong>参考代码：</strong></p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n985" mdtype="fences">Map&lt;String, String&gt; map = new HashMap&lt;String, String&gt;();
CommonRequest.getColumnList(map, new IDataCallBack&lt;ColumnList&gt;());
</pre><h3><a name='header-n986' class='md-header-anchor '></a>3.5.2 获取某个听单详情，每个听单包含听单简介信息和专辑或声音的列表</h3><p><strong>接口签名：</strong></p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n988" mdtype="fences">public static void getComlumnDetail(
    Map&lt;String, String&gt; specificParams,
    final IDataCallBack&lt;ColumnDetail&gt; callback)
</pre><p><strong>参数说明：</strong></p><ul><li><p>specificParams：字段介绍如下</p><figure><table><thead><tr><th>字段名</th><th>类型</th><th>必填</th><th>描述</th></tr></thead><tbody><tr><td>id</td><td>Int</td><td>是</td><td>听单ID</td></tr></tbody></table></figure></li><li><p>callback：回调接口，成功则返回ColumnDetail（字段描述见<strong>Model层.md</strong>）对象，失败则返回错误原因</p></li></ul><p>注意：听单会返回声音列表或者专辑列表，需要通过ColumnDetail中的column_content_type字段判断是声音列表还是专辑列表</p><p><strong>参考代码：</strong></p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n1008" mdtype="fences" style="page-break-inside: unset;">Map&lt;String, String&gt; map = new HashMap&lt;String, String&gt;();
map.put(DTransferConstants.ID ,id);
CommonRequest.getComlumnDetail(map, new IDataCallBack&lt;ColumnDetail&gt;()
	{
		@Override
		publicvoid onSuccess(ColumnDetail object)
		{
			/** 专辑*/
			if(object.getColumnContentType() == 1)
			{
                ColumnDetailAlbum albumList =
                    (ColumnDetailAlbum) object;
			}
			/** 声音*/
			elseif(object.getColumnContentType() == 2)
			{
                ColumnDetailTrack trackList =
                    (ColumnDetailTrack) object;
			}
		}
		@Override
		publicvoid onError(int code, String message)
		{

		}
	});
</pre><h2><a name='header-n1009' class='md-header-anchor '></a>3.6 焦点图数据接口</h2><h3><a name='header-n1010' class='md-header-anchor '></a>3.6.1 获取榜单焦点图列表</h3><p><strong>接口签名：</strong></p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n1012" mdtype="fences">public static void getRankBannerList(
    Map&lt;String, String&gt; specificParams,
    final IDataCallBack&lt;RankBannerList&gt; callback)
</pre><p><strong>参数说明：</strong></p><ul><li><p>specificParams：字段介绍如下</p><figure><table><thead><tr><th>字段名</th><th>类型</th><th>必填</th><th>描述</th></tr></thead><tbody><tr><td>id</td><td>Int</td><td>是</td><td>听单ID</td></tr></tbody></table></figure></li><li><p>callback：回调接口，成功则返回RankBannerList（字段描述见<strong>Model层.md</strong>）对象，失败则返回错误原因</p></li></ul><p><strong>参考代码：</strong></p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n1031" mdtype="fences">Map&lt;String, String&gt; map = new HashMap&lt;String, String&gt;();
map.put(DTransferConstants.ID ,id);
CommonRequest.getRankBannerList(map,
    new IDataCallBack&lt;RankBannerList&gt;());
</pre><h3><a name='header-n1032' class='md-header-anchor '></a>3.6.2 获取发现页推荐的焦点图列表</h3><p><strong>接口签名：</strong></p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n1034" mdtype="fences">public static void getDiscoveryBannerList(
    Map&lt;String, String&gt; specificParams,
    final IDataCallBack&lt;DiscoveryBannerList&gt; callback)
</pre><p><strong>参数说明：</strong></p><ul><li><p>specificParams：字段介绍如下</p><figure><table><thead><tr><th>字段名</th><th>类型</th><th>必填</th><th>描述</th></tr></thead><tbody><tr><td>channel</td><td>String</td><td>是</td><td>app的渠道号（对应渠道焦点图配置）</td></tr><tr><td>app_version</td><td>String</td><td>是</td><td>app版本号</td></tr><tr><td>image_scale</td><td>Int</td><td>是</td><td>控制焦点图图片大小参数，scale=2为iphone适配类型，scale=3为iphone6适配机型，对于Android一般设为2</td></tr></tbody></table></figure></li><li><p>callback：回调接口，成功则返回DiscoveryBannerList（字段描述见<strong>Model层.md</strong>）对象，失败则返回错误原因</p></li></ul><p><strong>参考代码：</strong></p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n1063" mdtype="fences">Map&lt;String, String&gt; map = new HashMap&lt;String, String&gt;();
map.put(DTransferConstants.CHANNEL ,"");
map.put(DTransferConstants.APP_VERSION ,"");
map.put(DTransferConstants.IMAGE_SCALE ,"2");
CommonRequest.getDiscoveryBannerList(map, new IDataCallBack&lt;DiscoveryBannerList&gt;());
</pre><h3><a name='header-n1064' class='md-header-anchor '></a>3.6.3 获取分类推荐的焦点图列表 (已过时 请使用3.6.4)</h3><p><strong>接口签名：</strong></p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n1066" mdtype="fences">public static void getCategoryBannerList(
    Map&lt;String, String&gt; specificParams,
    final IDataCallBack&lt;CategoryBannerList&gt; callback)
</pre><p><strong>参数说明：</strong></p><ul><li><p>specificParams：字段介绍如下</p><figure><table><thead><tr><th>字段名</th><th>类型</th><th>必填</th><th>描述</th></tr></thead><tbody><tr><td>channel</td><td>String</td><td>否</td><td>app的渠道号（对应渠道焦点图配置），默认值为“and-f5”</td></tr><tr><td>app_version</td><td>String</td><td>否</td><td>app版本号，默认值为“4.3.2.2”</td></tr><tr><td>image_scale</td><td>Int</td><td>否</td><td>控制焦点图图片大小参数，scale=2为iphone适配类型，scale=3为iphone6适配机型；机型为android时的一般设置scale=2。默认值为“2”</td></tr><tr><td>category_id</td><td>Int</td><td>是</td><td>分类ID</td></tr><tr><td>content_type</td><td>String</td><td>是</td><td>内容类型：暂时仅专辑(album)</td></tr></tbody></table></figure></li><li><p>callback：回调接口，成功则返回CategoryBannerList（字段描述见<strong>Model层.md</strong>）对象，失败则返回错误原因</p></li></ul><p><strong>参考代码：</strong></p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n1105" mdtype="fences">Map&lt;String, String&gt; map = new HashMap&lt;String, String&gt;();
map.put(DTransferConstants.CHANNEL ,"");
map.put(DTransferConstants.APP_VERSION ,"");
map.put(DTransferConstants.IMAGE_SCALE ,"2");
map.put(DTransferConstants.CONTENT_TYPE ,"album")
CommonRequest.getCategoryBannerList(map, new IDataCallBack&lt;CategoryBannerList&gt;());
</pre><h3><a name='header-n1106' class='md-header-anchor '></a>3.6.4 获取v2版本的分类推荐的焦点图列表。</h3><p><strong>接口签名：</strong></p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n1108" mdtype="fences">public static void getCategoryBannersV2(
    Map&lt;String, String&gt; specificParams,
    final IDataCallBack&lt;BannerV2List&gt; callback)
</pre><p><strong>参数说明：</strong></p><ul><li><p>specificParams：字段介绍如下</p><figure><table><thead><tr><th>字段名</th><th>类型</th><th>必填</th><th>描述</th></tr></thead><tbody><tr><td>category_idInt</td><td>是</td><td>分类ID，为0返回的是发现页的焦点图</td><td>&nbsp;</td></tr><tr><td>channelString</td><td>否</td><td>app的渠道号（对应渠道焦点图配置），可以为空</td><td>&nbsp;</td></tr><tr><td>app_version</td><td>String</td><td>否</td><td>app版本号，默认值为“5.4.45”</td></tr><tr><td>image_scale</td><td>Int</td><td>否</td><td>控制焦点图图片大小参数，scale=2为iphone适配类型，scale=3为iphone6适配机型；机型为android时的一般设置scale=2。默认值为“2”</td></tr><tr><td>network</td><td>String</td><td>否</td><td>客户端网络类型：WIFI、4G、3G、2G，默认值为WIFI</td></tr><tr><td>operator</td><td>Int</td><td>否</td><td>客户端移动运营商类型：0-中国移动；1-中国联通；2-中国电信；3-其他，可以不填</td></tr><tr><td>contains_paid</td><td>String</td><td>否</td><td>是否需要输出付费内容：true-是；false-否；（默认不输出付费内容）</td></tr></tbody></table></figure></li><li><p>callback：回调接口，成功则返回 BannerV2List（字段描述见<strong>Model层.md</strong>）对象，失败则返回错误原因</p></li></ul><h2><a name='header-n1156' class='md-header-anchor '></a>3.7 冷启动接口</h2><h3><a name='header-n1157' class='md-header-anchor '></a>3.7.1 获取冷启动一级分类</h3><p><strong>接口签名：</strong></p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n1159" mdtype="fences">public static void getColdbootGenres(
			final Map&lt;String, String&gt; specificParams,
			final IDataCallBack&lt;GenreList&gt; callback)
</pre><p><strong>参数说明：</strong></p><ul><li>specificParams：设置为null或者空Map</li><li>callback：回调接口，成功则返回GenreList（字段描述见<strong>Model层.md</strong>）对象，失败则返回错误原因</li></ul><p><strong>参考代码：</strong></p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n1167" mdtype="fences">Map&lt;String, String&gt; map = new HashMap&lt;String, String&gt;();
CommonRequest.getColdbootGenres(map, new IDataCallBack&lt;GenreList&gt;());
</pre><h3><a name='header-n1168' class='md-header-anchor '></a>3.7.2 获取冷启动二级分类</h3><p><strong>接口签名：</strong></p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n1170" mdtype="fences">public static void getColdbootSubGenres(
			final Map&lt;String, String&gt; specificParams,
			final IDataCallBack&lt;SubGenreList&gt; callback)
</pre><p><strong>参数说明：</strong></p><ul><li>specificParams: null或者空Map</li><li>callback:回调接口，成功则返回SubGenreList对象，失败则返回错误原因</li></ul><p><strong>参考代码：</strong></p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n1178" mdtype="fences">Map&lt;String, String&gt; map = new HashMap&lt;String, String&gt;();
CommonRequest.getColdbootSubGenres(map, new IDataCallBack&lt;SubGenreList&gt;());
</pre><h3><a name='header-n1179' class='md-header-anchor '></a>3.7.3 根据冷启动一级分类和冷启动二级分类获取相应类别下的冷启动标签列表</h3><p><strong>接口签名：</strong></p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n1181" mdtype="fences">public static void getColdBootTag(final Map&lt;String, String&gt; specificParams,
			final IDataCallBack&lt;ColdBootTag&gt; callback)
</pre><p><strong>参数说明：</strong></p><ul><li><p>specificParams：字段介绍如下</p><figure><table><thead><tr><th>字段名</th><th>类型</th><th>必填</th><th>描述</th></tr></thead><tbody><tr><td>coldboot_genre</td><td>String</td><td>是</td><td>冷启动分类</td></tr><tr><td>coldboot_sub_genre</td><td>String</td><td>是</td><td>冷启动二级分类</td></tr></tbody></table></figure></li><li><p>callback：回调接口，成功则返回ColdBootTag对象，失败则返回错误原因</p></li></ul><p><strong>参考代码：</strong></p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n1205" mdtype="fences">Map&lt;String, String&gt; map = new HashMap&lt;String, String&gt;();
map.put(DTransferConstants.COLDBOOT_GENRE ,"");
map.put(DTransferConstants.COLDBOOT_SUB_GENRE ,"");
CommonRequest.getColdBootTag(map, new IDataCallBack&lt;ColdBootTag&gt;());
</pre><h3><a name='header-n1206' class='md-header-anchor '></a>3.7.4 提交用户感兴趣的冷启动标签</h3><p><strong>接口签名：</strong></p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n1208" mdtype="fences">public static void postColdBootTag(Map&lt;String, String&gt; specificParams,
			final IDataCallBack&lt;PostResponse&gt; callback)
</pre><p><strong>参数说明：</strong></p><ul><li><p>specificParams：字段介绍如下</p><figure><table><thead><tr><th>字段名</th><th>类型</th><th>必填</th><th>描述</th></tr></thead><tbody><tr><td>coldboot_genre</td><td>String</td><td>是</td><td>冷启动分类</td></tr><tr><td>coldboot_sub_genre</td><td>String</td><td>是</td><td>冷启动二级分类</td></tr><tr><td>coldboot_tags</td><td>JSON Array</td><td>是</td><td>用户勾选的感兴趣的冷启动标签列表</td></tr></tbody></table></figure></li><li><p>callback：回调接口，当PostResponse中的response字段为”ok”时，则上传成功；如果为error或者在回调onError中返回时则为失败。</p></li></ul><p><strong>参考代码：</strong></p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n1237" mdtype="fences">Map&lt;String, String&gt; map = new HashMap&lt;String, String&gt;();
map.put(DTransferConstants.COLDBOOT_GENRE ,"");
map.put(DTransferConstants.COLDBOOT_SUB_GENRE ,"");
CommonRequest.postColdBootTag(map, new IDataCallBack&lt;PostResponse&gt;());
</pre><h3><a name='header-n1238' class='md-header-anchor '></a>3.7.5 获取用户提交的冷启动标签详情</h3><p><strong>接口签名：</strong></p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n1240" mdtype="fences">public static void getColdBootDetail(
			final Map&lt;String, String&gt; specificParams,
			final IDataCallBack&lt;ColdBootDetail&gt; callback)
</pre><p><strong>参数说明：</strong></p><ul><li>specificParams：设置为null或者空Map</li><li>callback：回调接口，成功则返回ColdBootDetail对象，失败则返回错误原因</li></ul><p><strong>参考代码：</strong></p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n1248" mdtype="fences">Map&lt;String, String&gt; map = new HashMap&lt;String, String&gt;();
CommonRequest.getColdBootDetail(map, new IDataCallBack&lt;ColdBootDetail&gt;());
</pre><h2><a name='header-n1249' class='md-header-anchor '></a>3.8 主播数据接口</h2><h3><a name='header-n1250' class='md-header-anchor '></a>3.8.1 获取喜马拉雅主播分类</h3><p><strong>接口签名：</strong></p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n1252" mdtype="fences">public static void getAnnouncerCategoryList(
			Map&lt;String, String&gt; specificParams,
			final IDataCallBack&lt;AnnouncerCategoryList&gt; callback)
</pre><p><strong>参数说明：</strong></p><ul><li>specificParams: 字段介绍如下
无</li><li>callback:回调接口，成功则返回AnnouncerCategoryList对象，失败则返回错误原因</li></ul><p><strong>参考代码：</strong></p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n1260" mdtype="fences">Map&lt;String, String&gt; map = new HashMap&lt;String, String&gt;();
CommonRequest.getAnnouncerCategoryList(map, new IDataCallBack&lt;AnnouncerCategoryList&gt;());
</pre><h3><a name='header-n1261' class='md-header-anchor '></a>3.8.2 获取某个分类下的主播列表</h3><p><strong>接口签名：</strong></p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n1263" mdtype="fences">public static void getAnnouncerList(Map&lt;String, String&gt; specificParams,
			final IDataCallBack&lt;AnnouncerList&gt; callback)
</pre><p><strong>参数说明：</strong></p><ul><li><p>specificParams：字段介绍如下</p><figure><table><thead><tr><th>字段名</th><th>类型</th><th>必填</th><th>描述</th></tr></thead><tbody><tr><td>vcategory_id</td><td>Int</td><td>是</td><td>主播分类ID</td></tr><tr><td>page</td><td>Int</td><td>否</td><td>返回第几页，必须大于等于1，不填默认为1</td></tr><tr><td>calc_dimension</td><td>Int</td><td>是</td><td>返回的主播列表排序规则，取值和含义如下：<br>1-最火 ，2-最新，3-粉丝最多</td></tr><tr><td>count</td><td>Int</td><td>否</td><td>每页多少条，默认20，最多不超过200</td></tr></tbody></table></figure></li><li><p>callback：回调接口，成功则返回AnnouncerList对象，失败则返回错误原因</p></li></ul><p><strong>参考代码：</strong></p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n1297" mdtype="fences">Map&lt;String, String&gt; map = new HashMap&lt;String, String&gt;();
map.put(DTransferConstants.VCATEGORY_ID , vcategory_id);
map.put(DTransferConstants.CALC_DIMENSION , "1");
CommonRequest.getAnnouncerList(map, new IDataCallBack&lt;AnnouncerList&gt;());
</pre><h3><a name='header-n1298' class='md-header-anchor '></a>3.8.3 获取主播的专辑列表</h3><p><strong>接口签名：</strong></p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n1300" mdtype="fences">public static void getAlbumsByAnnouncer(Map&lt;String, String&gt; specificParams,
			final IDataCallBack&lt;BatchAlbumList&gt; callback)
</pre><p><strong>参数说明：</strong></p><ul><li><p>specificParams: 字段介绍如下</p><figure><table><thead><tr><th>字段名</th><th>类型</th><th>必填</th><th>描述</th></tr></thead><tbody><tr><td>aid</td><td>Int</td><td>是</td><td>主播用户ID</td></tr><tr><td>page</td><td>Int</td><td>否</td><td>返回第几页，必须大于等于1，不填默认为1</td></tr><tr><td>count</td><td>Int</td><td>否</td><td>每页多少条，默认20，最多不超过100</td></tr></tbody></table></figure></li><li><p>callback:回调接口，成功则返回BatchAlbumList对象，失败则返回错误原因</p></li></ul><p><strong>参考代码:</strong></p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n1329" mdtype="fences">Map&lt;String, String&gt; map = new HashMap&lt;String, String&gt;();
map.put(DTransferConstants.AID , aid);
CommonRequest.getAlbumsByAnnouncer(map, new IDataCallBack&lt;BatchAlbumList&gt;());
</pre><h3><a name='header-n1330' class='md-header-anchor '></a>3.8.4 获取某个主播的声音列表</h3><p><strong>接口签名：</strong></p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n1332" mdtype="fences">public static void getTracksByAnnouncer(Map&lt;String, String&gt; specificParams,
			final IDataCallBack&lt;AnnouncerTrackList&gt; callback)
</pre><p><strong>参数说明：</strong></p><ul><li><p>specificParams: 字段介绍如下</p><figure><table><thead><tr><th>字段名</th><th>类型</th><th>必填</th><th>描述</th></tr></thead><tbody><tr><td>aid</td><td>Int</td><td>是</td><td>主播用户ID</td></tr><tr><td>page</td><td>Int</td><td>否</td><td>返回第几页，必须大于等于1，不填默认为1</td></tr><tr><td>count</td><td>Int</td><td>否</td><td>每页多少条，默认20，最多不超过100</td></tr></tbody></table></figure></li><li><p>callback:回调接口，成功则返回AnnouncerTrackList对象，失败则返回错误原因</p></li></ul><p><strong>参考代码:</strong></p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n1361" mdtype="fences">Map&lt;String ,String&gt; maps = new HashMap&lt;String, String&gt;();
maps.put(DTransferConstants.AID ,"1884830");
CommonRequest.getTracksByAnnouncer(maps, new IDataCallBack&lt;AnnouncerTrackList&gt;() {
    @Override
    public void onSuccess(AnnouncerTrackList object) {

    }

    @Override
    public void onError(int code, String message) {

    }
});
</pre><h3><a name='header-n1363' class='md-header-anchor '></a>3.8.5 根据一批主播ID批量获取主播信息</h3><p><strong>接口签名：</strong></p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n1365" mdtype="fences">public static void getAnnouncersBatch(Map&lt;String, String&gt; specificParams,
			final IDataCallBack&lt;AnnouncerListByIds&gt; callback)
</pre><p><strong>参数说明：</strong></p><ul><li><p>specificParams: 字段介绍如下</p><figure><table><thead><tr><th>字段名</th><th>类型</th><th>必填</th><th>描述</th></tr></thead><tbody><tr><td>ids</td><td>Int[]</td><td>是</td><td>主播用户ID列表  最大ID数量为200个，超过200的ID将忽略</td></tr></tbody></table></figure></li><li><p>callback:回调接口，成功则返回AnnouncerListByIds对象，失败则返回错误原因</p></li></ul><p><strong>参考代码:</strong></p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n1384" mdtype="fences">Map&lt;String ,String&gt; maps = new HashMap&lt;String, String&gt;();
maps.put("ids" ,"1884830 ,38526903");
CommonRequest.getAnnouncersBatch(maps, new IDataCallBack&lt;AnnouncerListByIds&gt;() {
    @Override
    public void onSuccess(AnnouncerListByIds object) {

    }

    @Override
    public void onError(int code, String message) {

    }
});
</pre><h2><a name='header-n1386' class='md-header-anchor '></a>3.9 搜索接口</h2><h3><a name='header-n1387' class='md-header-anchor '></a>3.9.1 搜索专辑</h3><p><strong>接口签名：</strong></p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n1389" mdtype="fences">public static void getSearchedAlbums(Map&lt;String, String&gt;specificParams,
    final IDataCallBack&lt;SearchAlbumList&gt; callback)
</pre><p><strong>接口说明：</strong></p><p>用于搜索专辑</p><p><strong>参数说明：</strong></p><ul><li><p>specificParams: 字段介绍如下</p><figure><table><thead><tr><th>字段名</th><th>类型</th><th>必填</th><th>描述</th></tr></thead><tbody><tr><td>q</td><td>String</td><td>是</td><td>搜索关键词</td></tr><tr><td>category_id</td><td>Int</td><td>否</td><td>分类ID，不填或者为0检索全库</td></tr><tr><td>calc_dimension</td><td>Int</td><td>否</td><td>排序条件：2-最新，3-最多播放，4-最相关（默认）</td></tr><tr><td>page</td><td>Int</td><td>否</td><td>返回第几页，必须大于等于1，不填默认为1</td></tr><tr><td>count</td><td>Int</td><td>否</td><td>每页多少条，默认20，最多不超过200</td></tr></tbody></table></figure></li></ul><p><strong>参考代码</strong></p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n1428" mdtype="fences">String q = "因为爱情来之不易";
Map&lt;String, String&gt; map = new HashMap&lt;String, String&gt;();
map.put(DTransferConstants.SEARCH_KEY, q);
map.put(DTransferConstants.CATEGORY_ID, mCategoryId);
map.put(DTransferConstants.PAGE, mPageNum);
CommonRequest.getSearchedAlbums(map, newIDataCallBack&lt;SearchAlbumList&gt;());
</pre><p>注意：对于返回的每页的条数，可以通过如下接口设置,此接口是全局性接口 ,凡是设置需要设置count的地方都可以使用该方法进行设置,参数设置的count优先级比此方法的高</p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n1430" mdtype="fences">CommonRequest.getInstanse().setDefaultPagesize(int size)
</pre><ul><li>callback:回调接口，成功则返回SearchAlbumList（字段描述见<strong>Model层.md</strong>）对象，失败则返回错误原因。</li></ul><h3><a name='header-n1435' class='md-header-anchor '></a>3.9.2 搜索声音</h3><p><strong>接口签名：</strong></p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n1437" mdtype="fences">public static void getSearchedTracks(Map&lt;String,String&gt; specificParams,
    final IDataCallBack&lt;SearchTrackList&gt; callback)
</pre><p><strong>接口说明：</strong></p><p>此接口用于搜索声音</p><p><strong>参数说明：</strong></p><ul><li><p>specificParams: 字段介绍如下</p><figure><table><thead><tr><th>字段名</th><th>类型</th><th>必填</th><th>描述</th></tr></thead><tbody><tr><td>q</td><td>String</td><td>是</td><td>搜索关键词</td></tr><tr><td>calc_dimension</td><td>Int</td><td>否</td><td>排序条件：2-最新，3-最多播放，4-最相关（默认）</td></tr><tr><td>category_id</td><td>Int</td><td>否</td><td>分类ID，不填或者为0检索全库</td></tr><tr><td>page</td><td>Int</td><td>否</td><td>返回第几页，必须大于等于1，不填默认为1</td></tr><tr><td>count</td><td>Int</td><td>否</td><td>每页多少条，默认20，最多不超过200</td></tr></tbody></table></figure></li><li><p>callback:回调接口，成功则返回SearchAlbumList（字段描述见<strong>Model层.md</strong>）对象，失败则返回错误原因。</p></li></ul><p><strong>参考代码</strong></p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n1478" mdtype="fences">String q = "因为爱情来之不易";
Map&lt;String, String&gt; map = new HashMap&lt;String, String&gt;();
map.put(DTransferConstants.SEARCH_KEY, q);
map.put(DTransferConstants.CATEGORY_ID, mCategoryId);
map.put(DTransferConstants.PAGE, mPageNum);
CommonRequest.getSearchedTracks(map, newIDataCallBack&lt;SearchTrackList&gt;()
</pre><p>注意：对于返回的每页的条数，可以通过如下接口设置,此接口是全局性接口 ,凡是设置需要设置count的地方都可以使用该方法进行设置,参数设置的count优先级比此方法的高</p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n1480" mdtype="fences">CommonRequest.getInstanse().setDefaultPagesize(int size)
</pre><h3><a name='header-n1481' class='md-header-anchor '></a>3.9.3 搜索直播</h3><p><strong>接口签名：</strong></p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n1483" mdtype="fences">public static void getSearchedRadios(Map&lt;String, String&gt;specificParams,
    final IDataCallBack&lt;RadioList&gt; callback)
</pre><p><strong>接口说明：</strong></p><p>按照关键词搜索直播</p><p><strong>参数说明：</strong></p><ul><li><p>specificParams: 字段介绍如下</p><figure><table><thead><tr><th>字段名</th><th>类型</th><th>必填</th><th>描述</th></tr></thead><tbody><tr><td>page</td><td>Int</td><td>否</td><td>分页请求参数，表示请求第几页，默认为1即第一页</td></tr><tr><td>q</td><td>String</td><td>否</td><td>搜索查询词参数</td></tr><tr><td>radio_category_id</td><td>Int</td><td>否</td><td>直播分类ID</td></tr><tr><td>count</td><td>Int</td><td>否</td><td>每页多少条，默认20，最多不超过200</td></tr></tbody></table></figure></li><li><p>callback:回调接口，成功则返回RadioList对象，失败则返回错误原因。</p></li></ul><p><strong>参考代码</strong></p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n1519" mdtype="fences">Map&lt;String, String&gt; map = new HashMap&lt;String, String&gt;();
map.put(DTransferConstants.SEARCH_KEY, “xx”);
map.put(DTransferConstants.RADIO_CATEGORY_ID, “xx”);
CommonRequest.getSearchedRadios(map, newIDataCallBack&lt;RadioList&gt;());
</pre><h3><a name='header-n1520' class='md-header-anchor '></a>3.9.4 获取最新热搜词</h3><p><strong>接口签名：</strong></p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n1522" mdtype="fences">public static void getHotWords(Map&lt;String, String&gt; specificParams,
    final IDataCallBack&lt;HotWordList&gt; callback)
</pre><p><strong>参数说明：</strong></p><ul><li><p>specificParams: 字段介绍如下</p><figure><table><thead><tr><th>字段名</th><th>类型</th><th>必填</th><th>描述</th></tr></thead><tbody><tr><td>top</td><td>int</td><td>是</td><td>获取前top长度的热搜词。（1&lt;=top&lt;=20：目前top只支持最多20个）</td></tr></tbody></table></figure></li><li><p>callback:回调接口，成功则返回HotWordList对象，失败则返回错误原因</p></li></ul><p><strong>参考代码：</strong></p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n1541" mdtype="fences">Map&lt;String, String&gt; map = new HashMap&lt;String, String&gt;();
map.put(DTransferConstants.TOP, q);
CommonRequest.getHotWords(map, newIDataCallBack&lt;HotWordList&gt;());
</pre><h3><a name='header-n1542' class='md-header-anchor '></a>3.9.5 获取某个关键词的联想词</h3><p><strong>接口签名：</strong></p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n1544" mdtype="fences">public static void getSuggestWord(Map&lt;String, String&gt; specificParams,
    final IDataCallBack&lt;SuggestWords&gt; callback)
</pre><p><strong>参数说明：</strong></p><ul><li><p>specificParams: 字段介绍如下</p><figure><table><thead><tr><th>字段名</th><th>类型</th><th>必填</th><th>描述</th></tr></thead><tbody><tr><td>q</td><td>String</td><td>是</td><td>搜索查询词参数</td></tr></tbody></table></figure></li><li><p>callback:回调接口，成功则返回SuggestWords对象，失败则返回错误原因</p></li></ul><p><strong>参考代码：</strong></p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n1563" mdtype="fences">Map&lt;String, String&gt; map = new HashMap&lt;String, String&gt;();
map.put(DTransferConstants.SEARCH_KEY, q);
CommonRequest.getSuggestWord(map, newIDataCallBack&lt;SuggestWords&gt;());
</pre><h3><a name='header-n1564' class='md-header-anchor '></a>3.9.6 搜索主播</h3><p><strong>接口签名：</strong></p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n1566" mdtype="fences">public static void getSearchAnnouncers(Map&lt;String, String&gt; specificParams,
    final IDataCallBack&lt;AnnouncerList&gt; callback)
</pre><p><strong>参数说明：</strong></p><ul><li><p>specificParams: 字段介绍如下</p><figure><table><thead><tr><th>字段名</th><th>类型</th><th>必填</th><th>描述</th></tr></thead><tbody><tr><td>q</td><td>String</td><td>是</td><td>搜索关键词</td></tr><tr><td>calc_dimension</td><td>Int</td><td>否</td><td>排序条件：4-最相关（默认），5-粉丝最多，6-声音最多</td></tr><tr><td>page</td><td>Int<span>	</span>否</td><td>返回第几页，必须大于等于1，不填默认为1</td><td>&nbsp;</td></tr><tr><td>count</td><td>Int</td><td>否</td><td>每页多少条，默认20，最多不超过200</td></tr></tbody></table></figure></li><li><p>callback:回调接口，成功则返回AnnouncerList对象，失败则返回错误原因</p></li></ul><p><strong>参考代码：</strong></p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n1600" mdtype="fences">Map&lt;String, String&gt; map = new HashMap&lt;String, String&gt;();
map.put(DTransferConstants.SEARCH_KEY, q);
CommonRequest.getSearchAnnouncers(map, new IDataCallBack&lt;AnnouncerList&gt;());
</pre><h3><a name='header-n1602' class='md-header-anchor '></a>3.9.7 获取指定数量直播，声音，专辑的内容。</h3><p><strong>接口签名：</strong></p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n1604" mdtype="fences">public static void getSearchAll(Map&lt;String, String&gt; specificParams,
										 final IDataCallBack&lt;SearchAll&gt; callback)
</pre><p><strong>参数说明：</strong></p><ul><li><p>specificParams: 字段介绍如下</p><figure><table><thead><tr><th>字段名</th><th>类型</th><th>必填</th><th>描述</th></tr></thead><tbody><tr><td>count</td><td>Int</td><td>否</td><td>分页请求参数，表示每页多少条记录，默认20，最多不超过200</td></tr><tr><td>page</td><td>Int</td><td>否</td><td>分页请求参数，表示请求第几页，默认为1即第一页</td></tr><tr><td>q</td><td>String</td><td>是</td><td>搜索查询词参数</td></tr></tbody></table></figure></li></ul><p>&nbsp;</p><ul><li>callback:回调接口，成功则返回SearchAll对象，失败则返回错误原因</li></ul><p><strong>参考代码：</strong></p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n1635" mdtype="fences">Map&lt;String, String&gt; map = new HashMap&lt;String, String&gt;();
map.put(DTransferConstants.SEARCH_KEY, q);
CommonRequest.getSearchAll(map, new IDataCallBack&lt;SearchAll&gt;());
</pre><h3><a name='header-n1636' class='md-header-anchor '></a>3.9.8 搜索专辑，支持的筛选条件包括专辑ID、标题、专辑所属主播ID或昵称、标签、是否付费、价格类型、分类ID或分类名等，并可指定排序字段。</h3><p><strong>接口签名：</strong></p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n1638" mdtype="fences">	public static void searchAlbumV2(Map&lt;String ,String&gt; params ,IDataCallBack&lt;SearchAlbumList&gt; callBack)
</pre><p><strong>参数说明：</strong></p><ul><li>specificParams: 字段介绍如下</li></ul><figure><table><thead><tr><th>参数名</th><th>类型</th><th>必填</th><th>描述</th></tr></thead><tbody><tr><td>id</td><td>Long</td><td>否</td><td>专辑ID</td></tr><tr><td>title</td><td>String</td><td>否</td><td>专辑标题</td></tr><tr><td>uid</td><td>Long</td><td>否</td><td>主播uid</td></tr><tr><td>nickname</td><td>String</td><td>否</td><td>主播昵称</td></tr><tr><td>tags</td><td>String</td><td>否</td><td>专辑标签</td></tr><tr><td>is_paid</td><td>Integer</td><td>否</td><td>是否付费 1-付费 0-免费</td></tr><tr><td>price_type</td><td>Integer</td><td>否</td><td>价格类型 1-分集购买 2-整张购买</td></tr><tr><td>category_id</td><td>Long</td><td>否</td><td>专辑所属分类ID</td></tr><tr><td>category_name</td><td>String</td><td>否</td><td>分类名</td></tr><tr><td>sort_by</td><td>String</td><td>否</td><td>排序字段，可选值：created_at、updated_at、discountedPrice</td></tr><tr><td>desc</td><td>Boolean</td><td>否</td><td>true-降序排列 false-升序排列</td></tr><tr><td>page</td><td>Int</td><td>否</td><td>返回第几页，从1开始，默认为1</td></tr><tr><td>count</td><td>Int</td><td>否</td><td>每页大小，范围为[1,200]，默认为20</td></tr></tbody></table></figure><ul><li>callback:回调接口，成功则返回SearchAlbumList对象，失败则返回错误原因</li></ul><p>&nbsp;</p><h3><a name='header-n1719' class='md-header-anchor '></a>3.9.9 搜索声音，支持的筛选条件包括声音ID、标题、所属专辑ID、所属专辑标题、所属主播ID或昵称、标签、是否付费、分类ID或分类名等，并可指定排序字段。</h3><p><strong>接口签名：</strong></p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n1721" mdtype="fences">public static void searchTrackV2(Map&lt;String ,String&gt; params ,IDataCallBack&lt;SearchTrackListV2&gt; callBack)
</pre><p><strong>参数说明：</strong></p><ul><li>specificParams: 字段介绍如下</li></ul><figure><table><thead><tr><th>参数名</th><th>类型</th><th>必填</th><th>描述</th></tr></thead><tbody><tr><td>id</td><td>Long</td><td>否</td><td>声音ID</td></tr><tr><td>title</td><td>String</td><td>否</td><td>声音标题</td></tr><tr><td>album_id</td><td>Long</td><td>否</td><td>所属专辑ID</td></tr><tr><td>album_title</td><td>String</td><td>否</td><td>所属专辑标题</td></tr><tr><td>uid</td><td>Long</td><td>否</td><td>主播uid</td></tr><tr><td>nickname</td><td>String</td><td>否</td><td>主播昵称</td></tr><tr><td>tags</td><td>String</td><td>否</td><td>声音标签</td></tr><tr><td>is_paid</td><td>Integer</td><td>否</td><td>是否付费 1-付费 0-免费</td></tr><tr><td>category_id</td><td>Long</td><td>否</td><td>分类ID</td></tr><tr><td>category_name</td><td>String</td><td>否</td><td>分类名</td></tr><tr><td>sort_by</td><td>String</td><td>否</td><td>排序字段，可选值：created_at、updated_at</td></tr><tr><td>desc</td><td>Boolean</td><td>否</td><td>true-降序排列 false-升序排列</td></tr><tr><td>page</td><td>Int</td><td>否</td><td>返回第几页，从1开始，默认为1</td></tr><tr><td>count</td><td>Int</td><td>否</td><td>每页大小，范围为[1,200]，默认为20</td></tr></tbody></table></figure><ul><li>callback:回调接口，成功则返回SearchTrackListV2对象，失败则返回错误原因</li></ul><p>&nbsp;</p><h2><a name='header-n1807' class='md-header-anchor '></a>3.10 推荐接口</h2><h3><a name='header-n1808' class='md-header-anchor '></a>3.10.1 获取运营人员在发现页配置的分类维度专辑推荐模块的列表</h3><p><code>对应如下喜马拉雅App功能：
喜马拉雅发现页的推荐标签页下的听新闻、听小说、听脱口秀等内容</code></p><p><strong>接口签名：</strong></p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n1811" mdtype="fences">public static void getDiscoveryRecommendAlbums(final Map&lt;String, String&gt; specificParams,
    final IDataCallBack&lt;DiscoveryRecommendAlbumsList&gt; callback) {
</pre><p><strong>参数说明：</strong></p><ul><li><p>specificParams: 字段介绍如下</p><figure><table><thead><tr><th>字段名</th><th>类型</th><th>必填</th><th>描述</th></tr></thead><tbody><tr><td>display_count</td><td>Int</td><td>否</td><td>每个分类维度专辑推荐模块包含的专辑数，不填则默认为3，取值区间为[1, 20]</td></tr></tbody></table></figure></li><li><p>callback:回调接口，成功则返回DiscoveryRecommendAlbumsList对象，失败则返回错误原因</p></li></ul><p><strong>参考代码：</strong></p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n1830" mdtype="fences">Map&lt;String, String&gt; map = new HashMap&lt;String, String&gt;();
map.put(DTransferConstants.DISPLAY_COUNT, 3 + "");
CommonRequest.getDiscoveryRecommendAlbums(map,
    new IDataCallBack&lt;DiscoveryRecommendAlbumsList&gt;());
</pre><h3><a name='header-n1831' class='md-header-anchor '></a>3.10.2 获取运营人员为某个分类配置的标签维度专辑推荐模块列表</h3><p>对应如下喜马拉雅App功能：<br>
从喜马拉雅发现页点击某个分类（如有声小说），然后在该分类下选择“推荐”标签页，
该标签页下有一些运营人员配置的专辑推荐模块（如有声小说下有热播小说、女生最爱、
男生最爱等专辑推荐模块）`</p><p><strong>接口签名：</strong></p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n1834" mdtype="fences">public static void getCategoryRecommendAlbums(
    final Map&lt;String, String&gt; specificParams,
    final IDataCallBack&lt;CategoryRecommendAlbumsList&gt; callback);
</pre><p><strong>参数说明：</strong></p><ul><li>specificParams: 字段介绍如下</li></ul><figure><table><thead><tr><th style='text-align:left;' >字段名</th><th style='text-align:left;' >类型</th><th style='text-align:left;' >必填</th><th style='text-align:left;' >描述</th></tr></thead><tbody><tr><td style='text-align:left;' >category_id</td><td style='text-align:left;' >Int</td><td style='text-align:left;' >是</td><td style='text-align:left;' >分类ID，指定分类</td></tr><tr><td style='text-align:left;' >display_count</td><td style='text-align:left;' >Int</td><td style='text-align:left;' >否</td><td style='text-align:left;' >每个专辑推荐模块默认显示的专辑数，不填则默认为3，取值区间为[1, 20]</td></tr></tbody></table></figure><ul><li>callback:回调接口，成功则返回CategoryRecommendAlbumsList对象，失败则返回错误原因</li></ul><p><strong>参考代码：</strong></p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n1859" mdtype="fences">Map&lt;String, String&gt; map = new HashMap&lt;String, String&gt;();
map.put(DTransferConstants.CATEGORY_ID, category_id);
map.put(DTransferConstants.DISPLAY_COUNT ,display_count);
CommonRequest.getCategoryRecommendAlbums(map,
    new IDataCallBack&lt;CategoryRecommendAlbumsList&gt;());
</pre><h3><a name='header-n1860' class='md-header-anchor '></a>3.10.3 获取某个专辑的相关推荐</h3><p><strong>接口签名：</strong></p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n1862" mdtype="fences">public static void getRelativeAlbums(Map&lt;String, String&gt; specificParams,
    final IDataCallBack&lt;RelativeAlbums&gt; callback)
</pre><p><strong>参数说明：</strong></p><ul><li><p>specificParams: 字段介绍如下</p><figure><table><thead><tr><th>字段名</th><th>类型</th><th>必填</th><th>描述</th></tr></thead><tbody><tr><td>albumId</td><td>Long</td><td>是</td><td>要搜索获得相关推荐的专辑id</td></tr></tbody></table></figure></li><li><p>callback:回调接口，成功则返回RelativeAlbums对象，失败则返回错误原因</p></li></ul><p><strong>参考代码：</strong></p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n1881" mdtype="fences">Map&lt;String, String&gt; map = new HashMap&lt;String, String&gt;();
map.put(DTransferConstants.ALBUMID, albumId);
CommonRequest.getRelativeAlbums(map, new IDataCallBack&lt;RelativeAlbums&gt;()
</pre><h3><a name='header-n1882' class='md-header-anchor '></a>3.10.4 获取下载听模块的推荐下载专辑</h3><p><strong>接口签名：</strong></p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n1884" mdtype="fences">public static void getRecommendDownloadList(Map&lt;String, String&gt; specificParams,
    final IDataCallBack&lt;RecommendDownload&gt; callback)
</pre><p><strong>参数说明：</strong></p><ul><li><p>specificParams: 字段介绍如下</p><figure><table><thead><tr><th>字段名</th><th>类型</th><th>必填</th><th>描述</th></tr></thead><tbody><tr><td>calc_dimension</td><td>Int</td><td>是</td><td>计算维度，现支持经典（0），最火（1），最新（2），播放最多（3）</td></tr><tr><td>page</td><td>Int</td><td>否</td><td>返回第几页，必须大于等于1，不填默认为1</td></tr></tbody></table></figure></li><li><p>callback:回调接口，成功则返回RelativeAlbums对象，失败则返回错误原因</p></li></ul><p><strong>参考代码：</strong></p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n1908" mdtype="fences">Map&lt;String, String&gt; map = new HashMap&lt;String, String&gt;();
map.put(DTransferConstants.CALC_DIMENSION, "0");
CommonRequest.getRecommendDownloadList(map, new IDataCallBack&lt;RecommendDownload&gt;());
</pre><h3><a name='header-n1909' class='md-header-anchor '></a>3.10.5 获取某个声音的相关推荐专辑</h3><p><strong>接口签名：</strong></p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n1911" mdtype="fences">public static void getRelativeAlbumsUseTrackId(Map&lt;String, String&gt; specificParams,
    final IDataCallBack&lt;RelativeAlbums&gt; callback)
</pre><p><strong>参数说明：</strong></p><ul><li><p>specificParams：字段介绍如下</p><figure><table><thead><tr><th>字段名</th><th>类型</th><th>必填</th><th>描述</th></tr></thead><tbody><tr><td>trackId</td><td>Long</td><td>是</td><td>要获得相关推荐的声音id</td></tr></tbody></table></figure></li><li><p>callback：回调接口，成功则返回RelativeAlbums对象，失败则返回错误原因</p></li></ul><p><strong>参考代码：</strong></p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n1930" mdtype="fences">Map&lt;String, String&gt; map = new HashMap&lt;String, String&gt;();
map.put(DTransferConstants.TRACKID, trackId);
CommonRequest.getRelativeAlbumsUseTrackId(map, new IDataCallBack&lt;RelativeAlbums&gt;());
</pre><h3><a name='header-n1931' class='md-header-anchor '></a>3.10.6 获取猜你喜欢专辑</h3><p><strong>接口签名：</strong></p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n1933" mdtype="fences">public static void getGuessLikeAlbum(Map&lt;String, String&gt; specificParams,
			final IDataCallBack&lt;GussLikeAlbumList&gt; callback)
</pre><p><strong>参数说明：</strong></p><ul><li><p>specificParams：字段介绍如下</p><figure><table><thead><tr><th>字段名</th><th>类型</th><th>必填</th><th>描述</th></tr></thead><tbody><tr><td>like_count</td><td>Int</td><td>否</td><td>返回几条，不填则默认为3，取值区间为[1, 50]</td></tr></tbody></table></figure></li><li><p>callback：回调接口，成功则返回GussLikeAlbumList对象，失败则返回错误原因</p></li></ul><p><strong>参考代码：</strong></p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n1952" mdtype="fences">Map&lt;String, String&gt; map = new HashMap&lt;String, String&gt;();
map.put(DTransferConstants.LIKE_COUNT, "3");
CommonRequest.getGuessLikeAlbum(specificParams, new IDataCallBack&lt;GussLikeAlbumList&gt;());
</pre><h2><a name='header-n1954' class='md-header-anchor '></a>3.12 定制化接口</h2><h3><a name='header-n1955' class='md-header-anchor '></a>3.12.1 获取合作方自定制的专辑类听单</h3><p><strong>接口签名：</strong></p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n1957" mdtype="fences">public static void getCustomizedAlbumColumns(
        final Map&lt;String, String&gt; params ,
        IDataCallBack&lt;CustomizedAlbumList&gt; callback);
</pre><p><strong>参数说明：</strong></p><ul><li>specificParams:</li></ul><figure><table><thead><tr><th style='text-align:left;' >字段名</th><th style='text-align:left;' >类型</th><th style='text-align:left;' >必填</th><th style='text-align:left;' >描述</th></tr></thead><tbody><tr><td style='text-align:left;' >publish_date_start</td><td style='text-align:left;' >String</td><td style='text-align:left;' >否</td><td style='text-align:left;' >发布起始日期，与publish_date_end一起组成日期区间，限定只返回指定发布时间区间内的内容详情，格式为&quot;yyyyMMdd&quot;，比如&quot;20161123&quot;。publish_date_start与publish_date_end必须成对出现。</td></tr><tr><td style='text-align:left;' >publish_date_end</td><td style='text-align:left;' >String</td><td style='text-align:left;' >否</td><td style='text-align:left;' >发布截止日期，与publish_date_start一起组成日期区间，限定只返回指定发布时间区间内的内容详情，格式为&quot;yyyyMMdd&quot;，比如&quot;20161124&quot;。publish_date_start与publish_date_end必须成对出现。</td></tr><tr><td style='text-align:left;' >dimensions</td><td style='text-align:left;' >String</td><td style='text-align:left;' >否</td><td style='text-align:left;' >维度（在自运营内容网站上配置）过滤参数，限定只返回满足维度过滤条件的听单内容详情。格式为：dimId1:dimVal1;dimId2:dimVal2 ,比如有一个ID为1的维度表示孕期第几天，有一个ID为2的维度表示内容标签，则可以有&quot;1:7;2:音乐&quot;，返回的是孕期第7天且内容标签为音乐的内容详情</td></tr><tr><td style='text-align:left;' >with_dimensions</td><td style='text-align:left;' >Bool</td><td style='text-align:left;' >否</td><td style='text-align:left;' >返回值是否带上维度配置数据，不填则默认为false</td></tr><tr><td style='text-align:left;' >page</td><td style='text-align:left;' >Int</td><td style='text-align:left;' >否</td><td style='text-align:left;' >返回第几页，必须大于等于1，不填默认为1</td></tr><tr><td style='text-align:left;' >count</td><td style='text-align:left;' >Int</td><td style='text-align:left;' >否</td><td style='text-align:left;' >每页多少条，必须大于等于1，不填默认为20，最大不超过200</td></tr></tbody></table></figure><ul><li>callback：回调接口，成功则返回CustomizedAlbumList对象，失败则返回错误原因</li></ul><p><strong>参考代码：</strong></p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n2002" mdtype="fences">Map&lt;String, String&gt; map = new HashMap&lt;String, String&gt;();
CommonRequest.getCustomizedAlbumColumns(specificParams, new IDataCallBack&lt;CustomizedAlbumList&gt;());
</pre><h3><a name='header-n2003' class='md-header-anchor '></a>3.12.2 获取合作方自定制的声音类听单。</h3><p><strong>接口签名：</strong></p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n2005" mdtype="fences">public static void getCustomizedTrackColumns(
        final Map&lt;String, String&gt; params ,
        IDataCallBack&lt;CustomizedTrackList&gt; callback);
</pre><p><strong>参数说明：</strong></p><ul><li>specificParams：</li></ul><figure><table><thead><tr><th style='text-align:left;' >字段名</th><th style='text-align:left;' >类型</th><th style='text-align:left;' >必填</th><th style='text-align:left;' >描述</th></tr></thead><tbody><tr><td style='text-align:left;' >publish_date_start</td><td style='text-align:left;' >String</td><td style='text-align:left;' >否</td><td style='text-align:left;' >发布起始日期，与publish_date_end一起组成日期区间，限定只返回指定发布时间区间内的内容详情，格式为&quot;yyyyMMdd&quot;，比如&quot;20161123&quot;。publish_date_start与publish_date_end必须成对出现。</td></tr><tr><td style='text-align:left;' >publish_date_end</td><td style='text-align:left;' >String</td><td style='text-align:left;' >否</td><td style='text-align:left;' >发布截止日期，与publish_date_start一起组成日期区间，限定只返回指定发布时间区间内的内容详情，格式为&quot;yyyyMMdd&quot;，比如&quot;20161124&quot;。publish_date_start与publish_date_end必须成对出现。</td></tr><tr><td style='text-align:left;' >dimensions</td><td style='text-align:left;' >String</td><td style='text-align:left;' >否</td><td style='text-align:left;' >维度（在自运营内容网站上配置）过滤参数，限定只返回满足维度过滤条件的听单内容详情。格式为：dimId1:dimVal1;dimId2:dimVal2比如有一个ID为1的维度表示孕期第几天，有一个ID为2的维度表示内容标签，则可以有&quot;1:7;2:音乐&quot;，返回的是孕期第7天且内容标签为音乐的内容详情</td></tr><tr><td style='text-align:left;' >with_dimensions</td><td style='text-align:left;' >Bool</td><td style='text-align:left;' >否</td><td style='text-align:left;' >返回值是否带上维度配置数据，不填则默认为false</td></tr><tr><td style='text-align:left;' >page</td><td style='text-align:left;' >Int</td><td style='text-align:left;' >否</td><td style='text-align:left;' >返回第几页，必须大于等于1，不填默认为1</td></tr><tr><td style='text-align:left;' >count</td><td style='text-align:left;' >Int</td><td style='text-align:left;' >否</td><td style='text-align:left;' >每页多少条，必须大于等于1，不填默认为20，最大不超过200</td></tr></tbody></table></figure><ul><li>callback：回调接口，成功则返回CustomizedTrackList对象，失败则返回错误原因</li></ul><p><strong>参考代码：</strong></p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n2050" mdtype="fences">Map&lt;String, String&gt; map = new HashMap&lt;String, String&gt;();
CommonRequest.getCustomizedTrackColumns(map, new IDataCallBack&lt;CustomizedTrackList&gt;() {
    @Override
    public void onSuccess(CustomizedTrackList object) {
    }
    @Override
    public void onError(int code, String message) {
    }
});
</pre><h3><a name='header-n2051' class='md-header-anchor '></a>3.12.3 根据自定义专辑听单ID和分页参数获取自定义专辑听单内容详情，自定义专辑听单下可包含专辑或者自定义声音听单（见自运营内容网站）</h3><p><strong>接口签名：</strong></p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n2053" mdtype="fences">public static void getCustomizedAlbumColumDetail(
            final  Map&lt;String ,String&gt; params ,
            IDataCallBack&lt;CustomizedAlbumColumnDetail&gt; callBack);

// 可以通过如下方式将 ColumnAlbumItem 转化为普通的album 会丢弃一些属性
XmCustomizedModelUtil.customizedAlbumToAlbum(ColumnAlbumItem columnItems)
或者XmCustomizedModelUtil.customizedAlbumListToAlbumList(List&lt;ColumnAlbumItem&gt; columnItemsList)
</pre><p><strong>参数说明：</strong></p><ul><li>specificParams：</li></ul><figure><table><thead><tr><th style='text-align:left;' >字段名</th><th style='text-align:left;' >类型</th><th style='text-align:left;' >必填</th><th style='text-align:left;' >描述</th></tr></thead><tbody><tr><td style='text-align:left;' >id</td><td style='text-align:left;' >Int</td><td style='text-align:left;' >是</td><td style='text-align:left;' >自定义声音听单ID</td></tr><tr><td style='text-align:left;' >category_id</td><td style='text-align:left;' >Int</td><td style='text-align:left;' >否</td><td style='text-align:left;' >分类ID，如果设置了则限制只返回指定分类下的内容详情</td></tr><tr><td style='text-align:left;' >paid_filter_type</td><td style='text-align:left;' >Int</td><td style='text-align:left;' >否</td><td style='text-align:left;' >付费专辑过滤字段，-1 –无此属性，0 –免费专辑，1 –付费专辑。如果不传该字段，则不根据该字段过滤。</td></tr><tr><td style='text-align:left;' >publish_date_start</td><td style='text-align:left;' >String</td><td style='text-align:left;' >否</td><td style='text-align:left;' >发布起始日期，与publish_date_end一起组成日期区间，限定只返回指定发布时间区间内的内容详情，格式为&quot;yyyyMMdd&quot;，比如&quot;20161123&quot;。publish_date_start与publish_date_end必须成对出现。</td></tr><tr><td style='text-align:left;' >publish_date_end</td><td style='text-align:left;' >String</td><td style='text-align:left;' >否</td><td style='text-align:left;' >发布截止日期，与publish_date_start一起组成日期区间，限定只返回指定发布时间区间内的内容详情，格式为&quot;yyyyMMdd&quot;，比如&quot;20161124&quot; publish_date_start与publish_date_end必须成对出现。</td></tr><tr><td style='text-align:left;' >dimensions</td><td style='text-align:left;' >String</td><td style='text-align:left;' >否</td><td style='text-align:left;' >维度（在自运营内容网站上配置）过滤参数，限定只返回满足维度过滤条件的听单内容详情。格式为：dimId1:dimVal1;dimId2:dimVal2 ,比如有一个ID为1的维度表示孕期第几天，有一个ID为2的维度表示内容标签，则可以有&quot;1:7;2:音乐&quot;，返回的是孕期第7天且内容标签为音乐的内容详情</td></tr><tr><td style='text-align:left;' >page</td><td style='text-align:left;' >Int</td><td style='text-align:left;' >否</td><td style='text-align:left;' >返回第几页，必须大于等于1，不填默认为1</td></tr><tr><td style='text-align:left;' >count</td><td style='text-align:left;' >Int</td><td style='text-align:left;' >否</td><td style='text-align:left;' >每页多少条，必须大于等于1，不填默认为20，最大不超过200</td></tr></tbody></table></figure><ul><li>callback：回调接口，成功则返回 CustomizedAlbumColumnDetail 对象，失败则返回错误原因</li></ul><p><strong>参考代码：</strong></p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n2108" mdtype="fences">Map&lt;String ,String&gt; maps2 = new HashMap&lt;&gt;();
maps2.put("id" ,"127");
CommonRequest.getCustomizedAlbumColumDetail(maps2, new IDataCallBack&lt;CustomizedAlbumColumnDetail&gt;();
</pre><h3><a name='header-n2109' class='md-header-anchor '></a>3.12.4 根据自定义声音听单ID和分页参数获取自定义声音听单内容详情</h3><p><strong>接口签名：</strong></p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n2111" mdtype="fences">public static void getCustomizedTrackColumDetail(
                final  Map&lt;String ,String&gt; params ,
                IDataCallBack&lt;CustomizedTrackColumnDetail&gt; callBack);

`如果要进行播放可以使用
XmCustomizedModelUtil.customizedTrackToTrack(ColumnItems columnItems)
或者XmCustomizedModelUtil.customizedTrackListToTrackList(List&lt;ColumnItems&gt; columnItemsList)
进行转换`
</pre><p><strong>参数说明：</strong></p><ul><li>specificParams：</li></ul><figure><table><thead><tr><th style='text-align:left;' >字段名</th><th style='text-align:left;' >类型</th><th style='text-align:left;' >必填</th><th style='text-align:left;' >描述</th></tr></thead><tbody><tr><td style='text-align:left;' >id</td><td style='text-align:left;' >Int</td><td style='text-align:left;' >是</td><td style='text-align:left;' >自定义声音听单ID</td></tr><tr><td style='text-align:left;' >category_id</td><td style='text-align:left;' >Int</td><td style='text-align:left;' >否</td><td style='text-align:left;' >分类ID，如果设置了则限制只返回指定分类下的内容详情</td></tr><tr><td style='text-align:left;' >publish_date_start</td><td style='text-align:left;' >String</td><td style='text-align:left;' >否</td><td style='text-align:left;' >发布起始日期，与publish_date_end一起组成日期区间，限定只返回指定发布时间区间内的内容详情，格式为&quot;yyyyMMdd&quot;，比如&quot;20161123&quot;。publish_date_start与publish_date_end必须成对出现。</td></tr><tr><td style='text-align:left;' >publish_date_end</td><td style='text-align:left;' >String</td><td style='text-align:left;' >否</td><td style='text-align:left;' >发布截止日期，与publish_date_start一起组成日期区间，限定只返回指定发布时间区间内的内容详情，格式为&quot;yyyyMMdd&quot;，比如&quot;20161124&quot;。publish_date_start与publish_date_end必须成对出现。</td></tr><tr><td style='text-align:left;' >dimensions</td><td style='text-align:left;' >String</td><td style='text-align:left;' >否</td><td style='text-align:left;' >维度（在自运营内容网站上配置）过滤参数，限定只返回满足维度过滤条件的听单内容详情。格式为：dimId1:dimVal1;dimId2:dimVal2 ,比如有一个ID为1的维度表示孕期第几天，有一个ID为2的维度表示内容标签，则可以有&quot;1:7;2:音乐&quot;，返回的是孕期第7天且内容标签为音乐的内容详情</td></tr><tr><td style='text-align:left;' >page</td><td style='text-align:left;' >Int</td><td style='text-align:left;' >否</td><td style='text-align:left;' >返回第几页，必须大于等于1，不填默认为1</td></tr><tr><td style='text-align:left;' >count</td><td style='text-align:left;' >Int</td><td style='text-align:left;' >否</td><td style='text-align:left;' >每页多少条，必须大于等于1，不填默认为20，最大不超过200</td></tr></tbody></table></figure><ul><li>callback：回调接口，成功则返回 CustomizedTrackColumnDetail 对象，失败则返回错误原因</li></ul><p><strong>参考代码：</strong></p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n2161" mdtype="fences">Map&lt;String ,String&gt; maps2 = new HashMap&lt;&gt;();
maps2.put("id" ,"169");
CommonRequest.getCustomizedTrackColumDetail(maps2, new IDataCallBack&lt;CustomizedTrackColumnDetail&gt;());
</pre><h3><a name='header-n2163' class='md-header-anchor '></a>3.12.5 根据搜索条件和分页参数，搜索所有声音听单下符合条件的声音列表</h3><p><strong>接口签名：</strong></p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n2165" mdtype="fences">public static void searchTracks(final  Map&lt;String ,String&gt; params , IDataCallBack&lt;CustomizedTrackColumnDetail&gt; callBack);

`如果要进行播放可以使用
XmCustomizedModelUtil.customizedTrackToTrack(ColumnItems columnItems)
或者XmCustomizedModelUtil.customizedTrackListToTrackList(List&lt;ColumnItems&gt; columnItemsList)
进行转换`
</pre><p><strong>参数说明：</strong></p><ul><li>specificParams：</li></ul><figure><table><thead><tr><th style='text-align:left;' >字段名</th><th style='text-align:left;' >类型</th><th style='text-align:left;' >必填</th><th style='text-align:left;' >描述</th></tr></thead><tbody><tr><td style='text-align:left;' >q</td><td style='text-align:left;' >String</td><td style='text-align:left;' >否</td><td style='text-align:left;' >搜索关键词，如果设置了则限制只返回满足关键词过滤条件的听单内容详情</td></tr><tr><td style='text-align:left;' >category_id</td><td style='text-align:left;' >Int</td><td style='text-align:left;' >否</td><td style='text-align:left;' >分类ID，如果设置了则限制只返回指定分类下的内容详情</td></tr><tr><td style='text-align:left;' >publish_date_start</td><td style='text-align:left;' >String</td><td style='text-align:left;' >否</td><td style='text-align:left;' >发布起始日期，与publish_date_end一起组成日期区间，限定只返回指定发布时间区间内的内容详情，格式为&quot;yyyyMMdd&quot;，比如&quot;20161123&quot;。publish_date_start与publish_date_end必须成对出现。</td></tr><tr><td style='text-align:left;' >publish_date_end</td><td style='text-align:left;' >String</td><td style='text-align:left;' >否</td><td style='text-align:left;' >发布截止日期，与publish_date_start一起组成日期区间，限定只返回指定发布时间区间内的内容详情，格式为&quot;yyyyMMdd&quot;，比如&quot;20161124&quot;。publish_date_start与publish_date_end必须成对出现。</td></tr><tr><td style='text-align:left;' >dimensions</td><td style='text-align:left;' >String</td><td style='text-align:left;' >否</td><td style='text-align:left;' >维度（在自运营内容网站上配置）过滤参数，限定只返回满足维度过滤条件的听单内容详情。格式为：dimId1:dimVal1;dimId2:dimVal2 比如有一个ID为1的维度表示孕期第几天，有一个ID为2的维度表示内容标签，则可以有&quot;1:7;2:音乐&quot;，返回的是孕期第7天且内容标签为音乐的内容详情</td></tr><tr><td style='text-align:left;' >with_dimensions</td><td style='text-align:left;' >Bool</td><td style='text-align:left;' >否</td><td style='text-align:left;' >返回值是否带上维度配置数据，不填则默认为false</td></tr><tr><td style='text-align:left;' >page</td><td style='text-align:left;' >Int</td><td style='text-align:left;' >否</td><td style='text-align:left;' >返回第几页，必须大于等于1，不填默认为1</td></tr><tr><td style='text-align:left;' >count</td><td style='text-align:left;' >Int</td><td style='text-align:left;' >否</td><td style='text-align:left;' >每页多少条，必须大于等于1，不填默认为20，最大不超过200</td></tr></tbody></table></figure><ul><li>callback：回调接口，成功则返回 CustomizedTrackColumnDetail 对象，失败则返回错误原因</li></ul><p><strong>参考代码：</strong></p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n2220" mdtype="fences">Map&lt;String ,String&gt; maps = new HashMap&lt;&gt;();
maps.put("q" , "测试");
CommonRequest.searchTracks(maps, new IDataCallBack&lt;CustomizedTrackColumnDetail&gt;() {
    @Override
    public void onSuccess(CustomizedTrackColumnDetail object) {

    }

    @Override
    public void onError(int code, String message) {

    }
});
</pre><h3><a name='header-n2221' class='md-header-anchor '></a>3.12.6 根据声音ID和该声音所属声音听单ID获取声音详情</h3><p><strong>接口签名：</strong></p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n2223" mdtype="fences">public static void getCustomizedTrackDetail(Map&lt;String, String&gt; specificParams , IDataCallBack&lt;ColumnItems&gt; callBack);

`如果要进行播放可以使用
XmCustomizedModelUtil.customizedTrackToTrack(ColumnItems columnItems)
或者XmCustomizedModelUtil.customizedTrackListToTrackList(List&lt;ColumnItems&gt; columnItemsList)
进行转换`
</pre><p><strong>参数说明：</strong></p><ul><li>specificParams：</li></ul><figure><table><thead><tr><th style='text-align:left;' >字段名</th><th style='text-align:left;' >类型</th><th style='text-align:left;' >必填</th><th style='text-align:left;' >描述</th></tr></thead><tbody><tr><td style='text-align:left;' >track_id</td><td style='text-align:left;' >Long</td><td style='text-align:left;' >是</td><td style='text-align:left;' >声音ID</td></tr><tr><td style='text-align:left;' >track_column_id</td><td style='text-align:left;' >Long</td><td style='text-align:left;' >是</td><td style='text-align:left;' >声音所属听单ID</td></tr><tr><td style='text-align:left;' >with_dimensions</td><td style='text-align:left;' >Bool</td><td style='text-align:left;' >否</td><td style='text-align:left;' >返回值是否带上维度配置数据，不填则默认为false</td></tr></tbody></table></figure><ul><li>callback：回调接口，成功则返回 ColumnItems 对象，失败则返回错误原因</li></ul><h3><a name='header-n2252' class='md-header-anchor '></a>3.12.7 根据搜索条件和分页参数，搜索所有专辑或声音听单，注意返回结果已去重。</h3><p><strong>接口签名：</strong></p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n2254" mdtype="fences">public static void searchCustomizedTrackOrAlbum(Map&lt;String, String&gt; specificParams , IDataCallBack&lt;CustomizedSearchList&gt; callBack);
</pre><p><strong>参数说明：</strong></p><ul><li>specificParams：</li></ul><figure><table><thead><tr><th style='text-align:left;' >字段名</th><th style='text-align:left;' >类型</th><th style='text-align:left;' >必填</th><th style='text-align:left;' >描述</th></tr></thead><tbody><tr><td style='text-align:left;' >q</td><td style='text-align:left;' >String</td><td style='text-align:left;' >否</td><td style='text-align:left;' >搜索关键词，如果设置了则限制只返回满足关键词过滤条件的听单内容详情</td></tr><tr><td style='text-align:left;' >result_content_type</td><td style='text-align:left;' >String</td><td style='text-align:left;' >是</td><td style='text-align:left;' >搜索结果内容类型：album -专辑，trackColumn -声音听单</td></tr><tr><td style='text-align:left;' >category_id</td><td style='text-align:left;' >Int</td><td style='text-align:left;' >否</td><td style='text-align:left;' >分类ID，如果设置了则限制只返回指定分类下的内容详情</td></tr><tr><td style='text-align:left;' >paid_filter_type</td><td style='text-align:left;' >Int</td><td style='text-align:left;' >否</td><td style='text-align:left;' >付费专辑过滤字段，-1 –无此属性，0 –免费专辑，1 –付费专辑。如果不传该字段，则不根据该字段过滤。</td></tr><tr><td style='text-align:left;' >publish_date_start</td><td style='text-align:left;' >String</td><td style='text-align:left;' >否</td><td style='text-align:left;' >发布起始日期，与publish_date_end一起组成日期区间，限定只返回指定发布时间区间内的内容详情，格式为&quot;yyyyMMdd&quot;，比如&quot;20161123&quot;。publish_date_start与publish_date_end必须成对出现。</td></tr><tr><td style='text-align:left;' >publish_date_end</td><td style='text-align:left;' >String</td><td style='text-align:left;' >否</td><td style='text-align:left;' >发布截止日期，与publish_date_start一起组成日期区间，限定只返回指定发布时间区间内的内容详情，格式为&quot;yyyyMMdd&quot;，比如&quot;20161124&quot;。publish_date_start与publish_date_end必须成对出现。</td></tr><tr><td style='text-align:left;' >dimension_filter_type</td><td style='text-align:left;' >Int</td><td style='text-align:left;' >否</td><td style='text-align:left;' >维度过滤类型：1-交集，2-并集。默认交集。交集是指下面的dimensions多维度条件按照AND进行过滤。并集是指下面的dimensions多维度条件按照OR进行过滤</td></tr><tr><td style='text-align:left;' >dimensions</td><td style='text-align:left;' >String</td><td style='text-align:left;' >否</td><td style='text-align:left;' >维度（在自运营内容网站上配置）过滤参数，限定只返回满足维度过滤条件的听单内容详情。格式为：dimId1:dimVal1;dimId2:dimVal2 比如在dimension_filter_type为1前提下有一个ID为1的维度表示孕期第几天，有一个ID为2的维度表示内容标签，如&quot;1:7;2:音乐&quot;，返回的是孕期第7天且内容标签为音乐的内容详情。当维度类型为数值类型时，维度值可以是一个数值范围，查询的是符合数值范围的内容详情，格式为：dimId1:dimVal1-dimVal2 ,比如在dimension_filter_type为1前提下&quot;1:7-10;2:音&quot;，返回的是孕期第7天至第10天且内容标签为音乐的内容详情。</td></tr><tr><td style='text-align:left;' >calc_dimension</td><td style='text-align:left;' >Int</td><td style='text-align:left;' >否</td><td style='text-align:left;' >返回结果排序维度：2-最新创建在前，3-最多播放在前，默认为2</td></tr><tr><td style='text-align:left;' >with_dimensions</td><td style='text-align:left;' >Bool</td><td style='text-align:left;' >否</td><td style='text-align:left;' >返回值是否带上维度配置数据，不填则默认为false</td></tr><tr><td style='text-align:left;' >page</td><td style='text-align:left;' >Int</td><td style='text-align:left;' >否</td><td style='text-align:left;' >返回第几页，必须大于等于1，不填默认为1</td></tr><tr><td style='text-align:left;' >count</td><td style='text-align:left;' >Int</td><td style='text-align:left;' >否</td><td style='text-align:left;' >每页多少条，必须大于等于1，不填默认为20，最大不超过200</td></tr></tbody></table></figure><ul><li>callback：回调接口，成功则返回 CustomizedSearchList 对象，失败则返回错误原因</li></ul><p>&nbsp;</p><p>&nbsp;</p><h2><a name='header-n2330' class='md-header-anchor '></a>3.13 用户播放历史接口</h2><h3><a name='header-n2331' class='md-header-anchor '></a>3.13.1 根据用户ID获取用户播放云历史记录</h3><p>根据用户ID获取用户播放云历史记录（包括用户是否播放过这些声音，以及播放到什么位置等信息）。目前只对点播音频做云历史。（每个用户历史记录的上限是100条）</p><p>限制！！！
用户必须处于登陆状态（用户进行过OAuth2服务端标准登陆授权，具体请参考喜马拉雅-OAuth2标准授权接口文档）</p><p><strong>接口签名：</strong></p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n2335" mdtype="fences">public static void getPlayHistoryByUid(final  Map&lt;String ,String&gt; params , IDataCallBack&lt;PlayHistoryList&gt; callBack)
</pre><p><strong>参数说明：</strong></p><ul><li>callback：回调接口，成功则返回PlayHistoryList对象，失败则返回错误原因</li></ul><h3><a name='header-n2341' class='md-header-anchor '></a>3.13.2 用户上传播放云历史记录</h3><p>限制！！！
用户必须处于登陆状态（用户进行过OAuth2服务端标准登陆授权，具体请参考喜马拉雅-OAuth2标准授权接口文档）</p><p><strong>接口签名：</strong></p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n2344" mdtype="fences">public static void uploadHistory(final  Map&lt;String ,String&gt; params , IDataCallBack&lt;PostResponse&gt; callBack)
</pre><p><strong>参数说明：</strong></p><ul><li><p>specificParams：字段介绍如下</p><figure><table><thead><tr><th>字段名</th><th>类型</th><th>必填</th><th>描述</th></tr></thead><tbody><tr><td>content_type</td><td>Int</td><td>否</td><td>1-点播（不传时候的默认值），2-广播</td></tr><tr><td>album_id</td><td>Int</td><td>否</td><td>content_type=1时候必填，表示专辑ID</td></tr><tr><td>track_id</td><td>Int</td><td>否</td><td>content_type=1时候必填，为声音ID，表示具体播放专辑里哪条声音</td></tr><tr><td>radio_id</td><td>Int</td><td>否</td><td>content_type=2时候必填，表示广播电台ID</td></tr><tr><td>schedule_id</td><td>Int</td><td>否</td><td>content_type=2时候必填，表示收听的广播节目时间表ID</td></tr><tr><td>break_second</td><td>Int</td><td>是</td><td>相对于音频开始位置的播放跳出位置，单位为秒。比如当前音频总时长60s，本次播放到音频第25s处就退出或者切到下一首，那么break_second就是25</td></tr><tr><td>play_begin_at</td><td>Long</td><td>否</td><td>开始播放时刻，Unix毫秒数时间戳</td></tr><tr><td>play_end_at</td><td>Long</td><td>否</td><td>结束播放时刻，Unix毫秒数时间戳</td></tr></tbody></table></figure></li></ul><ul><li>callback：回调接口，成功则返回PostResponse对象，失败则返回错误原因</li></ul><h3><a name='header-n2400' class='md-header-anchor '></a>3.13.3 用户批量上传播放云历史记录</h3><p>限制！！！
用户必须处于登陆状态（用户进行过OAuth2服务端标准登陆授权，具体请参考喜马拉雅-OAuth2标准授权接口文档）</p><p><strong>接口签名：</strong></p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n2403" mdtype="fences">public static void batchUploadHistory(final  Map&lt;String ,String&gt; params , IDataCallBack&lt;PostResponse&gt; callBack)
</pre><p><strong>参数说明：</strong></p><ul><li><p>specificParams：字段介绍如下</p><figure><table><thead><tr><th>字段名</th><th>类型</th><th>必填</th><th>描述</th></tr></thead><tbody><tr><td>play_history_records</td><td>Json Array</td><td>是</td><td>需要上传的播放数据列表，每条播放数据包含下列字段：<span>	</span><br/>content_type：1-点播，2-广播<span>	</span><br/>album_id：content_type=1时候必填，播放的专辑ID <br/>track_id：content_type=1时候必填，声音ID，表示具体播放专辑里哪条声音 <br/>radio_id：content_type=2时候必填，表示广播电台ID <br/>schedule_id：content_type=2时候必填，表示收听的广播节目时间表ID <span>	</span><br/>break_second: 相对于音频开始位置的播放跳出位置，单位为秒。比如当前音频总时长60s，本次播放到音频第25s处就退出或者切到下一首，那么break_second就是25 <br/>play_begin_at：开始播放时刻，Unix毫秒数时间戳<br/> play_end_at：结束播放时刻，Unix毫秒数时间戳</td></tr></tbody></table></figure></li><li><p>callback：回调接口，成功则返回PostResponse对象，失败则返回错误原因</p></li></ul><h3><a name='header-n2422' class='md-header-anchor '></a>3.13.4 用户批量删除播放云历史记录</h3><p>限制！！！
用户必须处于登陆状态（用户进行过OAuth2服务端标准登陆授权，具体请参考喜马拉雅-OAuth2标准授权接口文档）</p><p><strong>接口签名：</strong></p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n2425" mdtype="fences">public static void batchDeleHistory(final Map&lt;String ,String&gt; params ,IDataCallBack&lt;PostResponse&gt; callBack)
</pre><p><strong>参数说明：</strong></p><ul><li><p>specificParams：字段介绍如下</p><figure><table><thead><tr><th>字段名</th><th>类型</th><th>必填</th><th>描述</th></tr></thead><tbody><tr><td>play_history_records</td><td>JSON Array</td><td>是</td><td>点播播放历史数据列表：<br/> content_type：1-点播，2-广播 <br>album_id：content_type=1时不为空，表示专辑ID<br>track_id: content_type=1时不为空，表示声音ID<br>radio_id：content_type=2时不为空，表示电台ID<br>schedule_id: content_type=2时不为空，表示电台播放节目时间表ID<br>deleted_at：删除发生的时间点</td></tr></tbody></table></figure></li><li><p>callback：回调接口，成功则返回PostResponse对象，失败则返回错误原因</p></li></ul><h2><a name='header-n2444' class='md-header-anchor '></a>3.14 用户订阅接口</h2><h3><a name='header-n2446' class='md-header-anchor '></a>3.14.1 获取喜马拉雅用户的动态更新的订阅专辑列表</h3><p>限制！！！
用户必须处于登陆状态（用户进行过OAuth2服务端标准登陆授权，具体请参考喜马拉雅-OAuth2标准授权接口文档）</p><p><strong>接口签名：</strong></p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n2449" mdtype="fences">public static void getAlbumByUid(final  Map&lt;String ,String&gt; params , IDataCallBack&lt;SubscribeAlbumList&gt; callBack)
</pre><p><strong>参数说明：</strong></p><ul><li><p>specificParams：字段介绍如下</p><figure><table><thead><tr><th>字段名</th><th>类型</th><th>必填</th><th>描述</th></tr></thead><tbody><tr><td>updated_at</td><td>Long</td><td>是</td><td>Unix毫秒时间戳，表示获取updated_at更新时间点之前更新的offset条订阅专辑；（为0表示从当前时间点最新更新的第一条订阅专辑开始获取）</td></tr><tr><td>offset</td><td>Int</td><td>否</td><td>拉取updated_at时间点之前更新的订阅专辑数目，默认20，最多不超过200</td></tr></tbody></table></figure></li><li><p>callback：回调接口，成功则返回PostResponse对象，失败则返回错误原因</p></li></ul><h3><a name='header-n2473' class='md-header-anchor '></a>3.14.2 用户新增或取消已订阅专辑</h3><p>限制！！！
用户必须处于登陆状态（用户进行过OAuth2服务端标准登陆授权，具体请参考喜马拉雅-OAuth2标准授权接口文档）</p><p><strong>接口签名：</strong></p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n2476" mdtype="fences">public static void AddOrDelSubscribe(final Map&lt;String ,String&gt; params ,IDataCallBack&lt;PostResponse&gt; callBack)
</pre><p><strong>参数说明：</strong></p><ul><li><p>specificParams：字段介绍如下</p><figure><table><thead><tr><th>字段名</th><th>类型</th><th>必填</th><th>描述</th></tr></thead><tbody><tr><td>operation_type</td><td>Int</td><td>是</td><td>操作类型，现支持删除（0），新增（1）</td></tr><tr><td>album_id</td><td>Int</td><td>是</td><td>需要更新的订阅专辑ID</td></tr></tbody></table></figure></li><li><p>callback：回调接口，成功则返回PostResponse对象，失败则返回错误原因</p></li></ul><h3><a name='header-n2500' class='md-header-anchor '></a>3.14.3 用户批量新增已订阅专辑</h3><p>限制！！！
用户必须处于登陆状态（用户进行过OAuth2服务端标准登陆授权，具体请参考喜马拉雅-OAuth2标准授权接口文档）</p><p><strong>接口签名：</strong></p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n2503" mdtype="fences">public static void batchAddSubscribe(final Map&lt;String ,String&gt; params ,IDataCallBack&lt;PostResponse&gt; callBack)
</pre><p><strong>参数说明：</strong></p><ul><li><p>specificParams：字段介绍如下</p><figure><table><thead><tr><th>字段名</th><th>类型</th><th>必填</th><th>描述</th></tr></thead><tbody><tr><td>ids</td><td>Int[]</td><td>是</td><td>需要更新的订阅专辑ID列表，用英文逗号分隔，例如1001,1002,1003</td></tr></tbody></table></figure></li><li><p>callback：回调接口，成功则返回PostResponse对象，失败则返回错误原因</p></li></ul><h2><a name='header-n2522' class='md-header-anchor '></a>3.15 喜马拉雅付费内容接口</h2><h3><a name='header-n2523' class='md-header-anchor '></a>3.15.1 获取所有付费专辑</h3><p><strong>接口签名：</strong></p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n2525" mdtype="fences">public static void getAllPaidAlbums(final Map&lt;String ,String&gt; params ,IDataCallBack&lt;AlbumList&gt; callBack)
</pre><p><strong>参数说明：</strong></p><ul><li><p>specificParams：字段介绍如下</p><figure><table><thead><tr><th>字段名</th><th>类型</th><th>必填</th><th>描述</th></tr></thead><tbody><tr><td>page</td><td>Int</td><td>否</td><td>返回第几页，必须大于等于1，不填默认为1</td></tr><tr><td>count</td><td>Int</td><td>否</td><td>每页多少条，默认20，最多不超过200</td></tr></tbody></table></figure></li><li><p>callback：回调接口，成功则返回 AlbumList 对象，失败则返回错误原因</p></li></ul><h3><a name='header-n2549' class='md-header-anchor '></a>3.15.2 获取付费精品分类下的标签（或者叫热词）列表</h3><p><strong>接口签名：</strong></p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n2551" mdtype="fences">public static void getPaidTags(final Map&lt;String ,String&gt; params ,IDataCallBack&lt;TagList&gt; callBack)
</pre><p><strong>参数说明：</strong></p><ul><li>specificParams：不需传</li></ul><ul><li>callback：回调接口，成功则返回 TagList 对象，失败则返回错误原因</li></ul><h3><a name='header-n2561' class='md-header-anchor '></a>3.15.3 根据付费精品分类下的标签（或者叫热词）获取热门付费专辑列表</h3><p><strong>接口签名：</strong></p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n2563" mdtype="fences">public static void getPaidAlbumByTag(final Map&lt;String ,String&gt; params ,IDataCallBack&lt;AlbumList&gt; callBack)
</pre><p><strong>参数说明：</strong></p><ul><li><p>specificParams：字段介绍如下</p><figure><table><thead><tr><th>字段名</th><th>类型</th><th>必填</th><th>描述</th></tr></thead><tbody><tr><td>tag_name</td><td>String</td><td>否</td><td>付费精品分类下的标签（或者叫热词）：传空获取到的是热门推荐专辑列表</td></tr><tr><td>page</td><td>Int</td><td>否</td><td>返回第几页，必须大于等于1，不填默认为1</td></tr><tr><td>count</td><td>Int</td><td>否</td><td>每页多少条，默认20，最多不超过200</td></tr></tbody></table></figure></li><li><p>callback：回调接口，成功则返回 AlbumList 对象，失败则返回错误原因</p></li></ul><p>&nbsp;</p><h3><a name='header-n2592' class='md-header-anchor '></a>3.15.4 分页获取付费专辑下的声音列表（即分页浏览付费专辑下的声音列表）</h3><p><strong>接口签名：</strong></p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n2594" mdtype="fences">public static void getPaidTrackByAlbum(Map&lt;String, String&gt; specificParams, final IDataCallBack&lt;TrackList&gt; callback)
</pre><p><strong>参数说明：</strong></p><ul><li><p>specificParams：字段介绍如下</p><figure><table><thead><tr><th>字段名</th><th>类型</th><th>必填</th><th>描述</th></tr></thead><tbody><tr><td>album_id</td><td>Int</td><td>是</td><td>付费专辑ID</td></tr><tr><td>sort</td><td>String</td><td>否</td><td>&quot;asc&quot;表示喜马拉雅正序，&quot;desc&quot;表示喜马拉雅倒序，&quot;time_asc&quot;表示时间升序，&quot;time_desc&quot;表示时间降序，默认为&quot;asc&quot;</td></tr><tr><td>page</td><td>Int</td><td>否</td><td>当前第几页，不填默认为1</td></tr><tr><td>count</td><td>Int</td><td>否</td><td>每页多少条，默认20，最多不超过200</td></tr><tr><td>contains_track_rich_intro</td><td>String</td><td>否</td><td>为true时，返回的声音列表包含富文本信息</td></tr></tbody></table></figure></li><li><p>callback：回调接口，成功则返回 TrackList 对象，失败则返回错误原因</p></li></ul><p>&nbsp;</p><h3><a name='header-n2633' class='md-header-anchor '></a>3.15.5 批量根据付费专辑ID获取付费专辑详情</h3><p><strong>接口签名：</strong></p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n2635" mdtype="fences">public static void batchGetPaidAlbum(final Map&lt;String ,String&gt; params ,IDataCallBack&lt;BatchAlbumList&gt; callBack)
</pre><p><strong>参数说明：</strong></p><ul><li><p>specificParams：字段介绍如下</p><figure><table><thead><tr><th>字段名</th><th>类型</th><th>必填</th><th>描述</th></tr></thead><tbody><tr><td>ids</td><td>Int[]</td><td>是</td><td>付费专辑ID列表，传参时用英文逗号分隔，最大ID数量为200个，超过200的ID将忽略。</td></tr></tbody></table></figure></li><li><p>callback：回调接口，成功则返回 BatchAlbumList 对象，失败则返回错误原因</p></li></ul><h3><a name='header-n2654' class='md-header-anchor '></a>3.15.6 批量根据付费声音ID获取付费声音详情</h3><p><strong>接口签名：</strong></p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n2656" mdtype="fences">public static void batchPaidTracks(Map&lt;String, String&gt; specificParams,
									  final IDataCallBack&lt;BatchTrackList&gt; callback)
</pre><p><strong>参数说明：</strong></p><ul><li><p>specificParams：字段介绍如下</p><figure><table><thead><tr><th>字段名</th><th>类型</th><th>必填</th><th>描述</th></tr></thead><tbody><tr><td>ids</td><td>Int[]</td><td>是</td><td>付费声音ID列表，传参时用英文逗号分隔，最大ID数量为200个，超过200的ID将忽略。</td></tr></tbody></table></figure></li><li><p>callback：回调接口，成功则返回 BatchTrackList 对象，失败则返回错误原因</p></li></ul><h3><a name='header-n2675' class='md-header-anchor '></a>3.15.7 获取所有付费内容排行榜（付费专辑榜或付费声音榜）基础信息</h3><p><strong>接口签名：</strong></p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n2677" mdtype="fences">public static void getPaidRank(Map&lt;String, String&gt; specificParams,  final IDataCallBack&lt;RankList&gt; callback)
</pre><p><strong>参数说明：</strong></p><ul><li>specificParams：不需传递</li><li>callback：回调接口，成功则返回 RankList 对象，失败则返回错误原因</li></ul><h3><a name='header-n2685' class='md-header-anchor '></a>3.15.8 根据rank_key分页获取某个付费专辑排行榜下的付费专辑列表</h3><p><strong>接口签名：</strong></p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n2687" mdtype="fences">public static void getRankAlbums(final Map&lt;String ,String&gt; params ,IDataCallBack&lt;AlbumList&gt; callBack)
</pre><p><strong>参数说明：</strong></p><ul><li><p>specificParams：字段介绍如下</p><figure><table><thead><tr><th>字段名</th><th>类型</th><th>必填</th><th>描述</th></tr></thead><tbody><tr><td>rank_key</td><td>String</td><td>是</td><td>用于获取具体付费榜单内容的key</td></tr><tr><td>page</td><td>Int</td><td>否</td><td>返回第几页，必须大于等于1，不填默认为1</td></tr><tr><td>count</td><td>Int</td><td>否</td><td>每页多少条，默认20，最多不超过200</td></tr></tbody></table></figure></li><li><p>callback：回调接口，成功则返回 AlbumList 对象，失败则返回错误原因</p></li></ul><h3><a name='header-n2716' class='md-header-anchor '></a>3.15.9 获取用户购买过的所有付费专辑</h3><p>（包括整张购买过的专辑，和购买过分集声音所属的专辑）。</p><p>限制：
用户必须处于登陆状态（用户进行过OAuth2服务端标准登陆授权，具体请参考喜马拉雅-OAuth2标准授权接口文档）</p><p><strong>接口签名：</strong></p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n2720" mdtype="fences">public static void getBoughtAlbums(final Map&lt;String ,String&gt; params ,IDataCallBack&lt;AlbumList&gt; callBack)
</pre><p><strong>参数说明：</strong></p><ul><li>callback：回调接口，成功则返回 AlbumList 对象，失败则返回错误原因</li></ul><h3><a name='header-n2726' class='md-header-anchor '></a>3.15.10 根据用户ID和一批付费专辑ID获取用户对这批付费专辑的购买状态</h3><p>（注意：只有整张购买的专辑，才会显示为已购状态！）</p><p>限制：
用户必须处于登陆状态（用户进行过OAuth2服务端标准登陆授权，具体请参考喜马拉雅-OAuth2标准授权接口文档）</p><p><strong>接口签名：</strong></p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n2730" mdtype="fences">public static void getBoughtAlbumStatus(final Map&lt;String ,String&gt; params ,IDataCallBack&lt;BoughtStatuList&gt; callBack)
</pre><p><strong>参数说明：</strong></p><ul><li><p>specificParams：字段介绍如下</p><figure><table><thead><tr><th>字段名</th><th>类型</th><th>必填</th><th>描述</th></tr></thead><tbody><tr><td>ids</td><td>String</td><td>是</td><td>英文逗号分隔的付费专辑ID，id总数不能超过200</td></tr></tbody></table></figure></li><li><p>callback：回调接口，成功则返回 BoughtStatuList 对象，失败则返回错误原因</p></li></ul><h3><a name='header-n2749' class='md-header-anchor '></a>3.15.11 根据用户ID和一批付费声音ID获取用户对这批付费声音的购买状态</h3><p>限制：
用户必须处于登陆状态（用户进行过OAuth2服务端标准登陆授权，具体请参考喜马拉雅-OAuth2标准授权接口文档）</p><p><strong>接口签名：</strong></p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n2752" mdtype="fences">public static void getBoughtTrackStatus(final Map&lt;String ,String&gt; params ,IDataCallBack&lt;BoughtStatuList&gt; callBack)
</pre><p><strong>参数说明：</strong></p><ul><li><p>specificParams：字段介绍如下</p><figure><table><thead><tr><th>字段名</th><th>类型</th><th>必填</th><th>描述</th></tr></thead><tbody><tr><td>ids</td><td>String</td><td>是</td><td>英文逗号分隔的付费声音ID，id总数不能超过200</td></tr></tbody></table></figure></li><li><p>callback：回调接口，成功则返回 BoughtStatuList 对象，失败则返回错误原因</p></li></ul><h3><a name='header-n2771' class='md-header-anchor '></a>3.15.12 根据关键词搜索付费专辑</h3><p><strong>接口签名：</strong></p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n2773" mdtype="fences">public static void searchPaidAlbums(final Map&lt;String ,String&gt; params ,IDataCallBack&lt;AlbumList&gt; callBack)
</pre><p><strong>参数说明：</strong></p><ul><li><p>specificParams：字段介绍如下</p><figure><table><thead><tr><th>字段名</th><th>类型</th><th>必填</th><th>描述</th></tr></thead><tbody><tr><td>q</td><td>String</td><td>是</td><td>搜索关键词</td></tr><tr><td>page</td><td>Int</td><td>否</td><td>返回第几页，必须大于等于1，不填默认为1</td></tr><tr><td>count</td><td>Int</td><td>否</td><td>每页多少条，默认20，最多不超过200</td></tr></tbody></table></figure></li><li><p>callback：回调接口，成功则返回 AlbumList 对象，失败则返回错误原因</p></li></ul><h3><a name='header-n2802' class='md-header-anchor '></a>3.15.13 根据关键词搜索付费声音</h3><p><strong>接口签名：</strong></p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n2804" mdtype="fences">public static void searchPaidTracks(Map&lt;String, String&gt; specificParams, final IDataCallBack&lt;TrackList&gt; callback)
</pre><p><strong>参数说明：</strong></p><ul><li><p>specificParams：字段介绍如下</p><figure><table><thead><tr><th>字段名</th><th>类型</th><th>必填</th><th>描述</th></tr></thead><tbody><tr><td>q</td><td>String</td><td>是</td><td>搜索关键词</td></tr><tr><td>page</td><td>Int</td><td>否</td><td>返回第几页，必须大于等于1，不填默认为1</td></tr><tr><td>count</td><td>Int</td><td>否</td><td>每页多少条，默认20，最多不超过200</td></tr></tbody></table></figure></li><li><p>callback：回调接口，成功则返回 TrackList 对象，失败则返回错误原因</p></li></ul><h3><a name='header-n2832' class='md-header-anchor '></a>3.15.14 客户端下单购买</h3><p>限制：
用户必须处于登陆状态（用户进行过OAuth2服务端标准登陆授权，具体请参考喜马拉雅-OAuth2标准授权接口文档）
请在AndroidManifest.xml中注册如下代码</p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="xml" contenteditable="false" cid="n2834" mdtype="fences">&lt;activity
    android:name="com.ximalaya.ting.android.xmpayordersdk.XmPayOrderActivity"
    android:configChanges="keyboardHidden|orientation"
    android:exported="false"
    android:windowSoftInputMode="adjustResize" /&gt;
</pre><p><strong>接口签名：</strong></p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n2836" mdtype="fences">// 整张购买
public static void clientPlaceOrderAlbum(final long albumId , @NonNull final Context context , final IXmPayOrderListener listener);

// 单集或多集购买
public static void clientPlaceOrderTracks(long albumId ,List&lt;Long&gt; tracks ,@NonNull final Context context , final IXmPayOrderListener listener);
</pre><p><strong>参数说明</strong></p><ul><li>callback：回调接口，返回 PayFinishModel</li><li>PayFinishModel 包含code和des  code和des对应关系如下</li></ul><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n2843" mdtype="fences" style="page-break-inside: unset;">CODE_SUCCESS = 1;               // 购买成功
CODE_CANCLE = 2;                // 用户取消
CODE_PAY_TYPE_NOT_SUPPORTED = 3;   // 购买类型不支持
CODE_PAY_UNKNOW_ERROR = 110;    // 未知错误
CODE_PAY_NETERROR = 101;        // 网络错误
CODE_PAY_JSONERROR = 102;       // 下单接口 json提取失败
CODE_PAY_H5_SUCCESS = 200;      // 下单成功
CODE_PAY_TIMEOUT = 401; // 订单超时
CODE_PAY_IN_HANDLE = 430; // 订单处理中
CODE_PAY_ZFB_FAIL = 431; // 支付宝支付失败
CODE_PAY_SERIAL_FAIL = 432; // 签名错误
CODE_PAY_CHANNEL_FAIL = 433; // 支付渠道错误
CODE_PAY_H5_ERROR = 500;        // 下单失败
CODE_PAY_CHECK_FAIL = 100;      // 参数常规校验失败
CODE_PAY_CONTENT_OFF = 600;     // 待购买内容已下架
CODE_PAY_TRACKS_FROM_DIFFERENT_ALBUM = 601;      // 待购买声音来自不同专辑
CODE_PAY_PRICE_INCORRECT = 602;      // 单价校验失败
CODE_PAY_ALREADY_EXIST_UNPAID_ORDER = 603;      // 已存在未支付订单包含重叠付费音频
CODE_PAY_APP_DISABLE_PAY = 609;      // 应用没有付费音频接入资格
CODE_PAY_ORDER_HAS_CONFIRMED = 615;  // 已经确单不能再下单
CODE_PAY_ORDER_HAS_PAY = 618;  // 已经购买
CODE_PAY_IS_FREE_UNSUPPORTED_BUY = 619; // 声音资源是免费试听的，无需购买
CODE_PAY_SINGLE_TRACK = 620; // 购买的资源是单集购买类型，不能当做整张类型购买
CODE_PAY_IS_NOT_EXIST = 621; // 购买的商品不存在
TOKEN_INVALID = 1013;		// token 失效
CODE_PAY_LOGIN_NEED = 1014;  // 需要登录
CODE_PAY_INFO = 1015;  // 获取价格信息出错
</pre><p><strong>参考代码：</strong></p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n2845" mdtype="fences" style="page-break-inside: unset;">// 单集或多集购买
PayOrderManager.clientPlaceOrderTracks(5203899, new ArrayList&lt;Long&gt;() {
    {
        add(37660386L);
    }
}, PayActivity.this, new IXmPayOrderListener() {
    @Override
    public void onFinish(PayFinishModel payFinishModel) {

        Toast.makeText(PayActivity.this, "下单结果 -- " + payFinishModel, Toast.LENGTH_SHORT).show();
    }
});

// 整张购买
PayOrderManager.clientPlaceOrderAlbum(6922889, PayActivity.this, new IXmPayOrderListener() {
    @Override
    public void onFinish(PayFinishModel payFinishModel) {

        Toast.makeText(PayActivity.this, "下单结果 -- " + payFinishModel, Toast.LENGTH_SHORT).show();
    }
});

</pre><p>检查付费页面是否存在</p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n2847" mdtype="fences">PayOrderManager.payActivityIsShowing();
</pre><p>关闭付费页面</p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n2849" mdtype="fences">PayOrderManager.finishPayActivity();
</pre><p>设置付费页面状态监听</p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n2851" mdtype="fences">PayOrderManager.payOrderActivityResult(PayActivityStatueResultCallBack callBack);
</pre><p>callback状态有:</p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n2853" mdtype="fences">public interface PayActivityStatueResultCallBack {
    String onCreate = "onCreate";
    String onStart = "onStart";
    String onResume = "onResume";
    String onPause = "onPause";
    String onStop = "onStop";
    String onDestory = "onDestory";
    String onRestart = "onRestart";

    void payActivityStatueResult(String statue);
}
</pre><h4><a name='header-n2854' class='md-header-anchor '></a>3.15.14.1 客户端下单购买后播放地址更新</h4><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n2855" mdtype="fences">// 如果购买的有当前的播放的声音需要按照以下方式,以更新地址
XmPlayerManager.getInstance(context).resetPlayer();
// 必须要使用此方法进行重新播放才会重新
XmPlayerManager.getInstance(context).play(XmPlayerManager.getInstance(context).getCurrentIndex());
</pre><h3><a name='header-n2856' class='md-header-anchor '></a>3.15.15 第三方服务端调用下单接口然后使用SDK吊起购买页面</h3><p>限制：
用户必须处于登陆状态（用户进行过OAuth2服务端标准登陆授权，具体请参考喜马拉雅-OAuth2标准授权接口文档）
请在AndroidManifest.xml中注册如下代码</p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="xml" contenteditable="false" cid="n2858" mdtype="fences">&lt;activity
    android:name="com.ximalaya.ting.android.xmpayordersdk.XmPayOrderActivity"
    android:configChanges="keyboardHidden|orientation"
    android:exported="false"
    android:windowSoftInputMode="adjustResize" /&gt;
</pre><p><strong>接口签名：</strong></p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n2860" mdtype="fences">PayOrderManager.java
public static void clientPlaceOrderByOrderNum(String orderNum , final Context context , final IXmPayOrderListener listener);
</pre><p><strong>参数说明</strong></p><p>同 <code>3.15.14 客户端下单购买</code>
<strong>参考代码：</strong></p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n2863" mdtype="fences">PayOrderManager.clientPlaceOrderByOrderNum("20170518001702020000000048648619", PayActivity.this, new IXmPayOrderListener() {
    @Override
    public void onFinish(PayFinishModel payFinishModel) {
        System.out.println("下单的结果是 === " + payFinishModel);
    }
});
</pre><h3><a name='header-n2864' class='md-header-anchor '></a>3.15.16 部分试听声音,试听结束后回调</h3><p><strong>参考代码: </strong></p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n2866" mdtype="fences">@Override
public void onSoundSwitch(PlayableModel lastModel, PlayableModel curModel) {
    if (curModel == null &amp;&amp; lastModel instanceof Track) {
        // isAudition 表示是否为部分试听声音
        if (((Track) lastModel).isAudition() &amp;&amp;
                XmPlayerManager.getInstance(getApplicationContext()).getPlayerStatus() == PlayerConstants.STATE_IDLE) {
            // 这里面写入试听结束后的代码,比如可以引导用户进行购买等操作
            new AlertDialog.Builder(PayActivity.this).setMessage("试听结束").setNeutralButton("确定", null).create().show();
        }
    }
}
</pre><h3><a name='header-n2867' class='md-header-anchor '></a>3.15.17 根据专辑ID获取专辑下的所有声音ID列表</h3><p><strong>接口签名：</strong></p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n2869" mdtype="fences">public static void getTrackStatuesByAlbumId(Map&lt;String, String&gt; specificParams , IDataCallBack&lt;XmAlbumTracksStatue&gt; callBack) {
</pre><p><strong>参数说明：</strong></p><ul><li><p>specificParams：字段介绍如下</p><figure><table><thead><tr><th>字段名</th><th>类型</th><th>必填</th><th>描述</th></tr></thead><tbody><tr><td>album_id</td><td>Int</td><td>是</td><td>专辑ID</td></tr><tr><td>sort</td><td>String</td><td>否</td><td>&quot;asc&quot;表示喜马拉雅正序，&quot;desc&quot;表示喜马拉雅倒序，&quot;time_asc&quot;表示时间升序，&quot;time_desc&quot;表示时间降序，默认为&quot;asc&quot;</td></tr><tr><td>third_uid</td><td>String</td><td>否</td><td>合作方第三方用户唯一标识；</td></tr></tbody></table></figure></li><li><p>callback：回调接口，成功则返回 XmAlbumTracksStatue 对象，失败则返回错误原因</p></li></ul><p><strong>参考代码: </strong></p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n2898" mdtype="fences">Map&lt;String ,String&gt; map = new HashMap&lt;&gt;();
map.put("album_id" ,"5697919");
CommonRequest.getTrackStatuesByAlbumId(map, new IDataCallBack&lt;XmAlbumTracksStatue&gt;() {
    @Override
    public void onSuccess(XmAlbumTracksStatue object) {
    }
    @Override
    public void onError(int code, String message) {
    }
});
</pre><h3><a name='header-n2899' class='md-header-anchor '></a>3.15.18 检查是否有未支付的订单并取消订单</h3><p><strong>接口签名：</strong></p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n2901" mdtype="fences">PayOrderManager.checkHaveNoPayOrderAndCancle(Context context);
</pre><ul><li>建议在LAUNCHER Activity onCreate 的时候执行此方法 ,主要是防止用户在支付过程中因为各种原因应用被杀掉导致SDK不能取消订单 ,那么用户再次下单时服务端就会拒绝(服务端订单失效时间45分钟)</li><li>此方法需要在 CommonRequest初始化之后执行</li><li>PayOrderManager.getNoPayOrderList() 方法获取未支付的订单的列表</li></ul><h3><a name='header-n2909' class='md-header-anchor '></a>3.15.19 取消订单</h3><p><strong>接口签名：</strong></p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n2911" mdtype="fences">public static void clientCancelOrder(Map&lt;String, String&gt; specificParams, IDataCallBack&lt;PayOderStatue&gt; callBack)
</pre><p><strong>参数说明：</strong></p><ul><li><p>specificParams：字段介绍如下</p><figure><table><thead><tr><th>字段名</th><th>类型</th><th>必填</th><th>描述</th></tr></thead><tbody><tr><td>third_uid</td><td>String</td><td>否(如果是通过第三方登录方式则必填)</td><td>合作方第三方账号唯一标识</td></tr><tr><td>xima_order_no</td><td>String</td><td>是</td><td>喜马拉雅订单号</td></tr></tbody></table></figure></li><li><p>callback：回调接口，成功则返回 PayOderStatue 对象，失败则返回错误原因</p></li></ul><p><strong>参考代码: </strong></p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n2935" mdtype="fences">Map&lt;String ,String&gt; maps = new HashMap&lt;&gt;();
maps.put("xima_order_no" ,payOrderList.get(i));
CommonRequest.clientCancelOrder(maps, new IDataCallBack&lt;PayOderStatue&gt;() {
    @Override
    public void onSuccess(PayOderStatue object) {
    }
    @Override
    public void onError(int code, String message) {
    }
});
</pre><h3><a name='header-n2937' class='md-header-anchor '></a>3.15.20</h3><p><strong>接口签名：</strong></p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n2939" mdtype="fences">public static void getOrderDetail(Map&lt;String, String&gt; specificParams, IDataCallBack&lt;OrderDetail&gt; callBack) {
</pre><p><strong>参数说明：</strong></p><ul><li><p>specificParams：字段介绍如下</p><figure><table><thead><tr><th>字段名</th><th>类型</th><th>必填</th><th>描述</th></tr></thead><tbody><tr><td>third_uid</td><td>String</td><td>否(如果是通过第三方登录方式则必填)</td><td>合作方第三方账号唯一标识</td></tr><tr><td>xima_order_no</td><td>String</td><td>是</td><td>喜马拉雅订单号</td></tr></tbody></table></figure></li><li><p>callback：回调接口，成功则返回 OrderDetail 对象，失败则返回错误原因</p></li></ul><h2><a name='header-n2963' class='md-header-anchor '></a>3.16 用户相关接口</h2><h3><a name='header-n2964' class='md-header-anchor '></a>3.16.1 根据用户ID获取用户基本信息</h3><p>限制：
用户必须处于登陆状态（用户进行过OAuth2服务端标准登陆授权，具体请参考喜马拉雅-OAuth2标准授权接口文档）</p><p><strong>接口签名：</strong></p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n2967" mdtype="fences">public static void getBaseUserInfo(Map&lt;String, String&gt; specificParams , IDataCallBack&lt;XmBaseUserInfo&gt; callBack)
</pre><p><strong>参考代码：</strong></p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n2969" mdtype="fences">Map&lt;String ,String &gt; map = new HashMap&lt;&gt;();
CommonRequest.getBaseUserInfo(map, new IDataCallBack&lt;XmBaseUserInfo&gt;() {
    @Override
    public void onSuccess(XmBaseUserInfo object) {
    }
    @Override
    public void onError(int code, String message) {
    }
});
</pre><h3><a name='header-n2970' class='md-header-anchor '></a>3.16.2 根据用户ID获取用户画像资料</h3><p>限制：
用户必须处于登陆状态（用户进行过OAuth2服务端标准登陆授权，具体请参考喜马拉雅-OAuth2标准授权接口文档）</p><p><strong>接口签名：</strong></p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n2973" mdtype="fences">public static void getUserInfo(Map&lt;String ,String&gt; params , IDataCallBack&lt;XmUserInfo&gt; callBack)
</pre><p><strong>参考代码：</strong></p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n2975" mdtype="fences">Map&lt;String ,String &gt; map = new HashMap&lt;&gt;();
CommonRequest.getUserInfo(map, new IDataCallBack&lt;XmUserInfo&gt;() {
    @Override
    public void onSuccess(XmUserInfo object) {
    }
    @Override
    public void onError(int code, String message) {
    }
});
</pre><h1><a name='header-n2976' class='md-header-anchor '></a>3.17 测试付费相关内容需要注意的事项</h1><p>测试下单、确单时请使用测试应用和测试用付费专辑，具体信息如下（如果测试期间使用真实应用和高价专辑，产生的成本由贵方自己承担）：</p><p>测试应用的app_key：b617866c20482d133d5de66fceb37da3
测试应用的app_secret：请联系 技术支持 提供(联系方式见文档底部)
测试应用的serverAuthenticateStaticKey：请联系 技术支持 提供(联系方式见文档底部)
整张售卖专辑ID：6922889、6921109、6255313、8139811、6255099
分集售卖专辑ID：5203901、5203899、5203860</p><h2><a name='header-n2979' class='md-header-anchor '></a>3.18 服务端下单确单</h2><p>服务端下单后,可以直接进行播放,播放器内部会自动确认此音频是否已经购买,如果已经购买会自动播放 ,如果购买的音频当中有正在播放的音频需要参考 &#39;3.15.14.1&#39; 这个章节进行设置播放</p><h1><a name='header-n2982' class='md-header-anchor '></a>4 播放器说明</h1><p>本部分介绍喜马拉雅SDK中附带播放器的使用说明。</p><h2><a name='header-n2984' class='md-header-anchor '></a>4.1 播放器概述</h2><p>由于Android系统自带的媒体播放器不同版本差异较大，且后期我们会对喜马拉雅平台的音频内容加密，所以如果希望正常收听喜马拉雅平台的音频内容，需要定制版播放器再能正常播放。目前播放器支持点播、电台直播、电台回听。</p><h2><a name='header-n2986' class='md-header-anchor '></a>4.2 播放器环境搭建</h2><p>为了能正常使用播放器，首先需要开发者将SDK包中的两个so包拷贝到您的项目libs/armeabi目录下，并将TingPhoneOpenSDK_XXX.jar拷贝到libs目录下(如果你的项目中用到armeabi-v7等，请同样拷贝一份到armeabi-v7目录下)。
同时，播放器还依赖以下第三方jar：
android_support_v4.jar //使用了某些兼容性组件，必须加入项目的libs目录下
其次，需要在项目Manifest文件中声明以下权限（监听电话状态，当有来电或去电时，自动暂停，当电话结束后，自动恢复播放）：</p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="xml" contenteditable="false" cid="n2988" mdtype="fences">&lt;uses-permission android:name="android.permission.READ_PHONE_STATE" /&gt;
&lt;uses-permission android:name="android.permission.PROCESS_OUTGOING_CALLS" /&gt;
</pre><h2><a name='header-n2989' class='md-header-anchor '></a>4.3 播放器状态介绍</h2><p>为了大家方便接入喜马拉雅播放器，喜马拉雅播放器的各状态尽量保持和Android系统播放器状态一致。状态图如下：</p><p><img src='http://oqcdh3vzq.bkt.clouddn.com/18-6-27/95911213.jpg' alt='播放器状态图' referrerPolicy='no-referrer' /></p><h2><a name='header-n2992' class='md-header-anchor '></a>4.4 播放器初始化和释放</h2><p>喜马拉雅播放器服务采用AIDL机制，独立运行在一个进程中，我们在此基础上又做了一层封装，第三方App只需要和XmPlayerManager交互，XmPlayerManager再负责和播放器服务交互。
首先需要在App的AndroidManifest.xml文件中注册播放器服务</p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="html" contenteditable="false" cid="n2994" mdtype="fences">&lt;serviceandroid:name="com.ximalaya.ting.android.opensdk.player.service.XmPlayerService"
android:process=":player"/&gt;
</pre><p>建议将播放Service配置成RemoteService，这样可以减少app的内存峰值，避免OOM。
其次，需要在App初始化的时候初始化XmPlayerManager，XmPlayerManager会去启动播放器服务，并初始化Service。XmPlayerManager有两个初始化方法：
init()<span>	</span>初始化方法
init(int id, Notification notification)<span>	</span>此方法初始化在播放器服务启动后会在通知栏显示指定的Notification。参数同NotificationManager.notify(int id, Notification notification)。
注：init()方法只需要调用一次，多次调用仅第一次有效。
当程序不在使用播放器时，应及时释放播放器，让系统回收资源。释放播放器通过调用XmPlayerManager.release()来实现。release()和init()应成对出现。</p><h2><a name='header-n2996' class='md-header-anchor '></a>4.5 通过播放器播放声音</h2><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n2997" mdtype="fences" style="page-break-inside: unset;">playList(List&lt;Track&gt; list, int startIndex)
    此方法用来播放普通声音列表：
    list :声音列表
    startIndex：播放index指定处的声音

playList(CommonTrackList list, int startIndex)
    此方法播放由XiMaLaYa.getTracks()、getHotTracks()、getBatchTracks()、getSearchedTracks()
    直接返回的TrackList。使用此方法播放的列表播放器可自动加载下一页

playRadio(Radio radio)
    此方法用来播放电台,这种方式是直接进行播放用户只能进行暂停和播放,不能回听之前时间段的节目

playLiveRadioForSDK(final Radio radio , int weekday ,int playIndex)
	此方法用来播放某一个星期的节目列表 ,可以进行回听,设置-1表示当天所表示的星期 (如果是当天的话要注意不能超前播放)
	playIndex 设置为-1 表示播放当前电台的直播节目
	可以使用playSchedule 来实现更高级的定制化需求(4.5.1 展示了此方法的源码)

playSchedule(List&lt;Schedule&gt; schedules, intstartIndex)
    此方法用来播放电台排期表,当startindex为-1时播放列表中的直播（非回听）；
    当startindex大于0且小于当前直播index时，则播放对应位置的回听；
    需要注意如果获取的是当天的Schedule，需要在start_time和end_time中加上时间，如 16:08:02:09:01，表示16年8月2日9点1分。
</pre><h3><a name='header-n2998' class='md-header-anchor '></a>4.5.1 playLiveRadioForSDK函数源代码</h3><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n2999" mdtype="fences" style="page-break-inside: unset;">public void playLiveRadioForSDK(final Radio radio , int weekday) {
	if (!checkConnectionStatus()) {
		return;
	}
	if (radio == null) {
		return;
	}

	Map&lt;String ,String&gt; map = new HashMap&lt;&gt;();
	map.put(DTransferConstants.RADIOID ,radio.getDataId() + "");
	if(weekday &gt;= 0) {
		map.put(DTransferConstants.WEEKDAY ,weekday + "");
	}

	Calendar c = Calendar.getInstance();
	final boolean isToday = (weekday == (c.get(Calendar.DAY_OF_WEEK) - 1));

	SimpleDateFormat simpleDateFormat = new SimpleDateFormat("yy:MM:dd");
	Calendar calendar = Calendar.getInstance();
	if(weekday &gt;= 0) {
		calendar.set(Calendar.DAY_OF_WEEK ,weekday + 1);
	}
	final String currTime = simpleDateFormat.format(calendar.getTime());

	CommonRequest.getSchedules(map, new IDataCallBack&lt;ScheduleList&gt;() {
		@Override
		public void onSuccess(ScheduleList object) {
			if(object != null &amp;&amp; object.getmScheduleList() != null &amp;&amp; !object.getmScheduleList().isEmpty()) {

				List&lt;Schedule&gt; schedules = object.getmScheduleList();
				for (Schedule schedule : schedules) {
				    schedule.setStartTime(currTime + ":" + schedule.getStartTime());
				    schedule.setEndTime(currTime + ":" + schedule.getEndTime());

					Program program = schedule.getRelatedProgram();
					if (program == null) {
						program = new Program();
						schedule.setRelatedProgram(program);
					}
					program.setBackPicUrl(radio.getCoverUrlLarge());

					schedule.setRadioId(radio.getDataId());
					schedule.setRadioName(radio.getRadioName());
					schedule.setRadioPlayCount(radio.getRadioPlayCount());

					if(isToday) {
						if (BaseUtil.isInTime(schedule.getStartTime() + "-" + schedule.getEndTime()) == 0) {
							program.setRate24AacUrl(radio.getRate24AacUrl());
							program.setRate24TsUrl(radio.getRate24TsUrl());
							program.setRate64AacUrl(radio.getRate64AacUrl());
							program.setRate64TsUrl(radio.getRate64TsUrl());
							break;
						}
					}
				}

				playSchedule(schedules ,-1);
			}
		}

		@Override
		public void onError(int code, String message) {

		}
	});
}
</pre><p>&nbsp;</p><p>&nbsp;</p><h2><a name='header-n3002' class='md-header-anchor '></a>4.6 播放器控制</h2><p>XmPlayerManager提供了一系列方法用于控制播放器的状态，主要有：开始播放，暂停播放，上一首，下一首，拖动等。</p><figure><table><thead><tr><th>指令</th><th>描述</th></tr></thead><tbody><tr><td>play()</td><td>尝试恢复播放器的播放状态，如果恢复失败，则播放列表的第一条声音</td></tr><tr><td>play(int index)</td><td>播放指定索引处的声音</td></tr><tr><td>pause()</td><td>暂停播放器(如果暂停的时候正在缓冲状态,是暂停不掉的,需要在缓冲结束后(比如开始播放时)才能暂停)</td></tr><tr><td>stop()</td><td>停止播放器</td></tr><tr><td>playPre()</td><td>上一首</td></tr><tr><td>playNext()</td><td>下一首</td></tr><tr><td>setPlayMode(int mode)</td><td>设置播放器模式，mode取值为<code>PlayMode</code>中的下列之一：<br>PLAY_MODEL_SINGLE单曲播放<br>PLAY_MODEL_SINGLE_LOOP 单曲循环播放<br>PLAY_MODEL_LIST列表播放<br>PLAY_MODEL_LIST_LOOP列表循环<br>PLAY_MODEL_RANDOM 随机播放</td></tr><tr><td>getPlayerStatus()</td><td>获取播放器状态，返回值是PlayerConstants中的下列之一：<br>STATE_IDLE播放器IDLE状态<br>STATE_INITIALIZED 播放器已经初始化了<br>STATE_PREPARING播放器准备中<br>STATE_PREPARED播放器准备完成<br>STATE_STARTED 播放器开始播放<br>STATE_STOPPED播放器停止<br>STATE_PAUSED 播放器暂停<br>STATE_COMPLETED 播放器单曲播放完成<br>STATE_ERROR播放器错误<br>STATE_END播放器被释放<br></td></tr><tr><td>isPlaying()</td><td>播放器是否正在播放（注意，播放器在缓冲时，虽然没有声音输出，此方法仍然认为播放器正在播放）</td></tr><tr><td>getCurrentIndex()</td><td>获取正在播放的声音在列表中的位置</td></tr><tr><td>hasPreSound()</td><td>是否有上一首</td></tr><tr><td>hasNextSound()</td><td>是否有下一首</td></tr><tr><td>getDuration()</td><td>获取音频时长，同Mediaplayer.getDuration()</td></tr><tr><td>getPlayCurrPositon()</td><td>获取当前的播放进度</td></tr><tr><td>seekToByPercent(float percent)</td><td>按音频时长的比例来拖动</td></tr><tr><td>seekTo(intpos)</td><td>拖动，同Mediaplayer.seekTo();</td></tr><tr><td>setVolume(float leftVolume, float rightVolume)</td><td>此方法调用的是AudioTrack的音量 调节音量 ,left表示左声道 ,值的范围为 0 - 1 表示AudioTrack最大音量的百分比</td></tr><tr><td>getCurrSound()</td><td>获取当前的播放model，可能是track、radio或者schedule中的节目,要根据类型做强转</td></tr><tr><td>getCurrPlayType()</td><td>获取当前的play类型，分为直播和点播, 点播分为 track以及schedule中的回听 ,直播分为radio以及schedule中的直播 区分当前的播放进度条是否可以拖动<br>XmPlayListControl.PLAY_SOURCE_NONE = 1// 当前没有声音;<br>XmPlayListControl.PLAY_SOURCE_TRACK = 2 // 点播类型;<br>XmPlayListControl.PLAY_SOURCE_RADIO = 3; // 直播类型</td></tr><tr><td>getPlayCacheSize()</td><td>获得播放器缓存大小</td></tr><tr><td>clearPlayCache()</td><td>清除播放器缓存 ,只是清除音频缓存</td></tr><tr><td>isOnlineSource()</td><td>是否正在播放在线资源</td></tr><tr><td>isAdsActive()</td><td>是否正在播放广告</td></tr><tr><td>updateTrackInPlayList(Track track)</td><td>更新Track到播放列表,前提是这个track在当前的播放列表中</td></tr><tr><td>getCurPlayUrl()</td><td>获得当前播放的地址</td></tr><tr><td>resetPlayList()</td><td>重置播放列表</td></tr><tr><td>removeListByIndex(int index)</td><td>删除某一个音频在当前的播放列表</td></tr><tr><td>setPlayList(List<Track> list, int startIndex)</td><td>设置播放列表和播放声音的index,但是不会自动播放</td></tr><tr><td>setPlayList(CommonTrackList commonTrackList, int startIndex)</td><td>设置播放列表和播放声音的index,但是不会自动播放</td></tr><tr><td>resetPlayer</td><td>重置播放器(在不需要播放器,并且不是退出应用的情况下使用此函数)</td></tr><tr><td>getTempo</td><td>获取播放速率 (setTempo()设置播放速率见 4.18 倍速播放)</td></tr></tbody></table></figure><h2><a name='header-n3102' class='md-header-anchor '></a>4.7 播放器回调</h2><p>第三方app如果想监听播放器的状态变化，需要实例化IXmPlayerStatusListener，并通过XmPlayerManager.addPlayerStatusListener()注册一个监听器。
各回调方法解释如下：</p><figure><table><thead><tr><th>方法</th><th>描述</th></tr></thead><tbody><tr><td>onPlayStart()</td><td>开始播放</td></tr><tr><td>onPlayPause()</td><td>暂停播放</td></tr><tr><td>onPlayStop()</td><td>停止播放</td></tr><tr><td>onSoundPlayComplete()</td><td>播放完成</td></tr><tr><td>onSoundPrepared()</td><td>播放器准备完毕</td></tr><tr><td>onSoundSwitch(PlayableModel lastModel, PlayableModel curModel);</td><td>切歌<br>lastModel：上一首model,可能为空<br>curModel：下一首model<br>请通过model中的kind字段来判断是track、radio和schedule；<br>上一首的播放时间请通过lastPlayedMills字段来获取;</td></tr><tr><td>onBufferingStart()</td><td>开始缓冲</td></tr><tr><td>onBufferingStop()</td><td>结束缓冲</td></tr><tr><td>onBufferProgress(int percent)</td><td>缓冲进度回调</td></tr><tr><td>onPlayProgress(intcurrPos, int duration)</td><td>播放进度回调</td></tr><tr><td>onError(XmPlayerException exception)</td><td>播放器错误</td></tr></tbody></table></figure><p>如果app还想监听广告播放状态，则需要实例化IXmAdsStatusListener，并通过XmPlayerManager.addAdsStatusListener()注册监听器，各方法说明如下：</p><figure><table><thead><tr><th>方法</th><th>描述</th></tr></thead><tbody><tr><td>onStartGetAdsInfo()</td><td>开始获取广告物料</td></tr><tr><td>onGetAdsInfo(AdvertisList ads)</td><td>获取广告物料成功</td></tr><tr><td>onAdsStartBuffering()</td><td>广告开始缓冲</td></tr><tr><td>onAdsStopBuffering()</td><td>广告结束缓冲</td></tr><tr><td>onStartPlayAds(Advertis ad, int position)</td><td>开始播放广告<br>ad : 当前播放广告<br>position : 当前播放的广告在广告列表中的索引</td></tr><tr><td>onCompletePlayAds()</td><td>广告播放完毕</td></tr><tr><td>onError(int what, int extra)</td><td>播放广告错误<br>what : 错误类型<br>extra : 错误的额外信息</td></tr></tbody></table></figure><h2><a name='header-n3168' class='md-header-anchor '></a>4.8 播放器通知栏使用</h2><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n3169" mdtype="fences" style="page-break-inside: unset;">在贵方的Application 里面设置如下代码 (下面只是演示了个性化关闭按钮 ,其他按钮同理)

if(BaseUtil.getCurProcessName(this).contains(":player")) {
    XmNotificationCreater instanse = XmNotificationCreater.getInstanse(this);
    instanse.setNextPendingIntent((PendingIntent)null);
    instanse.setPrePendingIntent((PendingIntent)null);
    instanse.setStartOrPausePendingIntent((PendingIntent)null);

    String actionName = "com.app.test.android.Action_Close";
    Intent intent = new Intent(actionName);
    intent.setClass(this, MyPlayerReceiver.class);
    PendingIntent broadcast = PendingIntent.getBroadcast(this, 0, intent, 0);
    instanse.setClosePendingIntent(broadcast);
}
</pre><p>AndroidManifest.xml 进行注册如下代码  进程一定要设置为&quot;:player&quot; 也就是和 XmPlayerService 声明的一样</p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="xml" contenteditable="false" cid="n3171" mdtype="fences">&lt;receiver android:name="com.ximalaya.ting.android.opensdk.test.reciver.MyPlayerReceiver" android:exported="true" android:process=":player"&gt;
    &lt;intent-filter&gt;
        &lt;action android:name="com.app.test.android.Action_Close"/&gt;
    &lt;/intent-filter&gt;
&lt;/receiver&gt;
</pre><p>初始化</p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n3173" mdtype="fences">Notification mNotification = XmNotificationCreater.getInstanse(this).initNotification(this.getApplicationContext(), MainFragmentActivity.class);
mPlayerManager.init((int) System.currentTimeMillis(), mNotification);
</pre><ul><li>特殊要求</li></ul><p>提供文件名为<code>view_notify_play</code>和<code>view_notify_play_big</code> ,<code>view_notify_dark_play</code> ,<code>view_notify_dark_play_big</code>的布局文件，如以下样例文件，每个view的名字和资源名不要修改。
资源请拷贝<code>sdk_drawable</code> 文件夹中的资源</p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n3178" mdtype="fences">XmPlayerManager.getInstance(this).init(
    notificationid,
    XmNotificationCreater.getInstanse(this)
        .createNotification(this.getApplicationContext(),
    MainActivity.class));
</pre><p>如果贵方的 targetSdkVersion &gt;= 24 需要在 XmNotificationCreater 初始化之前执行
NotificationColorUtils.isTargerSDKVersion24More = true;</p><h2><a name='header-n3180' class='md-header-anchor '></a>4.9 拼接Track信息进行播放</h2><h3><a name='header-n3181' class='md-header-anchor '></a>4.9.1 播放已经下载好的声音</h3><p>如果希望播放自己已经下载的音频可以自己将我们的Track进行填充数据
一下几个参数是必须的:</p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n3183" mdtype="fences">private String kind; (这里的值固定为 PlayableModel.KIND_TRACK)

private String trackTitle;

private String downloadedSaveFilePath;

private long dataId; (这里可以固定写为 '-1 * Math.abs(track.getTrackTitle().hashCode())' ,保证每个dataId不一样并且为负数)
</pre><h3><a name='header-n3184' class='md-header-anchor '></a>4.9.2 播放在线声音(声音资源是第三方的)</h3><p>如果希望播放在线音频可以自己将我们的Track进行填充数据
一下几个参数是必须的:</p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n3186" mdtype="fences">private String kind; (这里的值固定为 PlayableModel.KIND_TRACK)

private String trackTitle;

private String playUrl32;

private long dataId; (这里可以固定写为 '-1 * Math.abs(track.getTrackTitle().hashCode())' ,保证每个dataId不一样并且为负数)
</pre><h3><a name='header-n3187' class='md-header-anchor '></a>4.9.3 播放在线声音(声音资源是喜马拉雅的)</h3><p>一下几个参数是必须的:</p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n3189" mdtype="fences">private String kind; (这里的值固定为 PlayableModel.KIND_TRACK)

private String trackTitle;

private long dataId;(这里的dataId 就是trackId ,必须是喜马拉雅的资源,不用传播放地址,sdk内会根据此id自动获取播放地址)
</pre><h3><a name='header-n3190' class='md-header-anchor '></a>4.9.4 额外展示使用参数</h3><p>下面几个参数贵方如果有的话最好也要填写</p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n3192" mdtype="fences" style="page-break-inside: unset;">private String coverUrlSmall;
private String coverUrlMiddle;
private String coverUrlLarge;

private Announcer announcer;中的private String nickname;(也就是Track.Announcer.nickname)

private int duration;

private String playUrl32;
private int playSize32;
private String playUrl64;
private int playSize64;
private String playUrl24M4a;
private String playSize24M4a;
private String playUrl64M4a;
private String playSize64m4a;

private long downloadedSize;	// 这个和downloadedSaveFilePath的文件对应
</pre><p>例子 :</p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n3194" mdtype="fences">Track track = new Track();

track.setKind(PlayableModel.KIND_TRACK);
track.setDownloadedSaveFilePath(Environment.getExternalStorageDirectory() + File.separator + "danding.mp3");
track.setTrackTitle("danding.mp3");
track.setDataId(-1 * track.getTrackTitle().hashCode());
List&lt;Track&gt; tracks = new ArrayList&lt;Track&gt;();
tracks.add(track);

XmPlayerManager.getInstance(MainFragmentActivity.this).playList(tracks ,0);
</pre><h2><a name='header-n3195' class='md-header-anchor '></a>4.10 播放器初始化完成回调</h2><p>初始化播放的时候我们的播放器有启动过程,如果在播放器未启动成功时设置播放器参数会失败, 可以通过</p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n3197" mdtype="fences">XmPlayerManager.getInstance(mContext).setOnConnectedListerner(xxxx)  (已过时请使用如下方法:)

public void addOnConnectedListerner(IConnectListener l)
public void removeOnConnectedListerner(IConnectListener l)
</pre><p>监听播放器完全启动后的回调 (这个时候可以设置播放列表播放模式等操作)</p><h2><a name='header-n3199' class='md-header-anchor '></a>4.11 播放器加载播放音质策略</h2><p>在wifi网络下会自动加载高音质
在3G下会加载较低音质,如果希望一直加载高音质可以使用</p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n3201" mdtype="fences">XmPlayerConfig.getInstance(mAppCtx).setUseTrackHighBitrate(true)
</pre><h2><a name='header-n3202' class='md-header-anchor '></a>4.12 不希望记住播放记录(即每次播放从头开始播放)</h2><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n3203" mdtype="fences">// 需要在connect回调之后调用
XmPlayerManager.getInstance(mAppctx).setBreakpointResume(false)
</pre><h2><a name='header-n3204' class='md-header-anchor '></a>4.13 关于贵方的智能硬件设备是x86平台的问题</h2><p>如果贵方的智能硬件设备是 x86 平台,并且贵方没有接入我们的直播内容 ,为了提高稳定性 ,可以通过配置如下代码进行解决</p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n3206" mdtype="fences">XmPlayerConfig  中的 setUseSystemPlayer(true) 方法
此方法因为不是公开方法需要通过反射调用
</pre><h2><a name='header-n3207' class='md-header-anchor '></a>4.14 贵方同时使用了自己的播放器和我们的播放器,线控被占用的问题</h2><p>在切换到贵方的播放器的时候 使用如下代码抢占注册</p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n3209" mdtype="fences" style="page-break-inside: unset;">final CustomMediaButtonReceiver wireControlReceiver = new CustomMediaButtonReceiver();
if (android.os.Build.VERSION.SDK_INT &gt;= 21) {
    MediaSession mSession = new MediaSession(mContext, "MusicService");
    mSession.setCallback(new MediaSession.Callback() {
        @Override
        public boolean onMediaButtonEvent(Intent mediaButtonIntent) {
            wireControlReceiver.onReceive(mContext, mediaButtonIntent);
            return super.onMediaButtonEvent(mediaButtonIntent);
        }
    });
    mSession.setFlags(MediaSession.FLAG_HANDLES_MEDIA_BUTTONS
            | MediaSession.FLAG_HANDLES_TRANSPORT_CONTROLS);
    Intent mediaButtonIntent = new Intent(Intent.ACTION_MEDIA_BUTTON);
    ComponentName mediaButtonReceiverComponent = new ComponentName(mContext, WireControlReceiver.class);
    mediaButtonIntent.setComponent(mediaButtonReceiverComponent);
    PendingIntent mediaPendingIntent = PendingIntent.getBroadcast(mContext.getApplicationContext(), 0,
            mediaButtonIntent, 0);
    mSession.setMediaButtonReceiver(mediaPendingIntent);
    AudioAttributes.Builder audioAttributesBuilder = new AudioAttributes.Builder();
    audioAttributesBuilder.setUsage(AudioAttributes.USAGE_MEDIA)
            .setContentType(AudioAttributes.CONTENT_TYPE_MUSIC);
    mSession.setPlaybackToLocal(audioAttributesBuilder.build());
    mSession.setActive(true);
    PlaybackState state = new PlaybackState.Builder()
            .setActions(
                    PlaybackState.ACTION_PLAY
                            | PlaybackState.ACTION_PLAY_PAUSE
                            | PlaybackState.ACTION_PLAY_FROM_MEDIA_ID
                            | PlaybackState.ACTION_PAUSE
                            | PlaybackState.ACTION_SKIP_TO_NEXT
                            | PlaybackState.ACTION_SKIP_TO_PREVIOUS)
            .setState(PlaybackState.STATE_PLAYING, 0, 1,
                    SystemClock.elapsedRealtime()).build();
    mSession.setPlaybackState(state);

}

//获得AudioManager对象
AudioManager audioManager = (AudioManager) getSystemService(Context.AUDIO_SERVICE);
ComponentName mbCN = new ComponentName(getPackageName(), CustomMediaButtonReceiver.class.getName());
audioManager.registerMediaButtonEventReceiver(mbCN);

Intent mediaButtonIntent = new Intent(
        Intent.ACTION_MEDIA_BUTTON);
mediaButtonIntent.setComponent(mbCN);
PendingIntent mediaPendingIntent = PendingIntent.getBroadcast(
        mContext, 0, mediaButtonIntent,
        PendingIntent.FLAG_UPDATE_CURRENT);

// create and register the remote control client
RemoteControlClient mRemoteControlClient = new RemoteControlClient(
        mediaPendingIntent);
audioManager.registerRemoteControlClient(mRemoteControlClient);
int flags = RemoteControlClient.FLAG_KEY_MEDIA_PREVIOUS
        | RemoteControlClient.FLAG_KEY_MEDIA_NEXT
        | RemoteControlClient.FLAG_KEY_MEDIA_PLAY
        | RemoteControlClient.FLAG_KEY_MEDIA_PAUSE
        | RemoteControlClient.FLAG_KEY_MEDIA_PLAY_PAUSE
        | RemoteControlClient.FLAG_KEY_MEDIA_RATING;
mRemoteControlClient
        .setTransportControlFlags(flags);
IntentFilter inFilter = new IntentFilter(
        "android.intent.action.MEDIA_BUTTON");
inFilter.setPriority(10000);
mContext.registerReceiver(wireControlReceiver, inFilter);
</pre><h2><a name='header-n3210' class='md-header-anchor '></a>4.15 不希望SDK处理AudioFocus</h2><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n3211" mdtype="fences">设置是否处理一般的audioFocus
XmPlayerConfig.getInstance().setSDKHandleAudioFocus(boolean flag);

设置是否处理电话拨出或进来时的AudioFocus
XmPlayerConfig.getInstance().setSDKHandlePhoneComeAudioFocus(boolean flag);

设置耳机线的插拔是的AudioFocus
XmPlayerConfig.getInstance().setSDKHandleHeadsetPlugAudioFocus(boolean flag);
</pre><h2><a name='header-n3212' class='md-header-anchor '></a>4.16 播放缓存设置缓存数量</h2><p>当前的播放缓存使用 LRU算法进行淘汰之前旧的数据,当前缓存数量为5个如需配置可设置 PlayCacheByLRU.PLAY_CACHE_NUM</p><h2><a name='header-n3214' class='md-header-anchor '></a>4.17 是否使用防劫持方案</h2><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n3215" mdtype="fences">// 注意此方法需在CommonRequest XmPlayerManager 初始化之前设置
 XmPlayerConfig.getInstance(this).usePreventHijack(true);
</pre><h2><a name='header-n3216' class='md-header-anchor '></a>4.18 倍速播放</h2><p>设置多少倍的速度  可以小于 1  此方法必须添加 libsoundtouch.so</p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n3218" mdtype="fences">XmPlayerManager.getInstance(mContext).setTempo(1.5f);
</pre><h2><a name='header-n3219' class='md-header-anchor '></a>4.19 定时关闭</h2><p>time填入的时间应该为当前时间+要停止的时间既(System.currentTimeMillis() + 10000 表示在10秒之后停止播放) time 时间单位为毫秒
传入-1表示 播放完当前歌曲关闭
传入0表示取消计划</p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n3221" mdtype="fences">XmPlayerManager.getInstance(mContext).pausePlayInMillis(time);
</pre><h2><a name='header-n3222' class='md-header-anchor '></a>4.20 是否处理因为网络断开导致的不能播放问题</h2><p>在播放器内部会判断如果播放失败的时候没有网络,则会在1分钟内发现网络连接上了,会自动尝试播放</p><p>如果希望关闭,在applicaiton初始化的时候调用(播放进程使用)</p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n3225" mdtype="fences">XmPlayerConfig.monitorNetWorkChangeAndTryPlay = false;
</pre><p>&nbsp;</p><h1><a name='header-n3227' class='md-header-anchor '></a>5 错误处理</h1><h2><a name='header-n3228' class='md-header-anchor '></a>5.1 HTTP响应码</h2><figure><table><thead><tr><th>响应码</th><th>描述</th></tr></thead><tbody><tr><td>200</td><td>请求成功</td></tr><tr><td>201</td><td>创建成功</td></tr><tr><td>202</td><td>更新成功</td></tr><tr><td>301</td><td>请求永久重定向</td></tr><tr><td>302</td><td>请求临时重定向</td></tr><tr><td>304</td><td>未更改</td></tr><tr><td>400</td><td>请求地址不存在或者包含不支持的参数</td></tr><tr><td>401</td><td>未授权，因为未成功进行身份认证</td></tr><tr><td>403</td><td>被禁止访问，因为没有访问特定资源的权限</td></tr><tr><td>404</td><td>请求的资源不存在</td></tr><tr><td>422</td><td>服务器理解请求，但其中包含非法参数（如包含XSS攻击风险参数）</td></tr><tr><td>429</td><td>请求频率超配</td></tr><tr><td>500</td><td>服务器内部错误</td></tr></tbody></table></figure><h2><a name='header-n3272' class='md-header-anchor '></a>5.2 错误码</h2><figure><table><thead><tr><th>error_no</th><th>error_code</th><th>说明</th></tr></thead><tbody><tr><td>100</td><td>ximalaya.common.request_param_check_failed</td><td>参数校验失败错误，包括参数缺失、参数格式错误等情况</td></tr><tr><td>101</td><td>ximalaya.common.signature_check_failed</td><td>签名验证失败(这里的签名验证不会验证贵方在网站上填写的android md5)验证的是appscrent (请检测app_key、app_secret和pack_id 这三个值是否设置正确)</td></tr><tr><td>102</td><td>ximalaya.common.permission_validate_failed</td><td>权限验证失败</td></tr><tr><td>103</td><td>ximalaya.common.app_validate_failed</td><td>app_key无效或者应用处于不可用状态或者应用的client_os_type、pack_id等参数不匹配</td></tr><tr><td>104</td><td>ximalaya.common.request_out_of_limit</td><td>调用请求次数超出限额</td></tr><tr><td>200</td><td>ximalaya.oauth2.redirect_uri_invalid</td><td>回调地址无效</td></tr><tr><td>201</td><td>ximalaya.oauth2.response_type_invalid</td><td>授权类型无效</td></tr><tr><td>202</td><td>ximalaya.oauth2.scope_grant_denied</td><td>授权范围无效或超出权限许可范围</td></tr><tr><td>203</td><td>ximalaya.oauth2.authorization_code_invalid</td><td>授权临时票据 code 错误或失效</td></tr><tr><td>204</td><td>ximalaya.oauth2.authorization_grant_denied</td><td>授权访问失败：用户或者授权服务器拒绝授予数据访问权限</td></tr><tr><td>205</td><td>ximalaya.oauth2.grant_type_invalid</td><td>授权模式无效</td></tr><tr><td>206</td><td>ximalaya.oauth2.access_token_invalid_or_expired</td><td>授权访问令牌 access_token 无效或过期</td></tr><tr><td>207</td><td>ximalaya.oauth2.user_login_failed</td><td>用户登录验证失败：用户名或密码错误；或者 ssoCode 失效</td></tr><tr><td>208</td><td>ximalaya.authenticate.oauth2_authenticate_failed</td><td>Oauth2 签名验证失败</td></tr><tr><td>209</td><td>ximalaya.authenticate.oauth2_device_id_invalid</td><td>device_id 无效</td></tr><tr><td>210</td><td>ximalaya.common.app_validate_failed app_key</td><td>无效或者应用处于不可用状态</td></tr><tr><td>211</td><td>ximalaya.common.uid_is_missing_or_invalid uid</td><td>缺失或无效</td></tr><tr><td>212</td><td>ximalaya.oauth2.refresh_token_invalid_or_expired</td><td>刷新令牌 refresh_token 无效或过期</td></tr><tr><td>300</td><td>ximalaya.platformcoorp.otp_invalid_or_expired</td><td>动态口令参数otp不正确或者已过期</td></tr><tr><td>500</td><td>ximalaya.system.internal_service_error</td><td>调用开放平台内部服务发生错误</td></tr><tr><td>501</td><td>ximalaya.system.thirdparty_service_error</td><td>调用第三方服务发生错误</td></tr><tr><td>502</td><td>ximalaya.system.unknown_server_error</td><td>未知服务器错误</td></tr><tr><td>604</td><td>XXXXXXXX</td><td>http 请求出错,具体看返回的详情</td></tr><tr><td>1001</td><td>request url is empty</td><td>请求链接为null</td></tr><tr><td>1002</td><td>exception occurs when caculate signature</td><td>签名为null</td></tr><tr><td>1003</td><td>Form encoded body must have at least one part</td><td>表单参数不能为null</td></tr><tr><td>1004</td><td>you must call #XiMaLaYa.init</td><td>没有调用初始化函数</td></tr><tr><td>1005</td><td>get appkey error from AndroidManifest.xml metaData</td><td>获得appkey出错 从AndroidManifest.xml</td></tr><tr><td>1006</td><td>XXXXXXXX</td><td>获得系统参数出错,具体看详情</td></tr><tr><td>1007</td><td>XXXXXXXX</td><td>转换请求返回结果的时候出错</td></tr><tr><td>1008</td><td>UnsupportedEncodingException:XXXXX</td><td>编码时错误</td></tr><tr><td>1009</td><td>parse data error</td><td>解析返回的数据失败</td></tr><tr><td>1010</td><td>get accesstoken fail</td><td>网络获得token出错</td></tr><tr><td>1011</td><td>http error</td><td>或者其他返回值<span>	</span>网络请求出错,具体看返回值</td></tr><tr><td>1012</td><td>request url parse error</td><td>请求的链接parse 失败</td></tr><tr><td>1013</td><td>token Invalid</td><td>没有token或token过期失效</td></tr><tr><td>1014</td><td>login need</td><td>需要登录</td></tr></tbody></table></figure><h1><a name='header-n3426' class='md-header-anchor '></a>6 音频下载功能</h1><h2><a name='header-n3427' class='md-header-anchor '></a>6.1 概述</h2><h2><a name='header-n3428' class='md-header-anchor '></a>6.2 接口</h2><h3><a name='header-n3429' class='md-header-anchor '></a>6.2.1 初始化</h3><p>在application 内使用</p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n3431" mdtype="fences" style="page-break-inside: unset;">XmDownloadManager.Builder(this)
        .maxDownloadThread(1)			// 最大的下载个数 默认为1 最大为3
        .maxSpaceSize(Long.MAX_VALUE)	// 设置下载文件占用磁盘空间最大值，单位字节。不设置没有限制
        .connectionTimeOut(15000)		// 下载时连接超时的时间 ,单位毫秒 默认 30000
        .readTimeOut(15000)				// 下载时读取的超时时间 ,单位毫秒 默认 30000
        .fifo(false)					// 等待队列的是否优先执行先加入的任务. false表示后添加的先执行(不会改变当前正在下载的音频的状态) 默认为true
        .maxRetryCount(3)				// 出错时重试的次数 默认2次
        .progressCallBackMaxTimeSpan(1000)//  进度条progress 更新的频率 默认是800
        .requestTracker(requestTracker)	// 日志 可以打印下载信息
        .savePath(getExternalFilesDir("mp3").getAbsolutePath())	// 保存的地址 会检查这个地址是否有效
        .create();

// 此代码表示播放时会去监测下是否已经下载(setDownloadPlayPathCallback 方法已经废弃 请使用如下方法)
XmPlayerManager.getInstance(this).setCommonBusinessHandle(XmDownloadManager.getInstance());

// 在需要设置监听下载的页面设置
XmDownloadManager.getInstance().addDownloadStatueListener(this);

XmDownloadManager.getInstance().removeDownloadStatueListener(this);

public interface IXmDownloadTrackCallBack {
    // 正在等待下载
    void onWaiting(Track track);

    // 正在下载中
    void onStarted(Track track);

    // 下载成功
    void onSuccess(Track track);

    // 下载失败
    void onError(Track track, Throwable ex);

    // 下载取消
    void onCancelled(Track track , Callback.CancelledException cex);

    // 下载进度更改
    void onProgress(Track track ,long total, long current);

    // 下载被删除了
    void onRemoved();
}

</pre><h3><a name='header-n3432' class='md-header-anchor '></a>6.2.2 下载接口</h3><p><strong>接口说明：</strong></p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n3434" mdtype="fences" style="page-break-inside: unset;"> // TODO: 下载的接口
/**
 * 下载单条音频，注意该接口应该包含从头开始下载和继续下载功能（即也包括恢复下载功能）
 * @param trackId
 */
void downloadSingleTrack(long trackId ,IDoSomethingProgress&lt;AddDownloadException&gt; IAddDownloadProgress);

/**
 * 下载单条声音,判断是否立马下载
 * @param trackId
 * @param isDownloadNow
 */
void downloadSingleTrack(long trackId ,boolean isDownloadNow ,IDoSomethingProgress&lt;AddDownloadException&gt; IAddDownloadProgress);

/**
 * 批量下载音频，批量数目不能超过50，注意该接口应该包含从头开始下载和继续下载功能（即也包括恢复下载功能）
 * @param trackIds
 */
void downloadTracks(List&lt;Long&gt; trackIds ,IDoSomethingProgress&lt;AddDownloadException&gt; IAddDownloadProgress);

/**
 * 批量下载音频 ,判断是否立马下载
 * @param trackIds
 * @param isDownloadNow
 */
void downloadTracks(List&lt;Long&gt; trackIds ,boolean isDownloadNow ,IDoSomethingProgress&lt;AddDownloadException&gt; IAddDownloadProgress);

/**
 * 批量下载付费音频 ,判断是否立马下载
 * @param trackIds
 * @param isDownloadNow
 */
public void downloadPayTracks(final List&lt;Long&gt; trackIds, final boolean isDownloadNow, final IDoSomethingProgress&lt;AddDownloadException&gt; addDownloadProgress)
</pre><p><strong>参数说明：</strong></p><ul><li>trackIds 要进行下载的track的Id</li><li>isDwonloadNow 如果为false表示只添加到下载列表,并不立即下载 一般用在用户在移动网络下使用</li><li>IAddDownloadProgress 回调函数 具体的回调是</li></ul><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n3443" mdtype="fences">// 开始
void begin();

// 成功
void success();

 // 失败
void fail(T ex);
</pre><p>其中的AddDownloadException 中的code的值表示</p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n3445" mdtype="fences" style="page-break-inside: unset;">    /**
     * 参数不能为null
     */
    public static final int CODE_NULL;

    /**
     * 批量下载个数超过最大值
     */
    public static final int CODE_MAX_OVER;

    /**
     * 不能找到相应的声音
     */
    public static final int CODE_NOT_FIND_TRACK;

    /**
     * 下载任务队列最大长度限定为500，即同时下载的音频个数不能超过500
     */
    public static final int CODE_MAX_DOWNLOADING_COUNT;

    /**
     * 磁盘已满
     */
    public static final int CODE_DISK_OVER;

    /**
     * 下载的音频超过了设置的最大空间
     */
    public static final int CODE_MAX_SPACE_OVER;

    /**
     * 下载的付费音频中有没有支付
     */
    public static final int CODE_NO_PAY_SOUND;
</pre><h3><a name='header-n3446' class='md-header-anchor '></a>6.2.3 暂停下载接口</h3><p><strong>接口说明：</strong></p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n3448" mdtype="fences" style="page-break-inside: unset;">/**
 * 暂停单条音频下载
 * @param trackId
 */
void pauseDownloadSingleTrack(long trackId);

/**
 *  批量暂停音频下载
 * @param trackIds
 */
void batchPauseDownloadTracks(Collection&lt;Long&gt; trackIds ,IDoSomethingProgress pauseProgress);

/**
 * 暂停某个专辑下所有音频下载
 * @param albumId
 */
void pauseDownloadTracksInAlbum(long albumId ,IDoSomethingProgress pauseProgress);

/**
 * 暂停全部音频下载
 */
void pauseAllDownloads(IDoSomethingProgress pauseProgress);
</pre><p><strong>参数说明：</strong></p><ul><li>trackId 要暂停的Track的id</li><li>albumId 要暂停的Album的id</li><li>pauseProgress 批量的时候的进度</li></ul><h3><a name='header-n3457' class='md-header-anchor '></a>6.2.4 恢复下载接口</h3><p><strong>接口说明：</strong></p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n3459" mdtype="fences" style="page-break-inside: unset;">/**
 * 恢复被暂停的单条音频下载任务
 * @param trackId
 */
void resumeDownloadSingleTrack(long trackId);

/**
 * 批量恢复被暂停的音频下载任务
 * @param trackIds
 */
void batchResumeDownloadTracks(List&lt;Long&gt; trackIds ,IDoSomethingProgress resumeProgress);

/**
 * 恢复被暂停的某个专辑下所有音频下载
 * @param albumId
 */
void resumeDownloadTracksInAlbum(long albumId ,IDoSomethingProgress resumeProgress);

/**
 * 恢复所有被暂停的音频下载任务
 */
void resumeAllDownloads(IDoSomethingProgress resumeProgress);
</pre><p><strong>参数说明：</strong></p><ul><li>trackId 要继续的Track的id</li><li>albumId 要继续的Album的id</li><li>pauseProgress 批量的时候的进度 一般进行弹出进度框</li></ul><h3><a name='header-n3468' class='md-header-anchor '></a>6.2.5 取消下载接口</h3><p><strong>接口说明：</strong></p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n3470" mdtype="fences" style="page-break-inside: unset;">/**
 * 取消单条音频下载，如果已下载了部分内容需要清理
 * @param trackId
 */
void cancelDownloadSingleTrack(long trackId);

/**
 * 批量取消音频下载，如果已下载了部分内容需要清理
 * @param trackIds
 */
void batchCancelDownloadTracks(List&lt;Long&gt; trackIds ,IDoSomethingProgress cancleProgress);

/**
 * 取消下载某个专辑下的所有音频，如果已下载了部分内容需要清理
 * @param albumId
 */
void cancelDownloadTracksInAlbum(long albumId ,IDoSomethingProgress cancleProgress);

/**
 * 取消全部音频下载
 */
void cancelAllDownloads(IDoSomethingProgress cancleProgress);
</pre><p><strong>参数说明：</strong></p><ul><li>trackId 要取消的Track的id</li><li>albumId 要取消的Album的id</li><li>pauseProgress 批量的时候的进度 一般进行弹出进度框</li></ul><h3><a name='header-n3479' class='md-header-anchor '></a>6.2.6 获取下载状态接口</h3><p><strong>接口说明：</strong></p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n3481" mdtype="fences" style="page-break-inside: unset;">/**
 * 获取单条音频下载状态，TrackDownloadStatus包括下载任务状态（等待下载、下载暂停、下载取消、正在下载、下载完成、下载出错等）、
 * 下载任务添加时间、音频文件总大小、已下载大小等
 * @param trackId
 * @return
 */
DownloadState getSingleTrackDownloadStatus(long trackId);

/**
 * 批量获取下载状态
 * @param trackIds
 * @return
 */
Map&lt;Long, DownloadState&gt; batchGetTracksDownloadStatus(List&lt;Long&gt; trackIds);

/**
 * 专辑内声音的下载状态
 * @param albumId
 * @return
 */
Map&lt;Long, DownloadState&gt; getTracksInAlbumDownloadStatus(long albumId);

/**
 * 获得所有的声音的下载状态
 * @return
 */
Map&lt;Long, DownloadState&gt; getAllDownloadStatus();
</pre><p><strong>参数说明：</strong></p><ul><li>trackId 要获得状态的Track的id</li><li>albumId 要获得状态的Album的id</li><li>trackIds 批量获取状态的ids</li><li>DownloadState 的类型如下</li></ul><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n3492" mdtype="fences">WAITING(0),  "等待";
STARTED(1),  "开始";
FINISHED(2), "结束";
STOPPED(3),  "停止";
ERROR(4) ,   "错误";
NOADD(5);    "未添加";
</pre><h3><a name='header-n3493' class='md-header-anchor '></a>6.2.7 正在下载或已下载的音频列表</h3><p><strong>接口说明：</strong></p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n3495" mdtype="fences" style="page-break-inside: unset;">/**
 * 获取所有已下载的专辑
 * @return
 */
List&lt;XmDownloadAlbum&gt; getDownloadAlbums(boolean isDownloaded);

/**
 * 通过专辑的Id获得所有的声音
 * @param albumId
 * @return
 */
List&lt;Track&gt; getDownloadTrackInAlbum(long albumId ,boolean isDownloaded);

/**
 * 获得多个下载的音频
 * @return
 */
List&lt;Track&gt; getDownloadTracks(boolean isDownloaded);

/**
 * 获取当前下载的音频的个数
 * @param isDownloaded
 * @return
 */
int getDownloadTrackCount(boolean isDownloaded);

/**
 * 获取下载的信息
 * @param trackId
 * @param isDownloaded
 * @return
 */
Track getDownloadInfo(long trackId , boolean isDownloaded);
</pre><p><strong>参数说明：</strong></p><ul><li>trackId 要获得Track的Track的id</li><li>albumId 要获得Tracks的Album的id</li><li>trackIds 批量获取的Tracks的ids</li><li>isDownloaded true表示获取已下载的声音的状态 false表示获取正在下载的声音</li></ul><h3><a name='header-n3506' class='md-header-anchor '></a>6.2.8 清理下载接口</h3><p><strong>接口说明</strong></p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n3508" mdtype="fences" style="page-break-inside: unset;">/**
 * 清理磁盘上的指定下载好音频文件
 * @param trackId
 */
void clearDownloadedTrack(long trackId);

/**
 * 批量清理音频下载好的文件
 * @param trackIds
 */
void batchClearDownloadedTracks(List&lt;Long&gt; trackIds ,IDoSomethingProgress clearProgress);

/**
 * 清理某个专辑下的所有音频下载好的文件
 * @param albumId
 */
void clearDownloadedAlbum(long albumId ,IDoSomethingProgress clearProgress);

/**
 * 清理所有下载好的音频文件
 */
void clearAllDownloadedTracks(IDoSomethingProgress clearProgress);
</pre><p><strong>参数说明：</strong></p><ul><li>trackId 要清理的Track的Track的id</li><li>trackIds 批量清理的Tracks的ids</li><li>albumId 要清理的Tracks的Album的id</li><li>clearProgress 清理的时候的进行</li></ul><h3><a name='header-n3519' class='md-header-anchor '></a>6.2.9 获取下载文件已占用的磁盘空间</h3><p><strong>接口说明</strong></p><p>获取下载文件已占用的磁盘空间，以人类可读方式返回，比如&quot;2G 800MB 15KB&quot;。</p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n3522" mdtype="fences">String getHumanReadableDownloadOccupation(@DownloadSizePrecision int precision);
</pre><p><strong>参数说明：</strong></p><ul><li>precision 表示精度，取值包括&quot;B、KB、MB、G&quot;，分别表示返回的值精确到字节、KB、MB或者G
​    如果设置为 Auto 表示根据当前大小返回最合适的字符串
​</li></ul><h3><a name='header-n3526' class='md-header-anchor '></a>6.2.10 是否有正在下载的任务</h3><p><strong>接口说明</strong></p><p>是否有正在下载的任务</p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n3530" mdtype="fences"> boolean haveDowningTask();
</pre><h3><a name='header-n3532' class='md-header-anchor '></a>6.2.11 设置网络代理</h3><p><strong>接口说明</strong></p><p>用于设置SDK联网配置。当不需要网络代理时，设置为null即可。</p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n3535" mdtype="fences">void setHttpConfig(Config config);
</pre><p><strong>参数说明：</strong>
Config是SDK联网配置，Config的所有成员变量如下：</p><figure><table><thead><tr><th>参数名</th><th>参数类型</th><th>参数说明</th></tr></thead><tbody><tr><td>useProxy</td><td>Boolean</td><td>使用代理开关</td></tr><tr><td>proxyHost</td><td>String</td><td>代理服务器ip地址</td></tr><tr><td>proxyPort</td><td>Int</td><td>代理服务器端口</td></tr><tr><td>authorization</td><td>String</td><td>代理服务器授权信息</td></tr><tr><td>useCache</td><td>Boolean</td><td>使用缓存开关</td></tr><tr><td>connectionTimeOut</td><td>Int</td><td>连接超时</td></tr><tr><td>readTimeOut</td><td>Int</td><td>读取超时</td></tr><tr><td>property</td><td>Map&lt;String, String&gt;</td><td>请求头</td></tr></tbody></table></figure><h3><a name='header-n3574' class='md-header-anchor '></a>6.2.12 释放</h3><p><strong>接口说明</strong></p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n3576" mdtype="fences">void release();
</pre><h3><a name='header-n3577' class='md-header-anchor '></a>6.2.13  更改保存的地址</h3><p><strong>接口说明</strong>
更改保存的地址(当前下载列表中的保存的地址都不会发生变化)</p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n3579" mdtype="fences">void changeSavePath(String savePath);
</pre><p><strong>参数说明：</strong>
-savePath 保存的地址</p><h3><a name='header-n3581' class='md-header-anchor '></a>6.2.13 更改保存的地址 并转移已经下载,未下载,正在下载的音频</h3><p><strong>接口说明</strong></p><p>更改保存的地址 并转移已经下载,未下载,正在下载的音频</p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n3584" mdtype="fences">void changeSavePathAndTransfer(String savePath ,ITransferFileProgress doSomethingProgress);
</pre><p><strong>参数说明：</strong></p><ul><li>savePath 保存的地址</li><li>doSomethingProgress 继承了IDoSomethingProgress 多加了一个 void
progress(int cur ,int count); 回调,参数 cur表示当前转移到第几个
count表示总共需要转移的个数</li></ul><h3><a name='header-n3591' class='md-header-anchor '></a>6.2.14 更换顺序</h3><p><strong>接口说明</strong></p><p>更换顺序</p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n3594" mdtype="fences">void swapDownloadedPosition(Map&lt;Long ,Integer&gt; trackPosition ,IDoSomethingProgress doSomethingProgress);
</pre><p><strong>参数说明：</strong></p><ul><li>trackPosition 中的key表示track的id ,Integer 表示要调整的位置</li><li>doSomethingProgress 表示处理的进度</li></ul><h3><a name='header-n3601' class='md-header-anchor '></a>6.2.15 获得下载的音频根据album进行分组</h3><p><strong>接口说明</strong></p><p>获得下载的音频根据album进行分组</p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n3604" mdtype="fences">List&lt;XmDownloadAlbumHaveTracks&gt; getDownloadListByAlbum(boolean isDownloaded);
</pre><p><strong>参数说明：</strong></p><ul><li>isDownloaded true表示获取已下载的声音的状态 false表示获取正在下载的声音</li></ul><h3><a name='header-n3610' class='md-header-anchor '></a>6.2.16 album里面是否有正在下载的track</h3><p><strong>接口说明</strong></p><p>album里面是否有正在下载的track</p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n3613" mdtype="fences">boolean albumHaveDownloadingTrack(long albumId);
</pre><p><strong>参数说明：</strong></p><ul><li>albumId 要获得的album信息的id</li></ul><h3><a name='header-n3619' class='md-header-anchor '></a>6.2.17 添加全局的添加下载的listener</h3><p><strong>接口说明</strong></p><p>添加全局的添加下载的listener</p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n3622" mdtype="fences">void setAddDownloadProgressListener(IDoSomethingProgress addDownloadProgress);
</pre><p><strong>参数说明：</strong></p><ul><li>addDownloadProgress 添加下载时的进度</li></ul><h2><a name='header-n3627' class='md-header-anchor '></a>6.3 工具方法</h2><h3><a name='header-n3628' class='md-header-anchor '></a>6.3.1 ComparatorUtil.java</h3><p>这个类可以方便的对获得tracks进行排序</p><ol start='' ><li>根据用户传进来的属性进行排序</li></ol><p><strong>接口说明</strong>
这个表示优先按照某个排序方式进行排序
比如先使用下载完成时间 如果两个比较是相等的 则再比较手动排序的</p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n3634" mdtype="fences">public static Comparator&lt;Track&gt; comparatorByTypeMap(final LinkedHashMap&lt;Integer ,Boolean&gt; sortType)
</pre><p><strong>参数说明</strong>
Integer 有一下几个取值
public static final int DownloadOverTime = 1;   // 下载完成时间
public static final int UserSort = 2;           // 用户手动排序
public static final int AlbumSort = 3;          // 专辑内部的排序</p><p>Boolean 是否是正序排序</p><ol start='2' ><li>根据下载完成的时间排序</li></ol><p><strong>接口说明</strong></p><p>根据下载完成的时间排序</p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n3642" mdtype="fences">public static Comparator&lt;Track&gt; comparatorByDownloadOverTime(final boolean positive);
</pre><p><strong>参数说明</strong></p><ul><li>positive 是否是正序排序</li></ul><ol start='3' ><li>根据用户手动排序</li></ol><p><strong>接口说明</strong></p><p>根据用户手动排序</p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n3653" mdtype="fences">public static Comparator&lt;Track&gt; comparatorByUserSort(final boolean positive);
</pre><p><strong>参数说明</strong></p><ul><li>positive 是否是正序排序</li></ul><ol start='4' ><li>根据专辑内的排序进行排序</li></ol><p><strong>接口说明</strong></p><p>根据专辑内的排序进行排序</p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n3663" mdtype="fences"> public static Comparator&lt;Track&gt; comparatorByAlbumSort(final boolean positive);
</pre><p><strong>参数说明</strong></p><ul><li>positive 是否是正序排序</li></ul><h1><a name='header-n3668' class='md-header-anchor '></a>7 登录授权SDK</h1><p>登录不清楚可以查看demo中的XmAuthDemoActivity 类,直接拷贝相关代码</p><h2><a name='header-n3670' class='md-header-anchor '></a>登录流程简图</h2><p><img src='img/登录流程图.png' alt='点击' referrerPolicy='no-referrer' /></p><h2><a name='header-n3672' class='md-header-anchor '></a>7.1 manifest 需要声明OAuth2 Android  SDK中的 Activity：<br></h2><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="xml" contenteditable="false" cid="n3673" mdtype="fences">&lt;activity
    android:name="com.ximalaya.ting.android.opensdk.auth.component.XmlyBrowserComponent"
    android:configChanges="keyboardHidden|orientation"
    android:exported="false"
    android:windowSoftInputMode="adjustResize" /&gt;
</pre><h2><a name='header-n3674' class='md-header-anchor '></a>7.2 使用回调确定是否有需要登录授权的情况</h2><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n3675" mdtype="fences" style="page-break-inside: unset;">// 使用此回调了就表示贵方接了需要用户登录才能访问的接口,如果没有此类接口可以不用设置此接口,之前的逻辑没有发生改变
// !!! 此监听在登录之后设置上 ,退出登录后需要取消掉
CommonRequest.getInstanse().setITokenStateChange(new CommonRequest.ITokenStateChange() {
    // 此接口表示token已经失效 ,如果第三方有refreshToken(refreshToken 由我方给出,refresh操作由贵方服务端实现,具体服务端实现请咨询文档后面的技术支持) 可以用refreshToken来获取或延长token
    // refresh 分同步请求和异步请求,同步请求一般是在请求过程中,我方服务端发现token已经过期,给返回token失效code,这时如果可以通过refreshtoken 再次刷新token ,我方再次请求,则可以达到用户无感知的进行访问操作
    // 异步请求一般是在刚开始启动应用的是本地检查到token失效 这时对实时性要求不高则可以异步refresh
    // 返回true 表示已经发起了refresh操作 ,如果是同步接口还表示已经拿到最新的token ,具体可以查看我方demo中的实例
    // tokenLosted 表示经过了refreshToken操作了但是还是token失效 ,那么就要去登录页面了 ,因为refreshToken也是有过期时间的
    @Override
    public boolean getTokenByRefreshSync() {
        if(!TextUtils.isEmpty(AccessTokenManager.getInstanse().getRefreshToken())) {
            try {
                return refreshSync();
            } catch (XimalayaException e) {
                e.printStackTrace();
            }
        }
        return false;
    }

    @Override
    public boolean getTokenByRefreshAsync() {
        if(!TextUtils.isEmpty(AccessTokenManager.getInstanse().getRefreshToken())) {
            try {
                refresh();
                return true;
            } catch (XimalayaException e) {
                e.printStackTrace();
            }
        }
        return false;
    }

    @Override
    public void tokenLosted() {
        Intent intent = new Intent(PayActivity.this ,XMAuthDemoActivity.class);
        startActivity(intent);
    }
});

XMAuthDemoActivity 这个到时候由第三方自己实现 ,在此只是个实例
</pre><h2><a name='header-n3676' class='md-header-anchor '></a>7.3 调用登录授权接口</h2><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n3677" mdtype="fences">// 客户端 + Web 授权，如果手机安装了喜马拉雅客户端则使用客户端授权，没有则进行网页授权
mSsoHandler.authorize(new CustomAuthListener());

// 注意!!!!
// 客户端认证授权回调
// 非常重要：发起客户端认证授权的 Activity 必须重写 onActivityResults
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);
    if (mSsoHandler != null) {
        mSsoHandler.authorizeCallBack(requestCode, resultCode, data);
    }
}
</pre><h2><a name='header-n3678' class='md-header-anchor '></a><font color="red">7.4 将回调结果设置到SDK内(!!! 重要)</font></h2><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n3679" mdtype="fences">if (mAccessToken.isSessionValid()) {
    /**
     * 关键!!!!!!!!!!
     * 结果返回之后将取回的结果设置到token管理器中
     */
    if(!isThirdType) {
        AccessTokenManager.getInstanse().setAccessTokenAndUid(mAccessToken.getToken(), mAccessToken
                .getRefreshToken(), mAccessToken.getExpiresAt(), mAccessToken.getUid());
    }
}
</pre><h2><a name='header-n3680' class='md-header-anchor '></a>7.5 二维码登录</h2><h3><a name='header-n3681' class='md-header-anchor '></a>7.5.1 客户端请求获取二维码图片</h3><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n3682" mdtype="fences">public static void requestGernerateQRCodeForLogin(Map&lt;String ,String&gt; specificParams , final IGenerateCallBack callBack);

</pre><p><strong>参数说明：</strong></p><ul><li><p>specificParams：字段介绍如下</p><figure><table><thead><tr><th>字段名</th><th>类型</th><th>必填</th><th>描述</th></tr></thead><tbody><tr><td>size</td><td>String</td><td>否</td><td>二维码图片尺寸，有三个可选值：S，M，L（不填则为标准默认值M：S表示180<em>180尺寸，M表示238</em>238，L表示418*418）</td></tr></tbody></table></figure></li></ul><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n3698" mdtype="fences">// 回调
public interface IGenerateCallBack {
    //bitmap: 获得的图片
    // qrcodeId 用于标识此二维码的唯一id：用来查询用户登录状态；
    void qrcodeImage(Bitmap bitmap ,String qrcodeId);
    void onError(int code, String message);
}
</pre><h3><a name='header-n3699' class='md-header-anchor '></a>7.5.2 查询登录状态</h3><p><strong>接口签名：</strong></p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n3701" mdtype="fences"> public static void checkQRCodeLoginStatus(Map&lt;String ,String&gt; specificParams , final IDataCallBack&lt;XmlyAuth2AccessToken&gt; callBack)
</pre><p><strong>接口说明：</strong></p><p>查询登录状态及授权信息接口
若用户未登录，则继续轮询本接口查询用户登录状态，建议控制在2-3秒轮询一次
二维码图片过期，则需要重新调用接口获取新的有效二维码图片</p><p><strong>参数说明：</strong></p><ul><li><p>specificParams：字段介绍如下</p><figure><table><thead><tr><th>字段名</th><th>类型</th><th>必填</th><th>描述</th></tr></thead><tbody><tr><td>qrcode_id</td><td>String</td><td>是</td><td>7.5.1 接口返回的qrcodeId</td></tr></tbody></table></figure></li><li><p>callback：回调接口，成功则返回 XmlyAuth2AccessToken（字段描述见<strong>Model层.md</strong>）对象，失败则返回错误原因。</p></li></ul><p><strong>参考代码</strong></p><p>请参考demo中的  XMAuthDemoActivity.createQrcodeAndCheck 方法</p><h2><a name='header-n3724' class='md-header-anchor '></a>7.6 退出登录</h2><p><strong>接口签名：</strong></p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n3726" mdtype="fences">public void loginOut(final ILoginOutCallBack callBack)
</pre><p><strong>接口说明：</strong></p><p>退出登录 ,将本地保存的登录token取消掉</p><p><strong>参数说明：</strong></p><ul><li>callback</li></ul><p>public interface ILoginOutCallBack {
​    void onSuccess();
​    void onFail(int errorCode, String errorMessage);
}</p><h2><a name='header-n3734' class='md-header-anchor '></a>7.7 服务端实现 redirect_url (必须实现 重要!!!)</h2><blockquote><p>更多详情请查看 <a href='%E5%96%9C%E9%A9%AC%E6%8B%89%E9%9B%85OAuth2-%E6%A0%87%E5%87%86%E7%99%BB%E5%BD%95%E6%8E%88%E6%9D%83%E6%8E%A5%E5%85%A5%E6%96%87%E6%A1%A3(%E6%9C%8D%E5%8A%A1%E7%AB%AF%E5%AF%B9%E6%8E%A5%E6%96%87%E6%A1%A3).docx'>喜马拉雅OAuth2-标准登录授权接入文档(服务端对接文档).docx</a></p></blockquote><h2><a name='header-n3738' class='md-header-anchor '></a>7.8 第三方使用third_uid和third_token换取授权后的access_token</h2><blockquote><p>第三方登录方式 (具体请参考 <a href='' title='喜马拉雅OAuth2-合作方使用第三方账号登录并授权的接口文档-v1.0.docx'>喜马拉雅OAuth2-合作方使用第三方账号登录并授权的接口文档-v1.0.docx</a></p></blockquote><ul><li>异步接口</li></ul><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n3744" mdtype="fences">mSsoHandler.authorizeByThird("XXXX", "XXXX" ,new CustomAuthListener());
</pre><ul><li>同步接口(用于token失效回调时同步刷新)</li></ul><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="java"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="java"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Bundle</span> <span class="cm-variable">bundle</span> <span class="cm-operator">=</span> <span class="cm-variable">mSsoHandler</span>.<span class="cm-variable">authorizeByThirdSync</span>(<span class="cm-string">"XXXX"</span>, <span class="cm-string">"XXXX"</span>);</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">XmlyAuth2AccessToken</span> <span class="cm-variable">mAccessToken</span> <span class="cm-operator">=</span> <span class="cm-variable">XmlyAuth2AccessToken</span>.<span class="cm-variable">parseAccessToken</span>(<span class="cm-variable">bundle</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">if</span> (<span class="cm-variable">mAccessToken</span>.<span class="cm-variable">isSessionValid</span>()) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-comment">/**</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; <span class="cm-comment">* 如果是第三方登录方式需要使用如下方式</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; <span class="cm-comment">*/</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; <span class="cm-variable">AccessTokenManager</span>.<span class="cm-variable">getInstanse</span>().<span class="cm-variable">setAccessTokenAndUidByThirdType</span>(<span class="cm-variable">mAccessToken</span>.<span class="cm-variable">getToken</span>(), <span class="cm-variable">mAccessToken</span>.<span class="cm-variable">getExpiresAt</span>(), <span class="cm-string">"XXXX"</span>, <span class="cm-string">"XXXX"</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 220px;"></div><div class="CodeMirror-gutters" style="display: none; height: 220px;"></div></div></div></pre><p>此方式获取的token会失效,所以也需要参考 7.2 章节设置失效的监听</p><h1><a name='header-n3751' class='md-header-anchor '></a>8 SDK相关问题反馈</h1><ul><li>检查 <a href='http://open.ximalaya.com/sdk/download'>喜马拉雅开放平台</a> 网站上的SDK 的更新历史中是否有贵方的问题,可以下载最新的SDK更新下实验下是否还有相关问题</li><li>反馈时将喜马拉雅SDK的版本号、如果是必现的问题将出现问题的路径也反馈下,有log的话将错误的日志截图(整个错误栈截图,通俗点就是将红色的整个截图),或者保存为文档发给我</li><li>如果是关于返回的数据没有 ,数据少等问题 可以使用 Fiddler或者Charles抓下包,此类问题可以先将结果发给我方技术支持</li></ul><blockquote><p><a href='http://www.jianshu.com/p/9e05a2522758'>Fiddler 使用教程</a>
<a href='https://blog.csdn.net/yangmeng13930719363/article/details/51645435'>Charles 使用教程</a></p></blockquote><ul><li>有些问题如果可以通过Test用例 或者google可以解决的,希望大家可以自己动手解决下 非常感谢!!! 因为本人能力有限以及历史原因,文档中的内容有错误或者没有更新可以跟我反馈更改,非常感谢</li><li>如果是接口问题可以抓下包 ,发给我们请求的url。或者将请求的函数和请求的参数发我 ,如果是自运营内容,需要将贵方的app_key、app_secret和pack_id和请求的函数的请求的参数发我</li><li>如果是崩溃 可以使用如下命令将错误文件发我下:</li></ul><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="java"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="java"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">adb</span> <span class="cm-variable">shell</span> <span class="cm-variable">dumpsys</span> <span class="cm-variable">dropbox</span> <span class="cm-variable">data_app_crash</span> <span class="cm-operator">--</span><span class="cm-variable">print</span> <span class="cm-operator">&gt;</span><span class="cm-variable">f</span>:<span class="cm-operator">/</span><span class="cm-variable">log</span>.<span class="cm-variable">txt</span></span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 22px;"></div><div class="CodeMirror-gutters" style="display: none; height: 22px;"></div></div></div></pre><ul><li>联系方式 <code>联系我们的时候请加上贵方的公司名称方便找</code></li></ul><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang=""><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang=""><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">喜马拉雅 技术支持</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">李亚琳</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">微信：1060701385</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">邮箱：lin.li@ximalaya.com</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">张雪萍</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">微信：zxp1358242613</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">邮箱：krystal.zhang@ximalaya.com</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 198px;"></div><div class="CodeMirror-gutters" style="display: none; height: 198px;"></div></div></div></pre><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="" contenteditable="false" cid="n3773" mdtype="fences">Android SDK 辛乐 (如果是非技术问题不予回答)
邮箱 le.xin@ximalaya.com
</pre><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm md-focus" lang=""><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang=""><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">开放平台官网 http://open.ximalaya.com/</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">开放平台其他联系方式  http://open.ximalaya.com/doc/doc-37</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 44px;"></div><div class="CodeMirror-gutters" style="display: none; height: 44px;"></div></div></div></pre></div>
</body>
</html>